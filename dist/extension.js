"use strict";var dv=Object.create;var qi=Object.defineProperty;var pv=Object.getOwnPropertyDescriptor;var mv=Object.getOwnPropertyNames;var gv=Object.getPrototypeOf,_v=Object.prototype.hasOwnProperty;var Fe=(e,t)=>()=>(e&&(t=e(e=0)),t);var W=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),$i=(e,t)=>{for(var r in t)qi(e,r,{get:t[r],enumerable:!0})},Dc=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of mv(t))!_v.call(e,n)&&n!==r&&qi(e,n,{get:()=>t[n],enumerable:!(i=pv(t,n))||i.enumerable});return e};var Ne=(e,t,r)=>(r=e!=null?dv(gv(e)):{},Dc(t||!e||!e.__esModule?qi(r,"default",{value:e,enumerable:!0}):r,e)),Mc=e=>Dc(qi({},"__esModule",{value:!0}),e);var $c=W((zx,qc)=>{var Zr=1e3,Jr=Zr*60,en=Jr*60,kr=en*24,yv=kr*7,bv=kr*365.25;qc.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return vv(e);if(r==="number"&&isFinite(e))return t.long?Sv(e):wv(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function vv(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*bv;case"weeks":case"week":case"w":return r*yv;case"days":case"day":case"d":return r*kr;case"hours":case"hour":case"hrs":case"hr":case"h":return r*en;case"minutes":case"minute":case"mins":case"min":case"m":return r*Jr;case"seconds":case"second":case"secs":case"sec":case"s":return r*Zr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function wv(e){var t=Math.abs(e);return t>=kr?Math.round(e/kr)+"d":t>=en?Math.round(e/en)+"h":t>=Jr?Math.round(e/Jr)+"m":t>=Zr?Math.round(e/Zr)+"s":e+"ms"}function Sv(e){var t=Math.abs(e);return t>=kr?Wi(e,t,kr,"day"):t>=en?Wi(e,t,en,"hour"):t>=Jr?Wi(e,t,Jr,"minute"):t>=Zr?Wi(e,t,Zr,"second"):e+" ms"}function Wi(e,t,r,i){var n=t>=r*1.5;return Math.round(e/r)+" "+i+(n?"s":"")}});var Bo=W((Kx,Wc)=>{function Ev(e){r.debug=r,r.default=r,r.coerce=c,r.disable=a,r.enable=n,r.enabled=l,r.humanize=$c(),r.destroy=h,Object.keys(e).forEach(d=>{r[d]=e[d]}),r.names=[],r.skips=[],r.formatters={};function t(d){let p=0;for(let m=0;m<d.length;m++)p=(p<<5)-p+d.charCodeAt(m),p|=0;return r.colors[Math.abs(p)%r.colors.length]}r.selectColor=t;function r(d){let p,m=null,_,y;function v(...E){if(!v.enabled)return;let S=v,R=Number(new Date),O=R-(p||R);S.diff=O,S.prev=p,S.curr=R,p=R,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let N=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(j,ae)=>{if(j==="%%")return"%";N++;let U=r.formatters[ae];if(typeof U=="function"){let J=E[N];j=U.call(S,J),E.splice(N,1),N--}return j}),r.formatArgs.call(S,E),(S.log||r.log).apply(S,E)}return v.namespace=d,v.useColors=r.useColors(),v.color=r.selectColor(d),v.extend=i,v.destroy=r.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(_!==r.namespaces&&(_=r.namespaces,y=r.enabled(d)),y),set:E=>{m=E}}),typeof r.init=="function"&&r.init(v),v}function i(d,p){let m=r(this.namespace+(typeof p>"u"?":":p)+d);return m.log=this.log,m}function n(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let p=(typeof d=="string"?d:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let m of p)m[0]==="-"?r.skips.push(m.slice(1)):r.names.push(m)}function s(d,p){let m=0,_=0,y=-1,v=0;for(;m<d.length;)if(_<p.length&&(p[_]===d[m]||p[_]==="*"))p[_]==="*"?(y=_,v=m,_++):(m++,_++);else if(y!==-1)_=y+1,v++,m=v;else return!1;for(;_<p.length&&p[_]==="*";)_++;return _===p.length}function a(){let d=[...r.names,...r.skips.map(p=>"-"+p)].join(",");return r.enable(""),d}function l(d){for(let p of r.skips)if(s(d,p))return!1;for(let p of r.names)if(s(d,p))return!0;return!1}function c(d){return d instanceof Error?d.stack||d.message:d}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Wc.exports=Ev});var Hc=W((et,Hi)=>{et.formatArgs=Rv;et.save=Av;et.load=Cv;et.useColors=Tv;et.storage=kv();et.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();et.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Tv(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Rv(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Hi.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(i=r))}),e.splice(i,0,t)}et.log=console.debug||console.log||(()=>{});function Av(e){try{e?et.storage.setItem("debug",e):et.storage.removeItem("debug")}catch{}}function Cv(){let e;try{e=et.storage.getItem("debug")||et.storage.getItem("DEBUG")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function kv(){try{return localStorage}catch{}}Hi.exports=Bo()(et);var{formatters:Ov}=Hi.exports;Ov.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Uc={};$i(Uc,{createSupportsColor:()=>Mo,default:()=>Fv});function bt(e,t=globalThis.Deno?globalThis.Deno.args:Ui.default.argv){let r=e.startsWith("-")?"":e.length===1?"-":"--",i=t.indexOf(r+e),n=t.indexOf("--");return i!==-1&&(n===-1||i<n)}function xv(){if("FORCE_COLOR"in Re)return Re.FORCE_COLOR==="true"?1:Re.FORCE_COLOR==="false"?0:Re.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(Re.FORCE_COLOR,10),3)}function Pv(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Lv(e,{streamIsTTY:t,sniffFlags:r=!0}={}){let i=xv();i!==void 0&&(ji=i);let n=r?ji:i;if(n===0)return 0;if(r){if(bt("color=16m")||bt("color=full")||bt("color=truecolor"))return 3;if(bt("color=256"))return 2}if("TF_BUILD"in Re&&"AGENT_NAME"in Re)return 1;if(e&&!t&&n===void 0)return 0;let s=n||0;if(Re.TERM==="dumb")return s;if(Ui.default.platform==="win32"){let a=jc.default.release().split(".");return Number(a[0])>=10&&Number(a[2])>=10586?Number(a[2])>=14931?3:2:1}if("CI"in Re)return"GITHUB_ACTIONS"in Re||"GITEA_ACTIONS"in Re?3:["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(a=>a in Re)||Re.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in Re)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Re.TEAMCITY_VERSION)?1:0;if(Re.COLORTERM==="truecolor"||Re.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in Re){let a=Number.parseInt((Re.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Re.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Re.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Re.TERM)||"COLORTERM"in Re?1:s}function Mo(e,t={}){let r=Lv(e,{streamIsTTY:e&&e.isTTY,...t});return Pv(r)}var Ui,jc,Do,Re,ji,Iv,Fv,zc=Fe(()=>{Ui=Ne(require("node:process"),1),jc=Ne(require("node:os"),1),Do=Ne(require("node:tty"),1);({env:Re}=Ui.default);bt("no-color")||bt("no-colors")||bt("color=false")||bt("color=never")?ji=0:(bt("color")||bt("colors")||bt("color=true")||bt("color=always"))&&(ji=1);Iv={stdout:Mo({isTTY:Do.default.isatty(1)}),stderr:Mo({isTTY:Do.default.isatty(2)})},Fv=Iv});var Gc=W((De,Ki)=>{var Nv=require("tty"),zi=require("util");De.init=Hv;De.log=qv;De.formatArgs=Dv;De.save=$v;De.load=Wv;De.useColors=Bv;De.destroy=zi.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");De.colors=[6,2,3,4,5,1];try{let e=(zc(),Mc(Uc));e&&(e.stderr||e).level>=2&&(De.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}De.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(n,s)=>s.toUpperCase()),i=process.env[t];return/^(yes|on|true|enabled)$/i.test(i)?i=!0:/^(no|off|false|disabled)$/i.test(i)?i=!1:i==="null"?i=null:i=Number(i),e[r]=i,e},{});function Bv(){return"colors"in De.inspectOpts?!!De.inspectOpts.colors:Nv.isatty(process.stderr.fd)}function Dv(e){let{namespace:t,useColors:r}=this;if(r){let i=this.color,n="\x1B[3"+(i<8?i:"8;5;"+i),s=`  ${n};1m${t} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(n+"m+"+Ki.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=Mv()+t+" "+e[0]}function Mv(){return De.inspectOpts.hideDate?"":new Date().toISOString()+" "}function qv(...e){return process.stderr.write(zi.formatWithOptions(De.inspectOpts,...e)+`
`)}function $v(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function Wv(){return process.env.DEBUG}function Hv(e){e.inspectOpts={};let t=Object.keys(De.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=De.inspectOpts[t[r]]}Ki.exports=Bo()(De);var{formatters:Kc}=Ki.exports;Kc.o=function(e){return this.inspectOpts.colors=this.useColors,zi.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};Kc.O=function(e){return this.inspectOpts.colors=this.useColors,zi.inspect(e,this.inspectOpts)}});var $o=W((Gx,qo)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?qo.exports=Hc():qo.exports=Gc()});var Vc=W(lt=>{"use strict";var jv=lt&&lt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lt,"__esModule",{value:!0});var Uv=require("fs"),zv=jv($o()),tn=zv.default("@kwsites/file-exists");function Kv(e,t,r){tn("checking %s",e);try{let i=Uv.statSync(e);return i.isFile()&&t?(tn("[OK] path represents a file"),!0):i.isDirectory()&&r?(tn("[OK] path represents a directory"),!0):(tn("[FAIL] path represents something other than a file or directory"),!1)}catch(i){if(i.code==="ENOENT")return tn("[FAIL] path is not accessible: %o",i),!1;throw tn("[FATAL] %o",i),i}}function Gv(e,t=lt.READABLE){return Kv(e,(t&lt.FILE)>0,(t&lt.FOLDER)>0)}lt.exists=Gv;lt.FILE=1;lt.FOLDER=2;lt.READABLE=lt.FILE+lt.FOLDER});var Yc=W(Gi=>{"use strict";function Vv(e){for(var t in e)Gi.hasOwnProperty(t)||(Gi[t]=e[t])}Object.defineProperty(Gi,"__esModule",{value:!0});Vv(Vc())});var Ho=W(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.createDeferred=Or.deferred=void 0;function Wo(){let e,t,r="pending";return{promise:new Promise((n,s)=>{e=n,t=s}),done(n){r==="pending"&&(r="resolved",e(n))},fail(n){r==="pending"&&(r="rejected",t(n))},get fulfilled(){return r!=="pending"},get status(){return r}}}Or.deferred=Wo;Or.createDeferred=Wo;Or.default=Wo});var At=W((RP,qd)=>{"use strict";var ps=Array.prototype,qn=Object.prototype,nT={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","\\":"&#92;"},iT=/[&"'<>\\]/g,Ee=qd.exports={};function La(e,t){return qn.hasOwnProperty.call(e,t)}Ee.hasOwnProp=La;function sT(e){return nT[e]}function oT(e,t,r){if(r.Update||(r=new Ee.TemplateError(r)),r.Update(e),!t){var i=r;r=new Error(i.message),r.name=i.name}return r}Ee._prettifyError=oT;function Mn(e,t,r){var i,n;e instanceof Error&&(n=e,e=n.name+": "+n.message),Object.setPrototypeOf?(i=new Error(e),Object.setPrototypeOf(i,Mn.prototype)):(i=this,Object.defineProperty(i,"message",{enumerable:!1,writable:!0,value:e})),Object.defineProperty(i,"name",{value:"Template render error"}),Error.captureStackTrace&&Error.captureStackTrace(i,this.constructor);var s;if(n){var a=Object.getOwnPropertyDescriptor(n,"stack");s=a&&(a.get||function(){return a.value}),s||(s=function(){return n.stack})}else{var l=new Error(e).stack;s=function(){return l}}return Object.defineProperty(i,"stack",{get:function(){return s.call(i)}}),Object.defineProperty(i,"cause",{value:n}),i.lineno=t,i.colno=r,i.firstUpdate=!0,i.Update=function(h){var d="("+(h||"unknown path")+")";return this.firstUpdate&&(this.lineno&&this.colno?d+=" [Line "+this.lineno+", Column "+this.colno+"]":this.lineno&&(d+=" [Line "+this.lineno+"]")),d+=`
 `,this.firstUpdate&&(d+=" "),this.message=d+(this.message||""),this.firstUpdate=!1,this},i}Object.setPrototypeOf?Object.setPrototypeOf(Mn.prototype,Error.prototype):Mn.prototype=Object.create(Error.prototype,{constructor:{value:Mn}});Ee.TemplateError=Mn;function aT(e){return e.replace(iT,sT)}Ee.escape=aT;function Ld(e){return qn.toString.call(e)==="[object Function]"}Ee.isFunction=Ld;function Id(e){return qn.toString.call(e)==="[object Array]"}Ee.isArray=Id;function Fd(e){return qn.toString.call(e)==="[object String]"}Ee.isString=Fd;function Nd(e){return qn.toString.call(e)==="[object Object]"}Ee.isObject=Nd;function uT(e){return e?typeof e=="string"?e.split("."):[e]:[]}function Bd(e){var t=uT(e);return function(i){for(var n=i,s=0;s<t.length;s++){var a=t[s];if(La(n,a))n=n[a];else return}return n}}Ee.getAttrGetter=Bd;function lT(e,t,r){for(var i={},n=Ld(t)?t:Bd(t),s=0;s<e.length;s++){var a=e[s],l=n(a,s);if(l===void 0&&r===!0)throw new TypeError('groupby: attribute "'+t+'" resolved to undefined');(i[l]||(i[l]=[])).push(a)}return i}Ee.groupBy=lT;function Dd(e){return Array.prototype.slice.call(e)}Ee.toArray=Dd;function cT(e){var t=[];if(!e)return t;for(var r=e.length,i=Dd(arguments).slice(1),n=-1;++n<r;)Md(i,e[n])===-1&&t.push(e[n]);return t}Ee.without=cT;function fT(e,t){for(var r="",i=0;i<t;i++)r+=e;return r}Ee.repeat=fT;function hT(e,t,r){if(e!=null){if(ps.forEach&&e.forEach===ps.forEach)e.forEach(t,r);else if(e.length===+e.length)for(var i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)}}Ee.each=hT;function dT(e,t){var r=[];if(e==null)return r;if(ps.map&&e.map===ps.map)return e.map(t);for(var i=0;i<e.length;i++)r[r.length]=t(e[i],i);return e.length===+e.length&&(r.length=e.length),r}Ee.map=dT;function pT(e,t,r){var i=-1;function n(){i++,i<e.length?t(e[i],i,n,r):r()}n()}Ee.asyncIter=pT;function mT(e,t,r){var i=$n(e||{}),n=i.length,s=-1;function a(){s++;var l=i[s];s<n?t(l,e[l],s,n,a):r()}a()}Ee.asyncFor=mT;function Md(e,t,r){return Array.prototype.indexOf.call(e||[],t,r)}Ee.indexOf=Md;function $n(e){var t=[];for(var r in e)La(e,r)&&t.push(r);return t}Ee.keys=$n;function gT(e){return $n(e).map(function(t){return[t,e[t]]})}Ee._entries=gT;function _T(e){return $n(e).map(function(t){return e[t]})}Ee._values=_T;function yT(e,t){return e=e||{},$n(t).forEach(function(r){e[r]=t[r]}),e}Ee._assign=Ee.extend=yT;function bT(e,t){if(Id(t)||Fd(t))return t.indexOf(e)!==-1;if(Nd(t))return e in t;throw new Error('Cannot use "in" operator to search for "'+e+'" in unexpected types.')}Ee.inOperator=bT});var Ud=W((AP,jd)=>{"use strict";var ms,vT=typeof setImmediate=="function";jd.exports=Wd;function Wd(e){Ft.length||(Hd(),Ia=!0),Ft[Ft.length]=e}var Ft=[],Ia=!1,It=0,wT=1024;function $d(){for(;It<Ft.length;){var e=It;if(It=It+1,Ft[e].call(),It>wT){for(var t=0,r=Ft.length-It;t<r;t++)Ft[t]=Ft[t+It];Ft.length-=It,It=0}}Ft.length=0,It=0,Ia=!1}Wd.requestFlush=Hd;function Hd(){var e=process.domain;e&&(ms||(ms=require("domain")),ms.active=process.domain=null),Ia&&vT?setImmediate($d):process.nextTick($d),e&&(ms.active=process.domain=e)}});var Vd=W((CP,Gd)=>{"use strict";var zd=Ud(),Fa=[];Gd.exports=ST;function ST(e){var t;Fa.length?t=Fa.pop():t=new Kd,t.task=e,t.domain=process.domain,zd(t)}function Kd(){this.task=null,this.domain=null}Kd.prototype.call=function(){this.domain&&this.domain.enter();var e=!0;try{this.task.call(),e=!1,this.domain&&this.domain.exit()}finally{e&&zd.requestFlush(),this.task=null,this.domain=null,Fa.push(this)}}});var Qd=W((Yd,gs)=>{(function(e){"use strict";var t=function(){var a=Array.prototype.slice.call(arguments);typeof a[0]=="function"&&a[0].apply(null,a.splice(1))},r=function(a){typeof setImmediate=="function"?setImmediate(a):typeof process<"u"&&process.nextTick?process.nextTick(a):setTimeout(a,0)},i=function(a){var l=function(c){var h=function(){return a.length&&a[c].apply(null,arguments),h.next()};return h.next=function(){return c<a.length-1?l(c+1):null},h};return l(0)},n=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},s=function(a,l,c){var h=c?r:t;if(l=l||function(){},!n(a)){var d=new Error("First argument to waterfall must be an array of functions");return l(d)}if(!a.length)return l();var p=function(m){return function(_){if(_)l.apply(null,arguments),l=function(){};else{var y=Array.prototype.slice.call(arguments,1),v=m.next();v?y.push(p(v)):y.push(l),h(function(){m.apply(null,y)})}}};p(i(a))()};typeof define<"u"&&define.amd?define([],function(){return s}):typeof gs<"u"&&gs.exports?gs.exports=s:e.waterfall=s})(Yd)});var Ba=W((kP,Tp)=>{"use strict";var Xd=At(),Zd=` 
	\r\xA0`,Jd="()[]{}%*-+~/#,:|.<>=!",ET="0123456789",TT="{%",RT="%}",AT="{{",CT="}}",kT="{#",OT="#}",ep="string",tp="whitespace",rp="data",np="block-start",ip="block-end",sp="variable-start",op="variable-end",ap="comment",up="left-paren",lp="right-paren",cp="left-bracket",fp="right-bracket",hp="left-curly",dp="right-curly",pp="operator",mp="comma",gp="colon",_p="tilde",yp="pipe",bp="int",vp="float",wp="boolean",Na="none",Sp="symbol",xT="special",Ep="regex";function Qe(e,t,r,i){return{type:e,value:t,lineno:r,colno:i}}var PT=function(){function e(r,i){this.str=r,this.index=0,this.len=r.length,this.lineno=0,this.colno=0,this.in_code=!1,i=i||{};var n=i.tags||{};this.tags={BLOCK_START:n.blockStart||TT,BLOCK_END:n.blockEnd||RT,VARIABLE_START:n.variableStart||AT,VARIABLE_END:n.variableEnd||CT,COMMENT_START:n.commentStart||kT,COMMENT_END:n.commentEnd||OT},this.trimBlocks=!!i.trimBlocks,this.lstripBlocks=!!i.lstripBlocks}var t=e.prototype;return t.nextToken=function(){var i=this.lineno,n=this.colno,s;if(this.in_code){var a=this.current();if(this.isFinished())return null;if(a==='"'||a==="'")return Qe(ep,this._parseString(a),i,n);if(s=this._extract(Zd))return Qe(tp,s,i,n);if((s=this._extractString(this.tags.BLOCK_END))||(s=this._extractString("-"+this.tags.BLOCK_END)))return this.in_code=!1,this.trimBlocks&&(a=this.current(),a===`
`?this.forward():a==="\r"&&(this.forward(),a=this.current(),a===`
`?this.forward():this.back())),Qe(ip,s,i,n);if((s=this._extractString(this.tags.VARIABLE_END))||(s=this._extractString("-"+this.tags.VARIABLE_END)))return this.in_code=!1,Qe(op,s,i,n);if(a==="r"&&this.str.charAt(this.index+1)==="/"){this.forwardN(2);for(var l="";!this.isFinished();)if(this.current()==="/"&&this.previous()!=="\\"){this.forward();break}else l+=this.current(),this.forward();for(var c=["g","i","m","y"],h="";!this.isFinished();){var d=c.indexOf(this.current())!==-1;if(d)h+=this.current(),this.forward();else break}return Qe(Ep,{body:l,flags:h},i,n)}else if(Jd.indexOf(a)!==-1){this.forward();var p=["==","===","!=","!==","<=",">=","//","**"],m=a+this.current(),_;switch(Xd.indexOf(p,m)!==-1&&(this.forward(),a=m,Xd.indexOf(p,m+this.current())!==-1&&(a=m+this.current(),this.forward())),a){case"(":_=up;break;case")":_=lp;break;case"[":_=cp;break;case"]":_=fp;break;case"{":_=hp;break;case"}":_=dp;break;case",":_=mp;break;case":":_=gp;break;case"~":_=_p;break;case"|":_=yp;break;default:_=pp}return Qe(_,a,i,n)}else if(s=this._extractUntil(Zd+Jd),s.match(/^[-+]?[0-9]+$/))if(this.current()==="."){this.forward();var y=this._extract(ET);return Qe(vp,s+"."+y,i,n)}else return Qe(bp,s,i,n);else{if(s.match(/^(true|false)$/))return Qe(wp,s,i,n);if(s==="none")return Qe(Na,s,i,n);if(s==="null")return Qe(Na,s,i,n);if(s)return Qe(Sp,s,i,n);throw new Error("Unexpected value while parsing: "+s)}}else{var v=this.tags.BLOCK_START.charAt(0)+this.tags.VARIABLE_START.charAt(0)+this.tags.COMMENT_START.charAt(0)+this.tags.COMMENT_END.charAt(0);if(this.isFinished())return null;if((s=this._extractString(this.tags.BLOCK_START+"-"))||(s=this._extractString(this.tags.BLOCK_START)))return this.in_code=!0,Qe(np,s,i,n);if((s=this._extractString(this.tags.VARIABLE_START+"-"))||(s=this._extractString(this.tags.VARIABLE_START)))return this.in_code=!0,Qe(sp,s,i,n);s="";var E,S=!1;for(this._matches(this.tags.COMMENT_START)&&(S=!0,s=this._extractString(this.tags.COMMENT_START));(E=this._extractUntil(v))!==null;)if(s+=E,(this._matches(this.tags.BLOCK_START)||this._matches(this.tags.VARIABLE_START)||this._matches(this.tags.COMMENT_START))&&!S){if(this.lstripBlocks&&this._matches(this.tags.BLOCK_START)&&this.colno>0&&this.colno<=s.length){var R=s.slice(-this.colno);if(/^\s+$/.test(R)&&(s=s.slice(0,-this.colno),!s.length))return this.nextToken()}break}else if(this._matches(this.tags.COMMENT_END)){if(!S)throw new Error("unexpected end of comment");s+=this._extractString(this.tags.COMMENT_END);break}else s+=this.current(),this.forward();if(E===null&&S)throw new Error("expected end of comment, got end of file");return Qe(S?ap:rp,s,i,n)}},t._parseString=function(i){this.forward();for(var n="";!this.isFinished()&&this.current()!==i;){var s=this.current();if(s==="\\"){switch(this.forward(),this.current()){case"n":n+=`
`;break;case"t":n+="	";break;case"r":n+="\r";break;default:n+=this.current()}this.forward()}else n+=s,this.forward()}return this.forward(),n},t._matches=function(i){if(this.index+i.length>this.len)return null;var n=this.str.slice(this.index,this.index+i.length);return n===i},t._extractString=function(i){return this._matches(i)?(this.forwardN(i.length),i):null},t._extractUntil=function(i){return this._extractMatching(!0,i||"")},t._extract=function(i){return this._extractMatching(!1,i)},t._extractMatching=function(i,n){if(this.isFinished())return null;var s=n.indexOf(this.current());if(i&&s===-1||!i&&s!==-1){var a=this.current();this.forward();for(var l=n.indexOf(this.current());(i&&l===-1||!i&&l!==-1)&&!this.isFinished();)a+=this.current(),this.forward(),l=n.indexOf(this.current());return a}return""},t._extractRegex=function(i){var n=this.currentStr().match(i);return n?(this.forwardN(n[0].length),n):null},t.isFinished=function(){return this.index>=this.len},t.forwardN=function(i){for(var n=0;n<i;n++)this.forward()},t.forward=function(){this.index++,this.previous()===`
`?(this.lineno++,this.colno=0):this.colno++},t.backN=function(i){for(var n=0;n<i;n++)this.back()},t.back=function(){if(this.index--,this.current()===`
`){this.lineno--;var i=this.src.lastIndexOf(`
`,this.index-1);i===-1?this.colno=this.index:this.colno=this.index-i}else this.colno--},t.current=function(){return this.isFinished()?"":this.str.charAt(this.index)},t.currentStr=function(){return this.isFinished()?"":this.str.substr(this.index)},t.previous=function(){return this.str.charAt(this.index-1)},e}();Tp.exports={lex:function(t,r){return new PT(t,r)},TOKEN_STRING:ep,TOKEN_WHITESPACE:tp,TOKEN_DATA:rp,TOKEN_BLOCK_START:np,TOKEN_BLOCK_END:ip,TOKEN_VARIABLE_START:sp,TOKEN_VARIABLE_END:op,TOKEN_COMMENT:ap,TOKEN_LEFT_PAREN:up,TOKEN_RIGHT_PAREN:lp,TOKEN_LEFT_BRACKET:cp,TOKEN_RIGHT_BRACKET:fp,TOKEN_LEFT_CURLY:hp,TOKEN_RIGHT_CURLY:dp,TOKEN_OPERATOR:pp,TOKEN_COMMA:mp,TOKEN_COLON:gp,TOKEN_TILDE:_p,TOKEN_PIPE:yp,TOKEN_INT:bp,TOKEN_FLOAT:vp,TOKEN_BOOLEAN:wp,TOKEN_NONE:Na,TOKEN_SYMBOL:Sp,TOKEN_SPECIAL:xT,TOKEN_REGEX:Ep}});var on=W((OP,Op)=>{"use strict";function Rp(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,LT(i.key),i)}}function Ma(e,t,r){return t&&Rp(e.prototype,t),r&&Rp(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function LT(e){var t=IT(e,"string");return typeof t=="symbol"?t:String(t)}function IT(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cp(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Da(e,t)}function Da(e,t){return Da=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Da(e,t)}var FT=require("events"),Ap=At();function NT(e,t){return typeof e!="function"||typeof t!="function"?t:function(){var i=this.parent;this.parent=e;var n=t.apply(this,arguments);return this.parent=i,n}}function kp(e,t,r){r=r||{},Ap.keys(r).forEach(function(n){r[n]=NT(e.prototype[n],r[n])});var i=function(n){Cp(s,n);function s(){return n.apply(this,arguments)||this}return Ma(s,[{key:"typename",get:function(){return t}}]),s}(e);return Ap._assign(i.prototype,r),i}var BT=function(){function e(){this.init.apply(this,arguments)}var t=e.prototype;return t.init=function(){},e.extend=function(i,n){return typeof i=="object"&&(n=i,i="anonymous"),kp(this,i,n)},Ma(e,[{key:"typename",get:function(){return this.constructor.name}}]),e}(),DT=function(e){Cp(t,e);function t(){var i,n;return n=e.call(this)||this,(i=n).init.apply(i,arguments),n}var r=t.prototype;return r.init=function(){},t.extend=function(n,s){return typeof n=="object"&&(s=n,n="anonymous"),kp(this,n,s)},Ma(t,[{key:"typename",get:function(){return this.constructor.name}}]),t}(FT);Op.exports={Obj:BT,EmitterObj:DT}});var Hn=W((xP,Mp)=>{"use strict";function xp(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,MT(i.key),i)}}function $a(e,t,r){return t&&xp(e.prototype,t),r&&xp(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function MT(e){var t=qT(e,"string");return typeof t=="symbol"?t:String(t)}function qT(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,qa(e,t)}function qa(e,t){return qa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},qa(e,t)}var $T=on(),WT=$T.Obj;function Pp(e,t,r){e instanceof t&&r.push(e),e instanceof _e&&e.findAll(t,r)}var _e=function(e){_s(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.init=function(n,s){for(var a=arguments,l=this,c=arguments.length,h=new Array(c>2?c-2:0),d=2;d<c;d++)h[d-2]=arguments[d];this.lineno=n,this.colno=s,this.fields.forEach(function(p,m){var _=a[m+2];_===void 0&&(_=null),l[p]=_})},r.findAll=function(n,s){var a=this;return s=s||[],this instanceof Nt?this.children.forEach(function(l){return Pp(l,n,s)}):this.fields.forEach(function(l){return Pp(a[l],n,s)}),s},r.iterFields=function(n){var s=this;this.fields.forEach(function(a){n(s[a],a)})},t}(WT),Wa=function(e){_s(t,e);function t(){return e.apply(this,arguments)||this}return $a(t,[{key:"typename",get:function(){return"Value"}},{key:"fields",get:function(){return["value"]}}]),t}(_e),Nt=function(e){_s(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.init=function(n,s,a){e.prototype.init.call(this,n,s,a||[])},r.addChild=function(n){this.children.push(n)},$a(t,[{key:"typename",get:function(){return"NodeList"}},{key:"fields",get:function(){return["children"]}}]),t}(_e),HT=Nt.extend("Root"),Lp=Wa.extend("Literal"),jT=Wa.extend("Symbol"),UT=Nt.extend("Group"),zT=Nt.extend("Array"),KT=_e.extend("Pair",{fields:["key","value"]}),Ip=Nt.extend("Dict"),GT=_e.extend("LookupVal",{fields:["target","val"]}),Fp=_e.extend("If",{fields:["cond","body","else_"]}),VT=Fp.extend("IfAsync"),YT=_e.extend("InlineIf",{fields:["cond","body","else_"]}),Ha=_e.extend("For",{fields:["arr","name","body","else_"]}),QT=Ha.extend("AsyncEach"),XT=Ha.extend("AsyncAll"),Np=_e.extend("Macro",{fields:["name","args","body"]}),ZT=Np.extend("Caller"),JT=_e.extend("Import",{fields:["template","target","withContext"]}),eR=function(e){_s(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.init=function(n,s,a,l,c){e.prototype.init.call(this,n,s,a,l||new Nt,c)},$a(t,[{key:"typename",get:function(){return"FromImport"}},{key:"fields",get:function(){return["template","names","withContext"]}}]),t}(_e),Bp=_e.extend("FunCall",{fields:["name","args"]}),Dp=Bp.extend("Filter"),tR=Dp.extend("FilterAsync",{fields:["name","args","symbol"]}),rR=Ip.extend("KeywordArgs"),nR=_e.extend("Block",{fields:["name","body"]}),iR=_e.extend("Super",{fields:["blockName","symbol"]}),sR=_e.extend("TemplateRef",{fields:["template"]}),oR=sR.extend("Extends"),aR=_e.extend("Include",{fields:["template","ignoreMissing"]}),uR=_e.extend("Set",{fields:["targets","value"]}),lR=_e.extend("Switch",{fields:["expr","cases","default"]}),cR=_e.extend("Case",{fields:["cond","body"]}),fR=Nt.extend("Output"),hR=_e.extend("Capture",{fields:["body"]}),dR=Lp.extend("TemplateData"),ja=_e.extend("UnaryOp",{fields:["target"]}),ft=_e.extend("BinOp",{fields:["left","right"]}),pR=ft.extend("In"),mR=ft.extend("Is"),gR=ft.extend("Or"),_R=ft.extend("And"),yR=ja.extend("Not"),bR=ft.extend("Add"),vR=ft.extend("Concat"),wR=ft.extend("Sub"),SR=ft.extend("Mul"),ER=ft.extend("Div"),TR=ft.extend("FloorDiv"),RR=ft.extend("Mod"),AR=ft.extend("Pow"),CR=ja.extend("Neg"),kR=ja.extend("Pos"),OR=_e.extend("Compare",{fields:["expr","ops"]}),xR=_e.extend("CompareOperand",{fields:["expr","type"]}),Ua=_e.extend("CallExtension",{init:function(t,r,i,n){this.parent(),this.extName=t.__name||t,this.prop=r,this.args=i||new Nt,this.contentArgs=n||[],this.autoescape=t.autoescape},fields:["extName","prop","args","contentArgs"]}),PR=Ua.extend("CallExtensionAsync");function an(e,t,r){var i=e.split(`
`);i.forEach(function(n,s){n&&(r&&s>0||!r)&&process.stdout.write(" ".repeat(t));var a=s===i.length-1?"":`
`;process.stdout.write(""+n+a)})}function Wn(e,t){if(t=t||0,an(e.typename+": ",t),e instanceof Nt)an(`
`),e.children.forEach(function(n){Wn(n,t+2)});else if(e instanceof Ua)an(e.extName+"."+e.prop+`
`),e.args&&Wn(e.args,t+2),e.contentArgs&&e.contentArgs.forEach(function(n){Wn(n,t+2)});else{var r=[],i=null;e.iterFields(function(n,s){n instanceof _e?r.push([s,n]):(i=i||{},i[s]=n)}),i?an(JSON.stringify(i,null,2)+`
`,null,!0):an(`
`),r.forEach(function(n){var s=n[0],a=n[1];an("["+s+"] =>",t+2),Wn(a,t+4)})}}Mp.exports={Node:_e,Root:HT,NodeList:Nt,Value:Wa,Literal:Lp,Symbol:jT,Group:UT,Array:zT,Pair:KT,Dict:Ip,Output:fR,Capture:hR,TemplateData:dR,If:Fp,IfAsync:VT,InlineIf:YT,For:Ha,AsyncEach:QT,AsyncAll:XT,Macro:Np,Caller:ZT,Import:JT,FromImport:eR,FunCall:Bp,Filter:Dp,FilterAsync:tR,KeywordArgs:rR,Block:nR,Super:iR,Extends:oR,Include:aR,Set:uR,Switch:lR,Case:cR,LookupVal:GT,BinOp:ft,In:pR,Is:mR,Or:gR,And:_R,Not:yR,Add:bR,Concat:vR,Sub:wR,Mul:SR,Div:ER,FloorDiv:TR,Mod:RR,Pow:AR,Neg:CR,Pos:kR,Compare:OR,CompareOperand:xR,CallExtension:Ua,CallExtensionAsync:PR,printNodes:Wn}});var Ga=W((PP,$p)=>{"use strict";function LR(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ka(e,t)}function Ka(e,t){return Ka=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Ka(e,t)}var H=Ba(),D=Hn(),IR=on().Obj,za=At(),qp=function(e){LR(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.init=function(n){this.tokens=n,this.peeked=null,this.breakOnBlocks=null,this.dropLeadingWhitespace=!1,this.extensions=[]},r.nextToken=function(n){var s;if(this.peeked)if(!n&&this.peeked.type===H.TOKEN_WHITESPACE)this.peeked=null;else return s=this.peeked,this.peeked=null,s;if(s=this.tokens.nextToken(),!n)for(;s&&s.type===H.TOKEN_WHITESPACE;)s=this.tokens.nextToken();return s},r.peekToken=function(){return this.peeked=this.peeked||this.nextToken(),this.peeked},r.pushToken=function(n){if(this.peeked)throw new Error("pushToken: can only push one token on between reads");this.peeked=n},r.error=function(n,s,a){if(s===void 0||a===void 0){var l=this.peekToken()||{};s=l.lineno,a=l.colno}return s!==void 0&&(s+=1),a!==void 0&&(a+=1),new za.TemplateError(n,s,a)},r.fail=function(n,s,a){throw this.error(n,s,a)},r.skip=function(n){var s=this.nextToken();return!s||s.type!==n?(this.pushToken(s),!1):!0},r.expect=function(n){var s=this.nextToken();return s.type!==n&&this.fail("expected "+n+", got "+s.type,s.lineno,s.colno),s},r.skipValue=function(n,s){var a=this.nextToken();return!a||a.type!==n||a.value!==s?(this.pushToken(a),!1):!0},r.skipSymbol=function(n){return this.skipValue(H.TOKEN_SYMBOL,n)},r.advanceAfterBlockEnd=function(n){var s;return n||(s=this.peekToken(),s||this.fail("unexpected end of file"),s.type!==H.TOKEN_SYMBOL&&this.fail("advanceAfterBlockEnd: expected symbol token or explicit name to be passed"),n=this.nextToken().value),s=this.nextToken(),s&&s.type===H.TOKEN_BLOCK_END?s.value.charAt(0)==="-"&&(this.dropLeadingWhitespace=!0):this.fail("expected block end in "+n+" statement"),s},r.advanceAfterVariableEnd=function(){var n=this.nextToken();n&&n.type===H.TOKEN_VARIABLE_END?this.dropLeadingWhitespace=n.value.charAt(n.value.length-this.tokens.tags.VARIABLE_END.length-1)==="-":(this.pushToken(n),this.fail("expected variable end"))},r.parseFor=function(){var n=this.peekToken(),s,a;this.skipSymbol("for")?(s=new D.For(n.lineno,n.colno),a="endfor"):this.skipSymbol("asyncEach")?(s=new D.AsyncEach(n.lineno,n.colno),a="endeach"):this.skipSymbol("asyncAll")?(s=new D.AsyncAll(n.lineno,n.colno),a="endall"):this.fail("parseFor: expected for{Async}",n.lineno,n.colno),s.name=this.parsePrimary(),s.name instanceof D.Symbol||this.fail("parseFor: variable name expected for loop");var l=this.peekToken().type;if(l===H.TOKEN_COMMA){var c=s.name;for(s.name=new D.Array(c.lineno,c.colno),s.name.addChild(c);this.skip(H.TOKEN_COMMA);){var h=this.parsePrimary();s.name.addChild(h)}}return this.skipSymbol("in")||this.fail('parseFor: expected "in" keyword for loop',n.lineno,n.colno),s.arr=this.parseExpression(),this.advanceAfterBlockEnd(n.value),s.body=this.parseUntilBlocks(a,"else"),this.skipSymbol("else")&&(this.advanceAfterBlockEnd("else"),s.else_=this.parseUntilBlocks(a)),this.advanceAfterBlockEnd(),s},r.parseMacro=function(){var n=this.peekToken();this.skipSymbol("macro")||this.fail("expected macro");var s=this.parsePrimary(!0),a=this.parseSignature(),l=new D.Macro(n.lineno,n.colno,s,a);return this.advanceAfterBlockEnd(n.value),l.body=this.parseUntilBlocks("endmacro"),this.advanceAfterBlockEnd(),l},r.parseCall=function(){var n=this.peekToken();this.skipSymbol("call")||this.fail("expected call");var s=this.parseSignature(!0)||new D.NodeList,a=this.parsePrimary();this.advanceAfterBlockEnd(n.value);var l=this.parseUntilBlocks("endcall");this.advanceAfterBlockEnd();var c=new D.Symbol(n.lineno,n.colno,"caller"),h=new D.Caller(n.lineno,n.colno,c,s,l),d=a.args.children;d[d.length-1]instanceof D.KeywordArgs||d.push(new D.KeywordArgs);var p=d[d.length-1];return p.addChild(new D.Pair(n.lineno,n.colno,c,h)),new D.Output(n.lineno,n.colno,[a])},r.parseWithContext=function(){var n=this.peekToken(),s=null;return this.skipSymbol("with")?s=!0:this.skipSymbol("without")&&(s=!1),s!==null&&(this.skipSymbol("context")||this.fail("parseFrom: expected context after with/without",n.lineno,n.colno)),s},r.parseImport=function(){var n=this.peekToken();this.skipSymbol("import")||this.fail("parseImport: expected import",n.lineno,n.colno);var s=this.parseExpression();this.skipSymbol("as")||this.fail('parseImport: expected "as" keyword',n.lineno,n.colno);var a=this.parseExpression(),l=this.parseWithContext(),c=new D.Import(n.lineno,n.colno,s,a,l);return this.advanceAfterBlockEnd(n.value),c},r.parseFrom=function(){var n=this.peekToken();this.skipSymbol("from")||this.fail("parseFrom: expected from");var s=this.parseExpression();this.skipSymbol("import")||this.fail("parseFrom: expected import",n.lineno,n.colno);for(var a=new D.NodeList,l;;){var c=this.peekToken();if(c.type===H.TOKEN_BLOCK_END){a.children.length||this.fail("parseFrom: Expected at least one import name",n.lineno,n.colno),c.value.charAt(0)==="-"&&(this.dropLeadingWhitespace=!0),this.nextToken();break}a.children.length>0&&!this.skip(H.TOKEN_COMMA)&&this.fail("parseFrom: expected comma",n.lineno,n.colno);var h=this.parsePrimary();if(h.value.charAt(0)==="_"&&this.fail("parseFrom: names starting with an underscore cannot be imported",h.lineno,h.colno),this.skipSymbol("as")){var d=this.parsePrimary();a.addChild(new D.Pair(h.lineno,h.colno,h,d))}else a.addChild(h);l=this.parseWithContext()}return new D.FromImport(n.lineno,n.colno,s,a,l)},r.parseBlock=function(){var n=this.peekToken();this.skipSymbol("block")||this.fail("parseBlock: expected block",n.lineno,n.colno);var s=new D.Block(n.lineno,n.colno);s.name=this.parsePrimary(),s.name instanceof D.Symbol||this.fail("parseBlock: variable name expected",n.lineno,n.colno),this.advanceAfterBlockEnd(n.value),s.body=this.parseUntilBlocks("endblock"),this.skipSymbol("endblock"),this.skipSymbol(s.name.value);var a=this.peekToken();return a||this.fail("parseBlock: expected endblock, got end of file"),this.advanceAfterBlockEnd(a.value),s},r.parseExtends=function(){var n="extends",s=this.peekToken();this.skipSymbol(n)||this.fail("parseTemplateRef: expected "+n);var a=new D.Extends(s.lineno,s.colno);return a.template=this.parseExpression(),this.advanceAfterBlockEnd(s.value),a},r.parseInclude=function(){var n="include",s=this.peekToken();this.skipSymbol(n)||this.fail("parseInclude: expected "+n);var a=new D.Include(s.lineno,s.colno);return a.template=this.parseExpression(),this.skipSymbol("ignore")&&this.skipSymbol("missing")&&(a.ignoreMissing=!0),this.advanceAfterBlockEnd(s.value),a},r.parseIf=function(){var n=this.peekToken(),s;this.skipSymbol("if")||this.skipSymbol("elif")||this.skipSymbol("elseif")?s=new D.If(n.lineno,n.colno):this.skipSymbol("ifAsync")?s=new D.IfAsync(n.lineno,n.colno):this.fail("parseIf: expected if, elif, or elseif",n.lineno,n.colno),s.cond=this.parseExpression(),this.advanceAfterBlockEnd(n.value),s.body=this.parseUntilBlocks("elif","elseif","else","endif");var a=this.peekToken();switch(a&&a.value){case"elseif":case"elif":s.else_=this.parseIf();break;case"else":this.advanceAfterBlockEnd(),s.else_=this.parseUntilBlocks("endif"),this.advanceAfterBlockEnd();break;case"endif":s.else_=null,this.advanceAfterBlockEnd();break;default:this.fail("parseIf: expected elif, else, or endif, got end of file")}return s},r.parseSet=function(){var n=this.peekToken();this.skipSymbol("set")||this.fail("parseSet: expected set",n.lineno,n.colno);for(var s=new D.Set(n.lineno,n.colno,[]),a;(a=this.parsePrimary())&&(s.targets.push(a),!!this.skip(H.TOKEN_COMMA)););return this.skipValue(H.TOKEN_OPERATOR,"=")?(s.value=this.parseExpression(),this.advanceAfterBlockEnd(n.value)):this.skip(H.TOKEN_BLOCK_END)?(s.body=new D.Capture(n.lineno,n.colno,this.parseUntilBlocks("endset")),s.value=null,this.advanceAfterBlockEnd()):this.fail("parseSet: expected = or block end in set tag",n.lineno,n.colno),s},r.parseSwitch=function(){var n="switch",s="endswitch",a="case",l="default",c=this.peekToken();!this.skipSymbol(n)&&!this.skipSymbol(a)&&!this.skipSymbol(l)&&this.fail('parseSwitch: expected "switch," "case" or "default"',c.lineno,c.colno);var h=this.parseExpression();this.advanceAfterBlockEnd(n),this.parseUntilBlocks(a,l,s);var d=this.peekToken(),p=[],m;do{this.skipSymbol(a);var _=this.parseExpression();this.advanceAfterBlockEnd(n);var y=this.parseUntilBlocks(a,l,s);p.push(new D.Case(d.line,d.col,_,y)),d=this.peekToken()}while(d&&d.value===a);switch(d.value){case l:this.advanceAfterBlockEnd(),m=this.parseUntilBlocks(s),this.advanceAfterBlockEnd();break;case s:this.advanceAfterBlockEnd();break;default:this.fail('parseSwitch: expected "case," "default" or "endswitch," got EOF.')}return new D.Switch(c.lineno,c.colno,h,p,m)},r.parseStatement=function(){var n=this.peekToken(),s;if(n.type!==H.TOKEN_SYMBOL&&this.fail("tag name expected",n.lineno,n.colno),this.breakOnBlocks&&za.indexOf(this.breakOnBlocks,n.value)!==-1)return null;switch(n.value){case"raw":return this.parseRaw();case"verbatim":return this.parseRaw("verbatim");case"if":case"ifAsync":return this.parseIf();case"for":case"asyncEach":case"asyncAll":return this.parseFor();case"block":return this.parseBlock();case"extends":return this.parseExtends();case"include":return this.parseInclude();case"set":return this.parseSet();case"macro":return this.parseMacro();case"call":return this.parseCall();case"import":return this.parseImport();case"from":return this.parseFrom();case"filter":return this.parseFilterStatement();case"switch":return this.parseSwitch();default:if(this.extensions.length)for(var a=0;a<this.extensions.length;a++){var l=this.extensions[a];if(za.indexOf(l.tags||[],n.value)!==-1)return l.parse(this,D,H)}this.fail("unknown block tag: "+n.value,n.lineno,n.colno)}return s},r.parseRaw=function(n){n=n||"raw";for(var s="end"+n,a=new RegExp("([\\s\\S]*?){%\\s*("+n+"|"+s+")\\s*(?=%})%}"),l=1,c="",h=null,d=this.advanceAfterBlockEnd();(h=this.tokens._extractRegex(a))&&l>0;){var p=h[0],m=h[1],_=h[2];_===n?l+=1:_===s&&(l-=1),l===0?(c+=m,this.tokens.backN(p.length-m.length)):c+=p}return new D.Output(d.lineno,d.colno,[new D.TemplateData(d.lineno,d.colno,c)])},r.parsePostfix=function(n){for(var s,a=this.peekToken();a;){if(a.type===H.TOKEN_LEFT_PAREN)n=new D.FunCall(a.lineno,a.colno,n,this.parseSignature());else if(a.type===H.TOKEN_LEFT_BRACKET)s=this.parseAggregate(),s.children.length>1&&this.fail("invalid index"),n=new D.LookupVal(a.lineno,a.colno,n,s.children[0]);else if(a.type===H.TOKEN_OPERATOR&&a.value==="."){this.nextToken();var l=this.nextToken();l.type!==H.TOKEN_SYMBOL&&this.fail("expected name as lookup value, got "+l.value,l.lineno,l.colno),s=new D.Literal(l.lineno,l.colno,l.value),n=new D.LookupVal(a.lineno,a.colno,n,s)}else break;a=this.peekToken()}return n},r.parseExpression=function(){var n=this.parseInlineIf();return n},r.parseInlineIf=function(){var n=this.parseOr();if(this.skipSymbol("if")){var s=this.parseOr(),a=n;n=new D.InlineIf(n.lineno,n.colno),n.body=a,n.cond=s,this.skipSymbol("else")?n.else_=this.parseOr():n.else_=null}return n},r.parseOr=function(){for(var n=this.parseAnd();this.skipSymbol("or");){var s=this.parseAnd();n=new D.Or(n.lineno,n.colno,n,s)}return n},r.parseAnd=function(){for(var n=this.parseNot();this.skipSymbol("and");){var s=this.parseNot();n=new D.And(n.lineno,n.colno,n,s)}return n},r.parseNot=function(){var n=this.peekToken();return this.skipSymbol("not")?new D.Not(n.lineno,n.colno,this.parseNot()):this.parseIn()},r.parseIn=function(){for(var n=this.parseIs();;){var s=this.nextToken();if(!s)break;var a=s.type===H.TOKEN_SYMBOL&&s.value==="not";if(a||this.pushToken(s),this.skipSymbol("in")){var l=this.parseIs();n=new D.In(n.lineno,n.colno,n,l),a&&(n=new D.Not(n.lineno,n.colno,n))}else{a&&this.pushToken(s);break}}return n},r.parseIs=function(){var n=this.parseCompare();if(this.skipSymbol("is")){var s=this.skipSymbol("not"),a=this.parseCompare();n=new D.Is(n.lineno,n.colno,n,a),s&&(n=new D.Not(n.lineno,n.colno,n))}return n},r.parseCompare=function(){for(var n=["==","===","!=","!==","<",">","<=",">="],s=this.parseConcat(),a=[];;){var l=this.nextToken();if(l)if(n.indexOf(l.value)!==-1)a.push(new D.CompareOperand(l.lineno,l.colno,this.parseConcat(),l.value));else{this.pushToken(l);break}else break}return a.length?new D.Compare(a[0].lineno,a[0].colno,s,a):s},r.parseConcat=function(){for(var n=this.parseAdd();this.skipValue(H.TOKEN_TILDE,"~");){var s=this.parseAdd();n=new D.Concat(n.lineno,n.colno,n,s)}return n},r.parseAdd=function(){for(var n=this.parseSub();this.skipValue(H.TOKEN_OPERATOR,"+");){var s=this.parseSub();n=new D.Add(n.lineno,n.colno,n,s)}return n},r.parseSub=function(){for(var n=this.parseMul();this.skipValue(H.TOKEN_OPERATOR,"-");){var s=this.parseMul();n=new D.Sub(n.lineno,n.colno,n,s)}return n},r.parseMul=function(){for(var n=this.parseDiv();this.skipValue(H.TOKEN_OPERATOR,"*");){var s=this.parseDiv();n=new D.Mul(n.lineno,n.colno,n,s)}return n},r.parseDiv=function(){for(var n=this.parseFloorDiv();this.skipValue(H.TOKEN_OPERATOR,"/");){var s=this.parseFloorDiv();n=new D.Div(n.lineno,n.colno,n,s)}return n},r.parseFloorDiv=function(){for(var n=this.parseMod();this.skipValue(H.TOKEN_OPERATOR,"//");){var s=this.parseMod();n=new D.FloorDiv(n.lineno,n.colno,n,s)}return n},r.parseMod=function(){for(var n=this.parsePow();this.skipValue(H.TOKEN_OPERATOR,"%");){var s=this.parsePow();n=new D.Mod(n.lineno,n.colno,n,s)}return n},r.parsePow=function(){for(var n=this.parseUnary();this.skipValue(H.TOKEN_OPERATOR,"**");){var s=this.parseUnary();n=new D.Pow(n.lineno,n.colno,n,s)}return n},r.parseUnary=function(n){var s=this.peekToken(),a;return this.skipValue(H.TOKEN_OPERATOR,"-")?a=new D.Neg(s.lineno,s.colno,this.parseUnary(!0)):this.skipValue(H.TOKEN_OPERATOR,"+")?a=new D.Pos(s.lineno,s.colno,this.parseUnary(!0)):a=this.parsePrimary(),n||(a=this.parseFilter(a)),a},r.parsePrimary=function(n){var s=this.nextToken(),a,l=null;if(s?s.type===H.TOKEN_STRING?a=s.value:s.type===H.TOKEN_INT?a=parseInt(s.value,10):s.type===H.TOKEN_FLOAT?a=parseFloat(s.value):s.type===H.TOKEN_BOOLEAN?s.value==="true"?a=!0:s.value==="false"?a=!1:this.fail("invalid boolean: "+s.value,s.lineno,s.colno):s.type===H.TOKEN_NONE?a=null:s.type===H.TOKEN_REGEX&&(a=new RegExp(s.value.body,s.value.flags)):this.fail("expected expression, got end of file"),a!==void 0?l=new D.Literal(s.lineno,s.colno,a):s.type===H.TOKEN_SYMBOL?l=new D.Symbol(s.lineno,s.colno,s.value):(this.pushToken(s),l=this.parseAggregate()),n||(l=this.parsePostfix(l)),l)return l;throw this.error("unexpected token: "+s.value,s.lineno,s.colno)},r.parseFilterName=function(){for(var n=this.expect(H.TOKEN_SYMBOL),s=n.value;this.skipValue(H.TOKEN_OPERATOR,".");)s+="."+this.expect(H.TOKEN_SYMBOL).value;return new D.Symbol(n.lineno,n.colno,s)},r.parseFilterArgs=function(n){if(this.peekToken().type===H.TOKEN_LEFT_PAREN){var s=this.parsePostfix(n);return s.args.children}return[]},r.parseFilter=function(n){for(;this.skip(H.TOKEN_PIPE);){var s=this.parseFilterName();n=new D.Filter(s.lineno,s.colno,s,new D.NodeList(s.lineno,s.colno,[n].concat(this.parseFilterArgs(n))))}return n},r.parseFilterStatement=function(){var n=this.peekToken();this.skipSymbol("filter")||this.fail("parseFilterStatement: expected filter");var s=this.parseFilterName(),a=this.parseFilterArgs(s);this.advanceAfterBlockEnd(n.value);var l=new D.Capture(s.lineno,s.colno,this.parseUntilBlocks("endfilter"));this.advanceAfterBlockEnd();var c=new D.Filter(s.lineno,s.colno,s,new D.NodeList(s.lineno,s.colno,[l].concat(a)));return new D.Output(s.lineno,s.colno,[c])},r.parseAggregate=function(){var n=this.nextToken(),s;switch(n.type){case H.TOKEN_LEFT_PAREN:s=new D.Group(n.lineno,n.colno);break;case H.TOKEN_LEFT_BRACKET:s=new D.Array(n.lineno,n.colno);break;case H.TOKEN_LEFT_CURLY:s=new D.Dict(n.lineno,n.colno);break;default:return null}for(;;){var a=this.peekToken().type;if(a===H.TOKEN_RIGHT_PAREN||a===H.TOKEN_RIGHT_BRACKET||a===H.TOKEN_RIGHT_CURLY){this.nextToken();break}if(s.children.length>0&&(this.skip(H.TOKEN_COMMA)||this.fail("parseAggregate: expected comma after expression",n.lineno,n.colno)),s instanceof D.Dict){var l=this.parsePrimary();this.skip(H.TOKEN_COLON)||this.fail("parseAggregate: expected colon after dict key",n.lineno,n.colno);var c=this.parseExpression();s.addChild(new D.Pair(l.lineno,l.colno,l,c))}else{var h=this.parseExpression();s.addChild(h)}}return s},r.parseSignature=function(n,s){var a=this.peekToken();if(!s&&a.type!==H.TOKEN_LEFT_PAREN){if(n)return null;this.fail("expected arguments",a.lineno,a.colno)}a.type===H.TOKEN_LEFT_PAREN&&(a=this.nextToken());for(var l=new D.NodeList(a.lineno,a.colno),c=new D.KeywordArgs(a.lineno,a.colno),h=!1;;){if(a=this.peekToken(),!s&&a.type===H.TOKEN_RIGHT_PAREN){this.nextToken();break}else if(s&&a.type===H.TOKEN_BLOCK_END)break;if(h&&!this.skip(H.TOKEN_COMMA))this.fail("parseSignature: expected comma after expression",a.lineno,a.colno);else{var d=this.parseExpression();this.skipValue(H.TOKEN_OPERATOR,"=")?c.addChild(new D.Pair(d.lineno,d.colno,d,this.parseExpression())):l.addChild(d)}h=!0}return c.children.length&&l.addChild(c),l},r.parseUntilBlocks=function(){for(var n=this.breakOnBlocks,s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];this.breakOnBlocks=a;var c=this.parse();return this.breakOnBlocks=n,c},r.parseNodes=function(){for(var n,s=[];n=this.nextToken();)if(n.type===H.TOKEN_DATA){var a=n.value,l=this.peekToken(),c=l&&l.value;this.dropLeadingWhitespace&&(a=a.replace(/^\s*/,""),this.dropLeadingWhitespace=!1),l&&(l.type===H.TOKEN_BLOCK_START&&c.charAt(c.length-1)==="-"||l.type===H.TOKEN_VARIABLE_START&&c.charAt(this.tokens.tags.VARIABLE_START.length)==="-"||l.type===H.TOKEN_COMMENT&&c.charAt(this.tokens.tags.COMMENT_START.length)==="-")&&(a=a.replace(/\s*$/,"")),s.push(new D.Output(n.lineno,n.colno,[new D.TemplateData(n.lineno,n.colno,a)]))}else if(n.type===H.TOKEN_BLOCK_START){this.dropLeadingWhitespace=!1;var h=this.parseStatement();if(!h)break;s.push(h)}else if(n.type===H.TOKEN_VARIABLE_START){var d=this.parseExpression();this.dropLeadingWhitespace=!1,this.advanceAfterVariableEnd(),s.push(new D.Output(n.lineno,n.colno,[d]))}else n.type===H.TOKEN_COMMENT?this.dropLeadingWhitespace=n.value.charAt(n.value.length-this.tokens.tags.COMMENT_END.length-1)==="-":this.fail("Unexpected token at top-level: "+n.type,n.lineno,n.colno);return s},r.parse=function(){return new D.NodeList(0,0,this.parseNodes())},r.parseAsRoot=function(){return new D.Root(0,0,this.parseNodes())},t}(IR);$p.exports={parse:function(t,r,i){var n=new qp(H.lex(t,i));return r!==void 0&&(n.extensions=r),n.parseAsRoot()},Parser:qp}});var jp=W((LP,Hp)=>{"use strict";var ue=Hn(),FR=At(),NR=0;function Wp(){return"hole_"+NR++}function Va(e,t){for(var r=null,i=0;i<e.length;i++){var n=t(e[i]);n!==e[i]&&(r||(r=e.slice()),r[i]=n)}return r||e}function pr(e,t,r){if(!(e instanceof ue.Node))return e;if(!r){var i=t(e);if(i&&i!==e)return i}if(e instanceof ue.NodeList){var n=Va(e.children,function(h){return pr(h,t,r)});n!==e.children&&(e=new ue[e.typename](e.lineno,e.colno,n))}else if(e instanceof ue.CallExtension){var s=pr(e.args,t,r),a=Va(e.contentArgs,function(h){return pr(h,t,r)});(s!==e.args||a!==e.contentArgs)&&(e=new ue[e.typename](e.extName,e.prop,s,a))}else{var l=e.fields.map(function(h){return e[h]}),c=Va(l,function(h){return pr(h,t,r)});c!==l&&(e=new ue[e.typename](e.lineno,e.colno),c.forEach(function(h,d){e[e.fields[d]]=h}))}return r&&t(e)||e}function Ya(e,t){return pr(e,t,!0)}function jn(e,t,r){var i=[],n=Ya(r?e[r]:e,function(s){var a;return s instanceof ue.Block?s:((s instanceof ue.Filter&&FR.indexOf(t,s.name.value)!==-1||s instanceof ue.CallExtensionAsync)&&(a=new ue.Symbol(s.lineno,s.colno,Wp()),i.push(new ue.FilterAsync(s.lineno,s.colno,s.name,s.args,a))),a)});return r?e[r]=n:e=n,i.length?(i.push(e),new ue.NodeList(e.lineno,e.colno,i)):e}function BR(e,t){return Ya(e,function(r){return r instanceof ue.Output?jn(r,t):r instanceof ue.Set?jn(r,t,"value"):r instanceof ue.For?jn(r,t,"arr"):r instanceof ue.If?jn(r,t,"cond"):r instanceof ue.CallExtension?jn(r,t,"args"):void 0})}function DR(e){return pr(e,function(t){if(t instanceof ue.Block){var r=!1,i=Wp();t.body=pr(t.body,function(n){if(n instanceof ue.FunCall&&n.name.value==="super")return r=!0,new ue.Symbol(n.lineno,n.colno,i)}),r&&t.body.children.unshift(new ue.Super(0,0,t.name,new ue.Symbol(0,0,i)))}})}function MR(e){return Ya(e,function(t){if(!(!(t instanceof ue.If)&&!(t instanceof ue.For))){var r=!1;if(pr(t,function(i){if(i instanceof ue.FilterAsync||i instanceof ue.IfAsync||i instanceof ue.AsyncEach||i instanceof ue.AsyncAll||i instanceof ue.CallExtensionAsync)return r=!0,i}),r){if(t instanceof ue.If)return new ue.IfAsync(t.lineno,t.colno,t.cond,t.body,t.else_);if(t instanceof ue.For&&!(t instanceof ue.AsyncAll))return new ue.AsyncEach(t.lineno,t.colno,t.arr,t.name,t.body,t.else_)}}})}function qR(e,t){return MR(DR(BR(e,t)))}function $R(e,t){return qR(e,t||[])}Hp.exports={transform:$R}});var un=W((IP,Gp)=>{"use strict";var vt=At(),Up=Array.from,WR=typeof Symbol=="function"&&Symbol.iterator&&typeof Up=="function",HR=function(){function e(r,i){this.variables=Object.create(null),this.parent=r,this.topLevel=!1,this.isolateWrites=i}var t=e.prototype;return t.set=function(i,n,s){var a=i.split("."),l=this.variables,c=this;if(s&&(c=this.resolve(a[0],!0))){c.set(i,n);return}for(var h=0;h<a.length-1;h++){var d=a[h];l[d]||(l[d]={}),l=l[d]}l[a[a.length-1]]=n},t.get=function(i){var n=this.variables[i];return n!==void 0?n:null},t.lookup=function(i){var n=this.parent,s=this.variables[i];return s!==void 0?s:n&&n.lookup(i)},t.resolve=function(i,n){var s=n&&this.isolateWrites?void 0:this.parent,a=this.variables[i];return a!==void 0?this:s&&s.resolve(i)},t.push=function(i){return new e(this,i)},t.pop=function(){return this.parent},e}();function jR(e,t,r){return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];var l=Kp(s),c,h=zR(s);if(l>e.length)c=s.slice(0,e.length),s.slice(c.length,l).forEach(function(m,_){_<t.length&&(h[t[_]]=m)}),c.push(h);else if(l<e.length){c=s.slice(0,l);for(var d=l;d<e.length;d++){var p=e[d];c.push(h[p]),delete h[p]}c.push(h)}else c=s;return r.apply(this,c)}}function UR(e){return e.__keywords=!0,e}function zp(e){return e&&Object.prototype.hasOwnProperty.call(e,"__keywords")}function zR(e){var t=e.length;if(t){var r=e[t-1];if(zp(r))return r}return{}}function Kp(e){var t=e.length;if(t===0)return 0;var r=e[t-1];return zp(r)?t-1:t}function Yt(e){if(typeof e!="string")return e;this.val=e,this.length=e.length}Yt.prototype=Object.create(String.prototype,{length:{writable:!0,configurable:!0,value:0}});Yt.prototype.valueOf=function(){return this.val};Yt.prototype.toString=function(){return this.val};function KR(e,t){return e instanceof Yt?new Yt(t):t.toString()}function GR(e){var t=typeof e;return t==="string"?new Yt(e):t!=="function"?e:function(i){var n=e.apply(this,arguments);return typeof n=="string"?new Yt(n):n}}function VR(e,t){return e=e??"",t&&!(e instanceof Yt)&&(e=vt.escape(e.toString())),e}function YR(e,t,r){if(e==null)throw new vt.TemplateError("attempted to output null or undefined value",t+1,r+1);return e}function QR(e,t){if(e!=null)return typeof e[t]=="function"?function(){for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return e[t].apply(e,i)}:e[t]}function XR(e,t,r,i){if(e){if(typeof e!="function")throw new Error("Unable to call `"+t+"`, which is not a function")}else throw new Error("Unable to call `"+t+"`, which is undefined or falsey");return e.apply(r,i)}function ZR(e,t,r){var i=t.lookup(r);return i!==void 0?i:e.lookup(r)}function JR(e,t,r){return e.lineno?e:new vt.TemplateError(e,t,r)}function eA(e,t,r,i){if(vt.isArray(e)){var n=e.length;vt.asyncIter(e,function(a,l,c){switch(t){case 1:r(a,l,n,c);break;case 2:r(a[0],a[1],l,n,c);break;case 3:r(a[0],a[1],a[2],l,n,c);break;default:a.push(l,n,c),r.apply(this,a)}},i)}else vt.asyncFor(e,function(a,l,c,h,d){r(a,l,c,h,d)},i)}function tA(e,t,r,i){var n=0,s,a;function l(_,y){n++,a[_]=y,n===s&&i(null,a.join(""))}if(vt.isArray(e))if(s=e.length,a=new Array(s),s===0)i(null,"");else for(var c=0;c<e.length;c++){var h=e[c];switch(t){case 1:r(h,c,s,l);break;case 2:r(h[0],h[1],c,s,l);break;case 3:r(h[0],h[1],h[2],c,s,l);break;default:h.push(c,s,l),r.apply(this,h)}}else{var d=vt.keys(e||{});if(s=d.length,a=new Array(s),s===0)i(null,"");else for(var p=0;p<d.length;p++){var m=d[p];r(m,e[m],p,s,l)}}}function rA(e){return typeof e!="object"||e===null||vt.isArray(e)?e:WR&&Symbol.iterator in e?Up(e):e}Gp.exports={Frame:HR,makeMacro:jR,makeKeywordArgs:UR,numArgs:Kp,suppressValue:VR,ensureDefined:YR,memberLookup:QR,contextOrFrameLookup:ZR,callWrap:XR,handleError:JR,isArray:vt.isArray,keys:vt.keys,SafeString:Yt,copySafeness:KR,markSafe:GR,asyncEach:eA,asyncAll:tA,inOperator:vt.inOperator,fromIterator:rA}});var ys=W((FP,Yp)=>{"use strict";function nA(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Xa(e,t)}function Xa(e,t){return Xa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Xa(e,t)}var iA=Ga(),sA=jp(),ee=Hn(),oA=At(),aA=oA.TemplateError,uA=un(),Qa=uA.Frame,lA=on(),cA=lA.Obj,fA={"==":"==","===":"===","!=":"!=","!==":"!==","<":"<",">":">","<=":"<=",">=":">="},Vp=function(e){nA(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.init=function(n,s){this.templateName=n,this.codebuf=[],this.lastId=0,this.buffer=null,this.bufferStack=[],this._scopeClosers="",this.inBlock=!1,this.throwOnUndefined=s},r.fail=function(n,s,a){throw s!==void 0&&(s+=1),a!==void 0&&(a+=1),new aA(n,s,a)},r._pushBuffer=function(){var n=this._tmpid();return this.bufferStack.push(this.buffer),this.buffer=n,this._emit("var "+this.buffer+' = "";'),n},r._popBuffer=function(){this.buffer=this.bufferStack.pop()},r._emit=function(n){this.codebuf.push(n)},r._emitLine=function(n){this._emit(n+`
`)},r._emitLines=function(){for(var n=this,s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];a.forEach(function(c){return n._emitLine(c)})},r._emitFuncBegin=function(n,s){this.buffer="output",this._scopeClosers="",this._emitLine("function "+s+"(env, context, frame, runtime, cb) {"),this._emitLine("var lineno = "+n.lineno+";"),this._emitLine("var colno = "+n.colno+";"),this._emitLine("var "+this.buffer+' = "";'),this._emitLine("try {")},r._emitFuncEnd=function(n){n||this._emitLine("cb(null, "+this.buffer+");"),this._closeScopeLevels(),this._emitLine("} catch (e) {"),this._emitLine("  cb(runtime.handleError(e, lineno, colno));"),this._emitLine("}"),this._emitLine("}"),this.buffer=null},r._addScopeLevel=function(){this._scopeClosers+="})"},r._closeScopeLevels=function(){this._emitLine(this._scopeClosers+";"),this._scopeClosers=""},r._withScopedSyntax=function(n){var s=this._scopeClosers;this._scopeClosers="",n.call(this),this._closeScopeLevels(),this._scopeClosers=s},r._makeCallback=function(n){var s=this._tmpid();return"function("+s+(n?","+n:"")+`) {
if(`+s+") { cb("+s+"); return; }"},r._tmpid=function(){return this.lastId++,"t_"+this.lastId},r._templateName=function(){return this.templateName==null?"undefined":JSON.stringify(this.templateName)},r._compileChildren=function(n,s){var a=this;n.children.forEach(function(l){a.compile(l,s)})},r._compileAggregate=function(n,s,a,l){var c=this;a&&this._emit(a),n.children.forEach(function(h,d){d>0&&c._emit(","),c.compile(h,s)}),l&&this._emit(l)},r._compileExpression=function(n,s){this.assertType(n,ee.Literal,ee.Symbol,ee.Group,ee.Array,ee.Dict,ee.FunCall,ee.Caller,ee.Filter,ee.LookupVal,ee.Compare,ee.InlineIf,ee.In,ee.Is,ee.And,ee.Or,ee.Not,ee.Add,ee.Concat,ee.Sub,ee.Mul,ee.Div,ee.FloorDiv,ee.Mod,ee.Pow,ee.Neg,ee.Pos,ee.Compare,ee.NodeList),this.compile(n,s)},r.assertType=function(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];a.some(function(c){return n instanceof c})||this.fail("assertType: invalid type: "+n.typename,n.lineno,n.colno)},r.compileCallExtension=function(n,s,a){var l=this,c=n.args,h=n.contentArgs,d=typeof n.autoescape=="boolean"?n.autoescape:!0;if(a||this._emit(this.buffer+" += runtime.suppressValue("),this._emit('env.getExtension("'+n.extName+'")["'+n.prop+'"]('),this._emit("context"),(c||h)&&this._emit(","),c&&(c instanceof ee.NodeList||this.fail("compileCallExtension: arguments must be a NodeList, use `parser.parseSignature`"),c.children.forEach(function(m,_){l._compileExpression(m,s),(_!==c.children.length-1||h.length)&&l._emit(",")})),h.length&&h.forEach(function(m,_){if(_>0&&l._emit(","),m){l._emitLine("function(cb) {"),l._emitLine("if(!cb) { cb = function(err) { if(err) { throw err; }}}");var y=l._pushBuffer();l._withScopedSyntax(function(){l.compile(m,s),l._emitLine("cb(null, "+y+");")}),l._popBuffer(),l._emitLine("return "+y+";"),l._emitLine("}")}else l._emit("null")}),a){var p=this._tmpid();this._emitLine(", "+this._makeCallback(p)),this._emitLine(this.buffer+" += runtime.suppressValue("+p+", "+d+" && env.opts.autoescape);"),this._addScopeLevel()}else this._emit(")"),this._emit(", "+d+` && env.opts.autoescape);
`)},r.compileCallExtensionAsync=function(n,s){this.compileCallExtension(n,s,!0)},r.compileNodeList=function(n,s){this._compileChildren(n,s)},r.compileLiteral=function(n){if(typeof n.value=="string"){var s=n.value.replace(/\\/g,"\\\\");s=s.replace(/"/g,'\\"'),s=s.replace(/\n/g,"\\n"),s=s.replace(/\r/g,"\\r"),s=s.replace(/\t/g,"\\t"),s=s.replace(/\u2028/g,"\\u2028"),this._emit('"'+s+'"')}else n.value===null?this._emit("null"):this._emit(n.value.toString())},r.compileSymbol=function(n,s){var a=n.value,l=s.lookup(a);l?this._emit(l):this._emit('runtime.contextOrFrameLookup(context, frame, "'+a+'")')},r.compileGroup=function(n,s){this._compileAggregate(n,s,"(",")")},r.compileArray=function(n,s){this._compileAggregate(n,s,"[","]")},r.compileDict=function(n,s){this._compileAggregate(n,s,"{","}")},r.compilePair=function(n,s){var a=n.key,l=n.value;a instanceof ee.Symbol?a=new ee.Literal(a.lineno,a.colno,a.value):a instanceof ee.Literal&&typeof a.value=="string"||this.fail("compilePair: Dict keys must be strings or names",a.lineno,a.colno),this.compile(a,s),this._emit(": "),this._compileExpression(l,s)},r.compileInlineIf=function(n,s){this._emit("("),this.compile(n.cond,s),this._emit("?"),this.compile(n.body,s),this._emit(":"),n.else_!==null?this.compile(n.else_,s):this._emit('""'),this._emit(")")},r.compileIn=function(n,s){this._emit("runtime.inOperator("),this.compile(n.left,s),this._emit(","),this.compile(n.right,s),this._emit(")")},r.compileIs=function(n,s){var a=n.right.name?n.right.name.value:n.right.value;this._emit('env.getTest("'+a+'").call(context, '),this.compile(n.left,s),n.right.args&&(this._emit(","),this.compile(n.right.args,s)),this._emit(") === true")},r._binOpEmitter=function(n,s,a){this.compile(n.left,s),this._emit(a),this.compile(n.right,s)},r.compileOr=function(n,s){return this._binOpEmitter(n,s," || ")},r.compileAnd=function(n,s){return this._binOpEmitter(n,s," && ")},r.compileAdd=function(n,s){return this._binOpEmitter(n,s," + ")},r.compileConcat=function(n,s){return this._binOpEmitter(n,s,' + "" + ')},r.compileSub=function(n,s){return this._binOpEmitter(n,s," - ")},r.compileMul=function(n,s){return this._binOpEmitter(n,s," * ")},r.compileDiv=function(n,s){return this._binOpEmitter(n,s," / ")},r.compileMod=function(n,s){return this._binOpEmitter(n,s," % ")},r.compileNot=function(n,s){this._emit("!"),this.compile(n.target,s)},r.compileFloorDiv=function(n,s){this._emit("Math.floor("),this.compile(n.left,s),this._emit(" / "),this.compile(n.right,s),this._emit(")")},r.compilePow=function(n,s){this._emit("Math.pow("),this.compile(n.left,s),this._emit(", "),this.compile(n.right,s),this._emit(")")},r.compileNeg=function(n,s){this._emit("-"),this.compile(n.target,s)},r.compilePos=function(n,s){this._emit("+"),this.compile(n.target,s)},r.compileCompare=function(n,s){var a=this;this.compile(n.expr,s),n.ops.forEach(function(l){a._emit(" "+fA[l.type]+" "),a.compile(l.expr,s)})},r.compileLookupVal=function(n,s){this._emit("runtime.memberLookup(("),this._compileExpression(n.target,s),this._emit("),"),this._compileExpression(n.val,s),this._emit(")")},r._getNodeName=function(n){switch(n.typename){case"Symbol":return n.value;case"FunCall":return"the return value of ("+this._getNodeName(n.name)+")";case"LookupVal":return this._getNodeName(n.target)+'["'+this._getNodeName(n.val)+'"]';case"Literal":return n.value.toString();default:return"--expression--"}},r.compileFunCall=function(n,s){this._emit("(lineno = "+n.lineno+", colno = "+n.colno+", "),this._emit("runtime.callWrap("),this._compileExpression(n.name,s),this._emit(', "'+this._getNodeName(n.name).replace(/"/g,'\\"')+'", context, '),this._compileAggregate(n.args,s,"[","])"),this._emit(")")},r.compileFilter=function(n,s){var a=n.name;this.assertType(a,ee.Symbol),this._emit('env.getFilter("'+a.value+'").call(context, '),this._compileAggregate(n.args,s),this._emit(")")},r.compileFilterAsync=function(n,s){var a=n.name,l=n.symbol.value;this.assertType(a,ee.Symbol),s.set(l,l),this._emit('env.getFilter("'+a.value+'").call(context, '),this._compileAggregate(n.args,s),this._emitLine(", "+this._makeCallback(l)),this._addScopeLevel()},r.compileKeywordArgs=function(n,s){this._emit("runtime.makeKeywordArgs("),this.compileDict(n,s),this._emit(")")},r.compileSet=function(n,s){var a=this,l=[];n.targets.forEach(function(c){var h=c.value,d=s.lookup(h);d==null&&(d=a._tmpid(),a._emitLine("var "+d+";")),l.push(d)}),n.value?(this._emit(l.join(" = ")+" = "),this._compileExpression(n.value,s),this._emitLine(";")):(this._emit(l.join(" = ")+" = "),this.compile(n.body,s),this._emitLine(";")),n.targets.forEach(function(c,h){var d=l[h],p=c.value;a._emitLine('frame.set("'+p+'", '+d+", true);"),a._emitLine("if(frame.topLevel) {"),a._emitLine('context.setVariable("'+p+'", '+d+");"),a._emitLine("}"),p.charAt(0)!=="_"&&(a._emitLine("if(frame.topLevel) {"),a._emitLine('context.addExport("'+p+'", '+d+");"),a._emitLine("}"))})},r.compileSwitch=function(n,s){var a=this;this._emit("switch ("),this.compile(n.expr,s),this._emit(") {"),n.cases.forEach(function(l,c){a._emit("case "),a.compile(l.cond,s),a._emit(": "),a.compile(l.body,s),l.body.children.length&&a._emitLine("break;")}),n.default&&(this._emit("default:"),this.compile(n.default,s)),this._emit("}")},r.compileIf=function(n,s,a){var l=this;this._emit("if("),this._compileExpression(n.cond,s),this._emitLine(") {"),this._withScopedSyntax(function(){l.compile(n.body,s),a&&l._emit("cb()")}),n.else_?(this._emitLine(`}
else {`),this._withScopedSyntax(function(){l.compile(n.else_,s),a&&l._emit("cb()")})):a&&(this._emitLine(`}
else {`),this._emit("cb()")),this._emitLine("}")},r.compileIfAsync=function(n,s){this._emit("(function(cb) {"),this.compileIf(n,s,!0),this._emit("})("+this._makeCallback()),this._addScopeLevel()},r._emitLoopBindings=function(n,s,a,l){var c=this,h=[{name:"index",val:a+" + 1"},{name:"index0",val:a},{name:"revindex",val:l+" - "+a},{name:"revindex0",val:l+" - "+a+" - 1"},{name:"first",val:a+" === 0"},{name:"last",val:a+" === "+l+" - 1"},{name:"length",val:l}];h.forEach(function(d){c._emitLine('frame.set("loop.'+d.name+'", '+d.val+");")})},r.compileFor=function(n,s){var a=this,l=this._tmpid(),c=this._tmpid(),h=this._tmpid();if(s=s.push(),this._emitLine("frame = frame.push();"),this._emit("var "+h+" = "),this._compileExpression(n.arr,s),this._emitLine(";"),this._emit("if("+h+") {"),this._emitLine(h+" = runtime.fromIterator("+h+");"),n.name instanceof ee.Array){this._emitLine("var "+l+";"),this._emitLine("if(runtime.isArray("+h+")) {"),this._emitLine("var "+c+" = "+h+".length;"),this._emitLine("for("+l+"=0; "+l+" < "+h+".length; "+l+"++) {"),n.name.children.forEach(function(E,S){var R=a._tmpid();a._emitLine("var "+R+" = "+h+"["+l+"]["+S+"];"),a._emitLine('frame.set("'+E+'", '+h+"["+l+"]["+S+"]);"),s.set(n.name.children[S].value,R)}),this._emitLoopBindings(n,h,l,c),this._withScopedSyntax(function(){a.compile(n.body,s)}),this._emitLine("}"),this._emitLine("} else {");var d=n.name.children,p=d[0],m=d[1],_=this._tmpid(),y=this._tmpid();s.set(p.value,_),s.set(m.value,y),this._emitLine(l+" = -1;"),this._emitLine("var "+c+" = runtime.keys("+h+").length;"),this._emitLine("for(var "+_+" in "+h+") {"),this._emitLine(l+"++;"),this._emitLine("var "+y+" = "+h+"["+_+"];"),this._emitLine('frame.set("'+p.value+'", '+_+");"),this._emitLine('frame.set("'+m.value+'", '+y+");"),this._emitLoopBindings(n,h,l,c),this._withScopedSyntax(function(){a.compile(n.body,s)}),this._emitLine("}"),this._emitLine("}")}else{var v=this._tmpid();s.set(n.name.value,v),this._emitLine("var "+c+" = "+h+".length;"),this._emitLine("for(var "+l+"=0; "+l+" < "+h+".length; "+l+"++) {"),this._emitLine("var "+v+" = "+h+"["+l+"];"),this._emitLine('frame.set("'+n.name.value+'", '+v+");"),this._emitLoopBindings(n,h,l,c),this._withScopedSyntax(function(){a.compile(n.body,s)}),this._emitLine("}")}this._emitLine("}"),n.else_&&(this._emitLine("if (!"+c+") {"),this.compile(n.else_,s),this._emitLine("}")),this._emitLine("frame = frame.pop();")},r._compileAsyncLoop=function(n,s,a){var l=this,c=this._tmpid(),h=this._tmpid(),d=this._tmpid(),p=a?"asyncAll":"asyncEach";if(s=s.push(),this._emitLine("frame = frame.push();"),this._emit("var "+d+" = runtime.fromIterator("),this._compileExpression(n.arr,s),this._emitLine(");"),n.name instanceof ee.Array){var m=n.name.children.length;this._emit("runtime."+p+"("+d+", "+m+", function("),n.name.children.forEach(function(v){l._emit(v.value+",")}),this._emit(c+","+h+",next) {"),n.name.children.forEach(function(v){var E=v.value;s.set(E,E),l._emitLine('frame.set("'+E+'", '+E+");")})}else{var _=n.name.value;this._emitLine("runtime."+p+"("+d+", 1, function("+_+", "+c+", "+h+",next) {"),this._emitLine('frame.set("'+_+'", '+_+");"),s.set(_,_)}this._emitLoopBindings(n,d,c,h),this._withScopedSyntax(function(){var v;a&&(v=l._pushBuffer()),l.compile(n.body,s),l._emitLine("next("+c+(v?","+v:"")+");"),a&&l._popBuffer()});var y=this._tmpid();this._emitLine("}, "+this._makeCallback(y)),this._addScopeLevel(),a&&this._emitLine(this.buffer+" += "+y+";"),n.else_&&(this._emitLine("if (!"+d+".length) {"),this.compile(n.else_,s),this._emitLine("}")),this._emitLine("frame = frame.pop();")},r.compileAsyncEach=function(n,s){this._compileAsyncLoop(n,s)},r.compileAsyncAll=function(n,s){this._compileAsyncLoop(n,s,!0)},r._compileMacro=function(n,s){var a=this,l=[],c=null,h="macro_"+this._tmpid(),d=s!==void 0;n.args.children.forEach(function(E,S){S===n.args.children.length-1&&E instanceof ee.Dict?c=E:(a.assertType(E,ee.Symbol),l.push(E))});var p=[].concat(l.map(function(E){return"l_"+E.value}),["kwargs"]),m=l.map(function(E){return'"'+E.value+'"'}),_=(c&&c.children||[]).map(function(E){return'"'+E.key.value+'"'}),y;d?y=s.push(!0):y=new Qa,this._emitLines("var "+h+" = runtime.makeMacro(","["+m.join(", ")+"], ","["+_.join(", ")+"], ","function ("+p.join(", ")+") {","var callerFrame = frame;","frame = "+(d?"frame.push(true);":"new runtime.Frame();"),"kwargs = kwargs || {};",'if (Object.prototype.hasOwnProperty.call(kwargs, "caller")) {','frame.set("caller", kwargs.caller); }'),l.forEach(function(E){a._emitLine('frame.set("'+E.value+'", l_'+E.value+");"),y.set(E.value,"l_"+E.value)}),c&&c.children.forEach(function(E){var S=E.key.value;a._emit('frame.set("'+S+'", '),a._emit('Object.prototype.hasOwnProperty.call(kwargs, "'+S+'")'),a._emit(' ? kwargs["'+S+'"] : '),a._compileExpression(E.value,y),a._emit(");")});var v=this._pushBuffer();return this._withScopedSyntax(function(){a.compile(n.body,y)}),this._emitLine("frame = "+(d?"frame.pop();":"callerFrame;")),this._emitLine("return new runtime.SafeString("+v+");"),this._emitLine("});"),this._popBuffer(),h},r.compileMacro=function(n,s){var a=this._compileMacro(n),l=n.name.value;s.set(l,a),s.parent?this._emitLine('frame.set("'+l+'", '+a+");"):(n.name.value.charAt(0)!=="_"&&this._emitLine('context.addExport("'+l+'");'),this._emitLine('context.setVariable("'+l+'", '+a+");"))},r.compileCaller=function(n,s){this._emit("(function (){");var a=this._compileMacro(n,s);this._emit("return "+a+";})()")},r._compileGetTemplate=function(n,s,a,l){var c=this._tmpid(),h=this._templateName(),d=this._makeCallback(c),p=a?"true":"false",m=l?"true":"false";return this._emit("env.getTemplate("),this._compileExpression(n.template,s),this._emitLine(", "+p+", "+h+", "+m+", "+d),c},r.compileImport=function(n,s){var a=n.target.value,l=this._compileGetTemplate(n,s,!1,!1);this._addScopeLevel(),this._emitLine(l+".getExported("+(n.withContext?"context.getVariables(), frame, ":"")+this._makeCallback(l)),this._addScopeLevel(),s.set(a,l),s.parent?this._emitLine('frame.set("'+a+'", '+l+");"):this._emitLine('context.setVariable("'+a+'", '+l+");")},r.compileFromImport=function(n,s){var a=this,l=this._compileGetTemplate(n,s,!1,!1);this._addScopeLevel(),this._emitLine(l+".getExported("+(n.withContext?"context.getVariables(), frame, ":"")+this._makeCallback(l)),this._addScopeLevel(),n.names.children.forEach(function(c){var h,d,p=a._tmpid();c instanceof ee.Pair?(h=c.key.value,d=c.value.value):(h=c.value,d=h),a._emitLine("if(Object.prototype.hasOwnProperty.call("+l+', "'+h+'")) {'),a._emitLine("var "+p+" = "+l+"."+h+";"),a._emitLine("} else {"),a._emitLine(`cb(new Error("cannot import '`+h+`'")); return;`),a._emitLine("}"),s.set(d,p),s.parent?a._emitLine('frame.set("'+d+'", '+p+");"):a._emitLine('context.setVariable("'+d+'", '+p+");")})},r.compileBlock=function(n){var s=this._tmpid();this.inBlock||this._emit('(parentTemplate ? function(e, c, f, r, cb) { cb(""); } : '),this._emit('context.getBlock("'+n.name.value+'")'),this.inBlock||this._emit(")"),this._emitLine("(env, context, frame, runtime, "+this._makeCallback(s)),this._emitLine(this.buffer+" += "+s+";"),this._addScopeLevel()},r.compileSuper=function(n,s){var a=n.blockName.value,l=n.symbol.value,c=this._makeCallback(l);this._emitLine('context.getSuper(env, "'+a+'", b_'+a+", frame, runtime, "+c),this._emitLine(l+" = runtime.markSafe("+l+");"),this._addScopeLevel(),s.set(l,l)},r.compileExtends=function(n,s){var a=this._tmpid(),l=this._compileGetTemplate(n,s,!0,!1);this._emitLine("parentTemplate = "+l),this._emitLine("for(var "+a+" in parentTemplate.blocks) {"),this._emitLine("context.addBlock("+a+", parentTemplate.blocks["+a+"]);"),this._emitLine("}"),this._addScopeLevel()},r.compileInclude=function(n,s){this._emitLine("var tasks = [];"),this._emitLine("tasks.push("),this._emitLine("function(callback) {");var a=this._compileGetTemplate(n,s,!1,n.ignoreMissing);this._emitLine("callback(null,"+a+");});"),this._emitLine("});");var l=this._tmpid();this._emitLine("tasks.push("),this._emitLine("function(template, callback){"),this._emitLine("template.render(context.getVariables(), frame, "+this._makeCallback(l)),this._emitLine("callback(null,"+l+");});"),this._emitLine("});"),this._emitLine("tasks.push("),this._emitLine("function(result, callback){"),this._emitLine(this.buffer+" += result;"),this._emitLine("callback(null);"),this._emitLine("});"),this._emitLine("env.waterfall(tasks, function(){"),this._addScopeLevel()},r.compileTemplateData=function(n,s){this.compileLiteral(n,s)},r.compileCapture=function(n,s){var a=this,l=this.buffer;this.buffer="output",this._emitLine("(function() {"),this._emitLine('var output = "";'),this._withScopedSyntax(function(){a.compile(n.body,s)}),this._emitLine("return output;"),this._emitLine("})()"),this.buffer=l},r.compileOutput=function(n,s){var a=this,l=n.children;l.forEach(function(c){c instanceof ee.TemplateData?c.value&&(a._emit(a.buffer+" += "),a.compileLiteral(c,s),a._emitLine(";")):(a._emit(a.buffer+" += runtime.suppressValue("),a.throwOnUndefined&&a._emit("runtime.ensureDefined("),a.compile(c,s),a.throwOnUndefined&&a._emit(","+n.lineno+","+n.colno+")"),a._emit(`, env.opts.autoescape);
`))})},r.compileRoot=function(n,s){var a=this;s&&this.fail("compileRoot: root node can't have frame"),s=new Qa,this._emitFuncBegin(n,"root"),this._emitLine("var parentTemplate = null;"),this._compileChildren(n,s),this._emitLine("if(parentTemplate) {"),this._emitLine("parentTemplate.rootRenderFunc(env, context, frame, runtime, cb);"),this._emitLine("} else {"),this._emitLine("cb(null, "+this.buffer+");"),this._emitLine("}"),this._emitFuncEnd(!0),this.inBlock=!0;var l=[],c=n.findAll(ee.Block);c.forEach(function(h,d){var p=h.name.value;if(l.indexOf(p)!==-1)throw new Error('Block "'+p+'" defined more than once.');l.push(p),a._emitFuncBegin(h,"b_"+p);var m=new Qa;a._emitLine("var frame = frame.push(true);"),a.compile(h.body,m),a._emitFuncEnd()}),this._emitLine("return {"),c.forEach(function(h,d){var p="b_"+h.name.value;a._emitLine(p+": "+p+",")}),this._emitLine(`root: root
};`)},r.compile=function(n,s){var a=this["compile"+n.typename];a?a.call(this,n,s):this.fail("compile: Cannot compile node: "+n.typename,n.lineno,n.colno)},r.getCode=function(){return this.codebuf.join("")},t}(cA);Yp.exports={compile:function(t,r,i,n,s){s===void 0&&(s={});var a=new Vp(n,s.throwOnUndefined),l=(i||[]).map(function(h){return h.preprocess}).filter(function(h){return!!h}),c=l.reduce(function(h,d){return d(h)},t);return a.compile(sA.transform(iA.parse(c,i,s),r,n)),a.getCode()},Compiler:Vp}});var tm=W((NP,em)=>{"use strict";var he=At(),Pe=un(),Q=em.exports={};function Bt(e,t){return e==null||e===!1?t:e}Q.abs=Math.abs;function Za(e){return e!==e}function hA(e,t,r){var i,n=[],s=[];for(i=0;i<e.length;i++)i%t===0&&s.length&&(n.push(s),s=[]),s.push(e[i]);if(s.length){if(r)for(i=s.length;i<t;i++)s.push(r);n.push(s)}return n}Q.batch=hA;function Qp(e){e=Bt(e,"");var t=e.toLowerCase();return Pe.copySafeness(e,t.charAt(0).toUpperCase()+t.slice(1))}Q.capitalize=Qp;function dA(e,t){if(e=Bt(e,""),t=t||80,e.length>=t)return e;var r=t-e.length,i=he.repeat(" ",r/2-r%2),n=he.repeat(" ",r/2);return Pe.copySafeness(e,i+e+n)}Q.center=dA;function pA(e,t,r){return r?e||t:e!==void 0?e:t}Q.default=pA;function mA(e,t,r){if(!he.isObject(e))throw new he.TemplateError("dictsort filter: val must be an object");var i=[];for(var n in e)i.push([n,e[n]]);var s;if(r===void 0||r==="key")s=0;else if(r==="value")s=1;else throw new he.TemplateError("dictsort filter: You can only sort by either key or value");return i.sort(function(a,l){var c=a[s],h=l[s];return t||(he.isString(c)&&(c=c.toUpperCase()),he.isString(h)&&(h=h.toUpperCase())),c>h?1:c===h?0:-1}),i}Q.dictsort=mA;function gA(e,t){return JSON.stringify(e,null,t)}Q.dump=gA;function _A(e){return e instanceof Pe.SafeString?e:(e=e??"",Pe.markSafe(he.escape(e.toString())))}Q.escape=_A;function yA(e){return e instanceof Pe.SafeString?e:(e=e??"",Pe.markSafe(e.toString()))}Q.safe=yA;function bA(e){return e[0]}Q.first=bA;function vA(e){return e=e??"",Pe.markSafe(he.escape(e.toString()))}Q.forceescape=vA;function wA(e,t){return he.groupBy(e,t,this.env.opts.throwOnUndefined)}Q.groupby=wA;function SA(e,t,r){if(e=Bt(e,""),e==="")return"";t=t||4;var i=e.split(`
`),n=he.repeat(" ",t),s=i.map(function(a,l){return l===0&&!r?a:""+n+a}).join(`
`);return Pe.copySafeness(e,s)}Q.indent=SA;function EA(e,t,r){return t=t||"",r&&(e=he.map(e,function(i){return i[r]})),e.join(t)}Q.join=EA;function TA(e){return e[e.length-1]}Q.last=TA;function RA(e){var t=Bt(e,"");return t!==void 0?typeof Map=="function"&&t instanceof Map||typeof Set=="function"&&t instanceof Set?t.size:he.isObject(t)&&!(t instanceof Pe.SafeString)?he.keys(t).length:t.length:0}Q.length=RA;function Xp(e){if(he.isString(e))return e.split("");if(he.isObject(e))return he._entries(e||{}).map(function(t){var r=t[0],i=t[1];return{key:r,value:i}});if(he.isArray(e))return e;throw new he.TemplateError("list filter: type not iterable")}Q.list=Xp;function AA(e){return e=Bt(e,""),e.toLowerCase()}Q.lower=AA;function CA(e){return e==null?"":Pe.copySafeness(e,e.replace(/\r\n|\n/g,`<br />
`))}Q.nl2br=CA;function kA(e){return e[Math.floor(Math.random()*e.length)]}Q.random=kA;function Zp(e){function t(r,i,n){i===void 0&&(i="truthy");var s=this,a=s.env.getTest(i);return he.toArray(r).filter(function(c){return a.call(s,c,n)===e})}return t}Q.reject=Zp(!1);function OA(e,t){return e.filter(function(r){return!r[t]})}Q.rejectattr=OA;Q.select=Zp(!0);function xA(e,t){return e.filter(function(r){return!!r[t]})}Q.selectattr=xA;function PA(e,t,r,i){var n=e;if(t instanceof RegExp)return e.replace(t,r);typeof i>"u"&&(i=-1);var s="";if(typeof t=="number")t=""+t;else if(typeof t!="string")return e;if(typeof e=="number"&&(e=""+e),typeof e!="string"&&!(e instanceof Pe.SafeString))return e;if(t==="")return s=r+e.split("").join(r)+r,Pe.copySafeness(e,s);var a=e.indexOf(t);if(i===0||a===-1)return e;for(var l=0,c=0;a>-1&&(i===-1||c<i);)s+=e.substring(l,a)+r,l=a+t.length,c++,a=e.indexOf(t,l);return l<e.length&&(s+=e.substring(l)),Pe.copySafeness(n,s)}Q.replace=PA;function LA(e){var t;return he.isString(e)?t=Xp(e):t=he.map(e,function(r){return r}),t.reverse(),he.isString(e)?Pe.copySafeness(e,t.join("")):t}Q.reverse=LA;function IA(e,t,r){t=t||0;var i=Math.pow(10,t),n;return r==="ceil"?n=Math.ceil:r==="floor"?n=Math.floor:n=Math.round,n(e*i)/i}Q.round=IA;function FA(e,t,r){for(var i=Math.floor(e.length/t),n=e.length%t,s=[],a=0,l=0;l<t;l++){var c=a+l*i;l<n&&a++;var h=a+(l+1)*i,d=e.slice(c,h);r&&l>=n&&d.push(r),s.push(d)}return s}Q.slice=FA;function NA(e,t,r){return r===void 0&&(r=0),t&&(e=he.map(e,function(i){return i[t]})),r+e.reduce(function(i,n){return i+n},0)}Q.sum=NA;Q.sort=Pe.makeMacro(["value","reverse","case_sensitive","attribute"],[],function(t,r,i,n){var s=this,a=he.map(t,function(c){return c}),l=he.getAttrGetter(n);return a.sort(function(c,h){var d=n?l(c):c,p=n?l(h):h;if(s.env.opts.throwOnUndefined&&n&&(d===void 0||p===void 0))throw new TypeError('sort: attribute "'+n+'" resolved to undefined');return!i&&he.isString(d)&&he.isString(p)&&(d=d.toLowerCase(),p=p.toLowerCase()),d<p?r?1:-1:d>p?r?-1:1:0}),a});function BA(e){return Pe.copySafeness(e,e)}Q.string=BA;function DA(e,t){e=Bt(e,"");var r=/<\/?([a-z][a-z0-9]*)\b[^>]*>|<!--[\s\S]*?-->/gi,i=Jp(e.replace(r,"")),n="";return t?n=i.replace(/^ +| +$/gm,"").replace(/ +/g," ").replace(/(\r\n)/g,`
`).replace(/\n\n\n+/g,`

`):n=i.replace(/\s+/gi," "),Pe.copySafeness(e,n)}Q.striptags=DA;function MA(e){e=Bt(e,"");var t=e.split(" ").map(function(r){return Qp(r)});return Pe.copySafeness(e,t.join(" "))}Q.title=MA;function Jp(e){return Pe.copySafeness(e,e.replace(/^\s*|\s*$/g,""))}Q.trim=Jp;function qA(e,t,r,i){var n=e;if(e=Bt(e,""),t=t||255,e.length<=t)return e;if(r)e=e.substring(0,t);else{var s=e.lastIndexOf(" ",t);s===-1&&(s=t),e=e.substring(0,s)}return e+=i??"...",Pe.copySafeness(n,e)}Q.truncate=qA;function $A(e){return e=Bt(e,""),e.toUpperCase()}Q.upper=$A;function WA(e){var t=encodeURIComponent;if(he.isString(e))return t(e);var r=he.isArray(e)?e:he._entries(e);return r.map(function(i){var n=i[0],s=i[1];return t(n)+"="+t(s)}).join("&")}Q.urlencode=WA;var HA=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/,jA=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,UA=/^https?:\/\/.*$/,zA=/^www\./,KA=/\.(?:org|net|com)(?:\:|\/|$)/;function GA(e,t,r){Za(t)&&(t=1/0);var i=r===!0?' rel="nofollow"':"",n=e.split(/(\s+)/).filter(function(s){return s&&s.length}).map(function(s){var a=s.match(HA),l=a?a[1]:s,c=l.substr(0,t);return UA.test(l)?'<a href="'+l+'"'+i+">"+c+"</a>":zA.test(l)?'<a href="http://'+l+'"'+i+">"+c+"</a>":jA.test(l)?'<a href="mailto:'+l+'">'+l+"</a>":KA.test(l)?'<a href="http://'+l+'"'+i+">"+c+"</a>":s});return n.join("")}Q.urlize=GA;function VA(e){e=Bt(e,"");var t=e?e.match(/\w+/g):null;return t?t.length:null}Q.wordcount=VA;function YA(e,t){var r=parseFloat(e);return Za(r)?t:r}Q.float=YA;var QA=Pe.makeMacro(["value","default","base"],[],function(t,r,i){i===void 0&&(i=10);var n=parseInt(t,i);return Za(n)?r:n});Q.int=QA;Q.d=Q.default;Q.e=Q.escape});var bs=W((BP,nm)=>{"use strict";function XA(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ja(e,t)}function Ja(e,t){return Ja=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Ja(e,t)}var rm=require("path"),ZA=on(),JA=ZA.EmitterObj;nm.exports=function(e){XA(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.resolve=function(n,s){return rm.resolve(rm.dirname(n),s)},r.isRelative=function(n){return n.indexOf("./")===0||n.indexOf("../")===0},t}(JA)});var sm=W((DP,im)=>{"use strict";function eC(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,eu(e,t)}function eu(e,t){return eu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},eu(e,t)}var tC=bs(),rC=function(e){eC(t,e);function t(i){var n;return n=e.call(this)||this,n.precompiled=i||{},n}var r=t.prototype;return r.getSource=function(n){return this.precompiled[n]?{src:{type:"code",obj:this.precompiled[n]},path:n}:null},t}(tC);im.exports={PrecompiledLoader:rC}});var Un=W((MP,cm)=>{"use strict";var nC=require("path"),Dt="\\\\/",om=`[^${Dt}]`,Qt="\\.",iC="\\+",sC="\\?",vs="\\/",oC="(?=.)",am="[^/]",tu=`(?:${vs}|$)`,um=`(?:^|${vs})`,ru=`${Qt}{1,2}${tu}`,aC=`(?!${Qt})`,uC=`(?!${um}${ru})`,lC=`(?!${Qt}{0,1}${tu})`,cC=`(?!${ru})`,fC=`[^.${vs}]`,hC=`${am}*?`,lm={DOT_LITERAL:Qt,PLUS_LITERAL:iC,QMARK_LITERAL:sC,SLASH_LITERAL:vs,ONE_CHAR:oC,QMARK:am,END_ANCHOR:tu,DOTS_SLASH:ru,NO_DOT:aC,NO_DOTS:uC,NO_DOT_SLASH:lC,NO_DOTS_SLASH:cC,QMARK_NO_DOT:fC,STAR:hC,START_ANCHOR:um},dC={...lm,SLASH_LITERAL:`[${Dt}]`,QMARK:om,STAR:`${om}*?`,DOTS_SLASH:`${Qt}{1,2}(?:[${Dt}]|$)`,NO_DOT:`(?!${Qt})`,NO_DOTS:`(?!(?:^|[${Dt}])${Qt}{1,2}(?:[${Dt}]|$))`,NO_DOT_SLASH:`(?!${Qt}{0,1}(?:[${Dt}]|$))`,NO_DOTS_SLASH:`(?!${Qt}{1,2}(?:[${Dt}]|$))`,QMARK_NO_DOT:`[^.${Dt}]`,START_ANCHOR:`(?:^|[${Dt}])`,END_ANCHOR:`(?:[${Dt}]|$)`},pC={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};cm.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:pC,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:nC.sep,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?dC:lm}}});var ws=W(it=>{"use strict";var mC=require("path"),gC=process.platform==="win32",{REGEX_BACKSLASH:_C,REGEX_REMOVE_BACKSLASH:yC,REGEX_SPECIAL_CHARS:bC,REGEX_SPECIAL_CHARS_GLOBAL:vC}=Un();it.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);it.hasRegexChars=e=>bC.test(e);it.isRegexChar=e=>e.length===1&&it.hasRegexChars(e);it.escapeRegex=e=>e.replace(vC,"\\$1");it.toPosixSlashes=e=>e.replace(_C,"/");it.removeBackslashes=e=>e.replace(yC,t=>t==="\\"?"":t);it.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10};it.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:gC===!0||mC.sep==="\\";it.escapeLast=(e,t,r)=>{let i=e.lastIndexOf(t,r);return i===-1?e:e[i-1]==="\\"?it.escapeLast(e,t,i-1):`${e.slice(0,i)}\\${e.slice(i)}`};it.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r};it.wrapOutput=(e,t={},r={})=>{let i=r.contains?"":"^",n=r.contains?"":"$",s=`${i}(?:${e})${n}`;return t.negated===!0&&(s=`(?:^(?!${s}).*$)`),s}});var ym=W(($P,_m)=>{"use strict";var fm=ws(),{CHAR_ASTERISK:nu,CHAR_AT:wC,CHAR_BACKWARD_SLASH:zn,CHAR_COMMA:SC,CHAR_DOT:iu,CHAR_EXCLAMATION_MARK:su,CHAR_FORWARD_SLASH:gm,CHAR_LEFT_CURLY_BRACE:ou,CHAR_LEFT_PARENTHESES:au,CHAR_LEFT_SQUARE_BRACKET:EC,CHAR_PLUS:TC,CHAR_QUESTION_MARK:hm,CHAR_RIGHT_CURLY_BRACE:RC,CHAR_RIGHT_PARENTHESES:dm,CHAR_RIGHT_SQUARE_BRACKET:AC}=Un(),pm=e=>e===gm||e===zn,mm=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?1/0:1)},CC=(e,t)=>{let r=t||{},i=e.length-1,n=r.parts===!0||r.scanToEnd===!0,s=[],a=[],l=[],c=e,h=-1,d=0,p=0,m=!1,_=!1,y=!1,v=!1,E=!1,S=!1,R=!1,O=!1,N=!1,$=!1,j=0,ae,U,J={value:"",depth:0,isGlob:!1},Se=()=>h>=i,k=()=>c.charCodeAt(h+1),ce=()=>(ae=U,c.charCodeAt(++h));for(;h<i;){U=ce();let Ie;if(U===zn){R=J.backslashes=!0,U=ce(),U===ou&&(S=!0);continue}if(S===!0||U===ou){for(j++;Se()!==!0&&(U=ce());){if(U===zn){R=J.backslashes=!0,ce();continue}if(U===ou){j++;continue}if(S!==!0&&U===iu&&(U=ce())===iu){if(m=J.isBrace=!0,y=J.isGlob=!0,$=!0,n===!0)continue;break}if(S!==!0&&U===SC){if(m=J.isBrace=!0,y=J.isGlob=!0,$=!0,n===!0)continue;break}if(U===RC&&(j--,j===0)){S=!1,m=J.isBrace=!0,$=!0;break}}if(n===!0)continue;break}if(U===gm){if(s.push(h),a.push(J),J={value:"",depth:0,isGlob:!1},$===!0)continue;if(ae===iu&&h===d+1){d+=2;continue}p=h+1;continue}if(r.noext!==!0&&(U===TC||U===wC||U===nu||U===hm||U===su)===!0&&k()===au){if(y=J.isGlob=!0,v=J.isExtglob=!0,$=!0,U===su&&h===d&&(N=!0),n===!0){for(;Se()!==!0&&(U=ce());){if(U===zn){R=J.backslashes=!0,U=ce();continue}if(U===dm){y=J.isGlob=!0,$=!0;break}}continue}break}if(U===nu){if(ae===nu&&(E=J.isGlobstar=!0),y=J.isGlob=!0,$=!0,n===!0)continue;break}if(U===hm){if(y=J.isGlob=!0,$=!0,n===!0)continue;break}if(U===EC){for(;Se()!==!0&&(Ie=ce());){if(Ie===zn){R=J.backslashes=!0,ce();continue}if(Ie===AC){_=J.isBracket=!0,y=J.isGlob=!0,$=!0;break}}if(n===!0)continue;break}if(r.nonegate!==!0&&U===su&&h===d){O=J.negated=!0,d++;continue}if(r.noparen!==!0&&U===au){if(y=J.isGlob=!0,n===!0){for(;Se()!==!0&&(U=ce());){if(U===au){R=J.backslashes=!0,U=ce();continue}if(U===dm){$=!0;break}}continue}break}if(y===!0){if($=!0,n===!0)continue;break}}r.noext===!0&&(v=!1,y=!1);let ie=c,Ke="",A="";d>0&&(Ke=c.slice(0,d),c=c.slice(d),p-=d),ie&&y===!0&&p>0?(ie=c.slice(0,p),A=c.slice(p)):y===!0?(ie="",A=c):ie=c,ie&&ie!==""&&ie!=="/"&&ie!==c&&pm(ie.charCodeAt(ie.length-1))&&(ie=ie.slice(0,-1)),r.unescape===!0&&(A&&(A=fm.removeBackslashes(A)),ie&&R===!0&&(ie=fm.removeBackslashes(ie)));let C={prefix:Ke,input:e,start:d,base:ie,glob:A,isBrace:m,isBracket:_,isGlob:y,isExtglob:v,isGlobstar:E,negated:O,negatedExtglob:N};if(r.tokens===!0&&(C.maxDepth=0,pm(U)||a.push(J),C.tokens=a),r.parts===!0||r.tokens===!0){let Ie;for(let ne=0;ne<s.length;ne++){let Ze=Ie?Ie+1:d,Ge=s[ne],Be=e.slice(Ze,Ge);r.tokens&&(ne===0&&d!==0?(a[ne].isPrefix=!0,a[ne].value=Ke):a[ne].value=Be,mm(a[ne]),C.maxDepth+=a[ne].depth),(ne!==0||Be!=="")&&l.push(Be),Ie=Ge}if(Ie&&Ie+1<e.length){let ne=e.slice(Ie+1);l.push(ne),r.tokens&&(a[a.length-1].value=ne,mm(a[a.length-1]),C.maxDepth+=a[a.length-1].depth)}C.slashes=s,C.parts=l}return C};_m.exports=CC});var wm=W((WP,vm)=>{"use strict";var Ss=Un(),ht=ws(),{MAX_LENGTH:Es,POSIX_REGEX_SOURCE:kC,REGEX_NON_SPECIAL_CHARS:OC,REGEX_SPECIAL_CHARS_BACKREF:xC,REPLACEMENTS:bm}=Ss,PC=(e,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...e,t);e.sort();let r=`[${e.join("-")}]`;try{new RegExp(r)}catch{return e.map(n=>ht.escapeRegex(n)).join("..")}return r},ln=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,uu=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=bm[e]||e;let r={...t},i=typeof r.maxLength=="number"?Math.min(Es,r.maxLength):Es,n=e.length;if(n>i)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${i}`);let s={type:"bos",value:"",output:r.prepend||""},a=[s],l=r.capture?"":"?:",c=ht.isWindows(t),h=Ss.globChars(c),d=Ss.extglobChars(h),{DOT_LITERAL:p,PLUS_LITERAL:m,SLASH_LITERAL:_,ONE_CHAR:y,DOTS_SLASH:v,NO_DOT:E,NO_DOT_SLASH:S,NO_DOTS_SLASH:R,QMARK:O,QMARK_NO_DOT:N,STAR:$,START_ANCHOR:j}=h,ae=M=>`(${l}(?:(?!${j}${M.dot?v:p}).)*?)`,U=r.dot?"":E,J=r.dot?O:N,Se=r.bash===!0?ae(r):$;r.capture&&(Se=`(${Se})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let k={input:e,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:a};e=ht.removePrefix(e,k),n=e.length;let ce=[],ie=[],Ke=[],A=s,C,Ie=()=>k.index===n-1,ne=k.peek=(M=1)=>e[k.index+M],Ze=k.advance=()=>e[++k.index]||"",Ge=()=>e.slice(k.index+1),Be=(M="",fe=0)=>{k.consumed+=M,k.index+=fe},tr=M=>{k.output+=M.output!=null?M.output:M.value,Be(M.value)},_n=()=>{let M=1;for(;ne()==="!"&&(ne(2)!=="("||ne(3)==="?");)Ze(),k.start++,M++;return M%2===0?!1:(k.negated=!0,k.start++,!0)},He=M=>{k[M]++,Ke.push(M)},Ae=M=>{k[M]--,Ke.pop()},te=M=>{if(A.type==="globstar"){let fe=k.braces>0&&(M.type==="comma"||M.type==="brace"),L=M.extglob===!0||ce.length&&(M.type==="pipe"||M.type==="paren");M.type!=="slash"&&M.type!=="paren"&&!fe&&!L&&(k.output=k.output.slice(0,-A.output.length),A.type="star",A.value="*",A.output=Se,k.output+=A.output)}if(ce.length&&M.type!=="paren"&&(ce[ce.length-1].inner+=M.value),(M.value||M.output)&&tr(M),A&&A.type==="text"&&M.type==="text"){A.value+=M.value,A.output=(A.output||"")+M.value;return}M.prev=A,a.push(M),A=M},$t=(M,fe)=>{let L={...d[fe],conditions:1,inner:""};L.prev=A,L.parens=k.parens,L.output=k.output;let I=(r.capture?"(":"")+L.open;He("parens"),te({type:M,value:fe,output:k.output?"":y}),te({type:"paren",extglob:!0,value:Ze(),output:I}),ce.push(L)},at=M=>{let fe=M.close+(r.capture?")":""),L;if(M.type==="negate"){let I=Se;if(M.inner&&M.inner.length>1&&M.inner.includes("/")&&(I=ae(r)),(I!==Se||Ie()||/^\)+$/.test(Ge()))&&(fe=M.close=`)$))${I}`),M.inner.includes("*")&&(L=Ge())&&/^\.[^\\/.]+$/.test(L)){let pe=uu(L,{...t,fastpaths:!1}).output;fe=M.close=`)${pe})${I})`}M.prev.type==="bos"&&(k.negatedExtglob=!0)}te({type:"paren",extglob:!0,value:C,output:fe}),Ae("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let M=!1,fe=e.replace(xC,(L,I,pe,x,F,oe)=>x==="\\"?(M=!0,L):x==="?"?I?I+x+(F?O.repeat(F.length):""):oe===0?J+(F?O.repeat(F.length):""):O.repeat(pe.length):x==="."?p.repeat(pe.length):x==="*"?I?I+x+(F?Se:""):Se:I?L:`\\${L}`);return M===!0&&(r.unescape===!0?fe=fe.replace(/\\/g,""):fe=fe.replace(/\\+/g,L=>L.length%2===0?"\\\\":L?"\\":"")),fe===e&&r.contains===!0?(k.output=e,k):(k.output=ht.wrapOutput(fe,k,t),k)}for(;!Ie();){if(C=Ze(),C==="\0")continue;if(C==="\\"){let L=ne();if(L==="/"&&r.bash!==!0||L==="."||L===";")continue;if(!L){C+="\\",te({type:"text",value:C});continue}let I=/^\\+/.exec(Ge()),pe=0;if(I&&I[0].length>2&&(pe=I[0].length,k.index+=pe,pe%2!==0&&(C+="\\")),r.unescape===!0?C=Ze():C+=Ze(),k.brackets===0){te({type:"text",value:C});continue}}if(k.brackets>0&&(C!=="]"||A.value==="["||A.value==="[^")){if(r.posix!==!1&&C===":"){let L=A.value.slice(1);if(L.includes("[")&&(A.posix=!0,L.includes(":"))){let I=A.value.lastIndexOf("["),pe=A.value.slice(0,I),x=A.value.slice(I+2),F=kC[x];if(F){A.value=pe+F,k.backtrack=!0,Ze(),!s.output&&a.indexOf(A)===1&&(s.output=y);continue}}}(C==="["&&ne()!==":"||C==="-"&&ne()==="]")&&(C=`\\${C}`),C==="]"&&(A.value==="["||A.value==="[^")&&(C=`\\${C}`),r.posix===!0&&C==="!"&&A.value==="["&&(C="^"),A.value+=C,tr({value:C});continue}if(k.quotes===1&&C!=='"'){C=ht.escapeRegex(C),A.value+=C,tr({value:C});continue}if(C==='"'){k.quotes=k.quotes===1?0:1,r.keepQuotes===!0&&te({type:"text",value:C});continue}if(C==="("){He("parens"),te({type:"paren",value:C});continue}if(C===")"){if(k.parens===0&&r.strictBrackets===!0)throw new SyntaxError(ln("opening","("));let L=ce[ce.length-1];if(L&&k.parens===L.parens+1){at(ce.pop());continue}te({type:"paren",value:C,output:k.parens?")":"\\)"}),Ae("parens");continue}if(C==="["){if(r.nobracket===!0||!Ge().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(ln("closing","]"));C=`\\${C}`}else He("brackets");te({type:"bracket",value:C});continue}if(C==="]"){if(r.nobracket===!0||A&&A.type==="bracket"&&A.value.length===1){te({type:"text",value:C,output:`\\${C}`});continue}if(k.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(ln("opening","["));te({type:"text",value:C,output:`\\${C}`});continue}Ae("brackets");let L=A.value.slice(1);if(A.posix!==!0&&L[0]==="^"&&!L.includes("/")&&(C=`/${C}`),A.value+=C,tr({value:C}),r.literalBrackets===!1||ht.hasRegexChars(L))continue;let I=ht.escapeRegex(A.value);if(k.output=k.output.slice(0,-A.value.length),r.literalBrackets===!0){k.output+=I,A.value=I;continue}A.value=`(${l}${I}|${A.value})`,k.output+=A.value;continue}if(C==="{"&&r.nobrace!==!0){He("braces");let L={type:"brace",value:C,output:"(",outputIndex:k.output.length,tokensIndex:k.tokens.length};ie.push(L),te(L);continue}if(C==="}"){let L=ie[ie.length-1];if(r.nobrace===!0||!L){te({type:"text",value:C,output:C});continue}let I=")";if(L.dots===!0){let pe=a.slice(),x=[];for(let F=pe.length-1;F>=0&&(a.pop(),pe[F].type!=="brace");F--)pe[F].type!=="dots"&&x.unshift(pe[F].value);I=PC(x,r),k.backtrack=!0}if(L.comma!==!0&&L.dots!==!0){let pe=k.output.slice(0,L.outputIndex),x=k.tokens.slice(L.tokensIndex);L.value=L.output="\\{",C=I="\\}",k.output=pe;for(let F of x)k.output+=F.output||F.value}te({type:"brace",value:C,output:I}),Ae("braces"),ie.pop();continue}if(C==="|"){ce.length>0&&ce[ce.length-1].conditions++,te({type:"text",value:C});continue}if(C===","){let L=C,I=ie[ie.length-1];I&&Ke[Ke.length-1]==="braces"&&(I.comma=!0,L="|"),te({type:"comma",value:C,output:L});continue}if(C==="/"){if(A.type==="dot"&&k.index===k.start+1){k.start=k.index+1,k.consumed="",k.output="",a.pop(),A=s;continue}te({type:"slash",value:C,output:_});continue}if(C==="."){if(k.braces>0&&A.type==="dot"){A.value==="."&&(A.output=p);let L=ie[ie.length-1];A.type="dots",A.output+=C,A.value+=C,L.dots=!0;continue}if(k.braces+k.parens===0&&A.type!=="bos"&&A.type!=="slash"){te({type:"text",value:C,output:p});continue}te({type:"dot",value:C,output:p});continue}if(C==="?"){if(!(A&&A.value==="(")&&r.noextglob!==!0&&ne()==="("&&ne(2)!=="?"){$t("qmark",C);continue}if(A&&A.type==="paren"){let I=ne(),pe=C;if(I==="<"&&!ht.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(A.value==="("&&!/[!=<:]/.test(I)||I==="<"&&!/<([!=]|\w+>)/.test(Ge()))&&(pe=`\\${C}`),te({type:"text",value:C,output:pe});continue}if(r.dot!==!0&&(A.type==="slash"||A.type==="bos")){te({type:"qmark",value:C,output:N});continue}te({type:"qmark",value:C,output:O});continue}if(C==="!"){if(r.noextglob!==!0&&ne()==="("&&(ne(2)!=="?"||!/[!=<:]/.test(ne(3)))){$t("negate",C);continue}if(r.nonegate!==!0&&k.index===0){_n();continue}}if(C==="+"){if(r.noextglob!==!0&&ne()==="("&&ne(2)!=="?"){$t("plus",C);continue}if(A&&A.value==="("||r.regex===!1){te({type:"plus",value:C,output:m});continue}if(A&&(A.type==="bracket"||A.type==="paren"||A.type==="brace")||k.parens>0){te({type:"plus",value:C});continue}te({type:"plus",value:m});continue}if(C==="@"){if(r.noextglob!==!0&&ne()==="("&&ne(2)!=="?"){te({type:"at",extglob:!0,value:C,output:""});continue}te({type:"text",value:C});continue}if(C!=="*"){(C==="$"||C==="^")&&(C=`\\${C}`);let L=OC.exec(Ge());L&&(C+=L[0],k.index+=L[0].length),te({type:"text",value:C});continue}if(A&&(A.type==="globstar"||A.star===!0)){A.type="star",A.star=!0,A.value+=C,A.output=Se,k.backtrack=!0,k.globstar=!0,Be(C);continue}let M=Ge();if(r.noextglob!==!0&&/^\([^?]/.test(M)){$t("star",C);continue}if(A.type==="star"){if(r.noglobstar===!0){Be(C);continue}let L=A.prev,I=L.prev,pe=L.type==="slash"||L.type==="bos",x=I&&(I.type==="star"||I.type==="globstar");if(r.bash===!0&&(!pe||M[0]&&M[0]!=="/")){te({type:"star",value:C,output:""});continue}let F=k.braces>0&&(L.type==="comma"||L.type==="brace"),oe=ce.length&&(L.type==="pipe"||L.type==="paren");if(!pe&&L.type!=="paren"&&!F&&!oe){te({type:"star",value:C,output:""});continue}for(;M.slice(0,3)==="/**";){let Te=e[k.index+4];if(Te&&Te!=="/")break;M=M.slice(3),Be("/**",3)}if(L.type==="bos"&&Ie()){A.type="globstar",A.value+=C,A.output=ae(r),k.output=A.output,k.globstar=!0,Be(C);continue}if(L.type==="slash"&&L.prev.type!=="bos"&&!x&&Ie()){k.output=k.output.slice(0,-(L.output+A.output).length),L.output=`(?:${L.output}`,A.type="globstar",A.output=ae(r)+(r.strictSlashes?")":"|$)"),A.value+=C,k.globstar=!0,k.output+=L.output+A.output,Be(C);continue}if(L.type==="slash"&&L.prev.type!=="bos"&&M[0]==="/"){let Te=M[1]!==void 0?"|$":"";k.output=k.output.slice(0,-(L.output+A.output).length),L.output=`(?:${L.output}`,A.type="globstar",A.output=`${ae(r)}${_}|${_}${Te})`,A.value+=C,k.output+=L.output+A.output,k.globstar=!0,Be(C+Ze()),te({type:"slash",value:"/",output:""});continue}if(L.type==="bos"&&M[0]==="/"){A.type="globstar",A.value+=C,A.output=`(?:^|${_}|${ae(r)}${_})`,k.output=A.output,k.globstar=!0,Be(C+Ze()),te({type:"slash",value:"/",output:""});continue}k.output=k.output.slice(0,-A.output.length),A.type="globstar",A.output=ae(r),A.value+=C,k.output+=A.output,k.globstar=!0,Be(C);continue}let fe={type:"star",value:C,output:Se};if(r.bash===!0){fe.output=".*?",(A.type==="bos"||A.type==="slash")&&(fe.output=U+fe.output),te(fe);continue}if(A&&(A.type==="bracket"||A.type==="paren")&&r.regex===!0){fe.output=C,te(fe);continue}(k.index===k.start||A.type==="slash"||A.type==="dot")&&(A.type==="dot"?(k.output+=S,A.output+=S):r.dot===!0?(k.output+=R,A.output+=R):(k.output+=U,A.output+=U),ne()!=="*"&&(k.output+=y,A.output+=y)),te(fe)}for(;k.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(ln("closing","]"));k.output=ht.escapeLast(k.output,"["),Ae("brackets")}for(;k.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(ln("closing",")"));k.output=ht.escapeLast(k.output,"("),Ae("parens")}for(;k.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(ln("closing","}"));k.output=ht.escapeLast(k.output,"{"),Ae("braces")}if(r.strictSlashes!==!0&&(A.type==="star"||A.type==="bracket")&&te({type:"maybe_slash",value:"",output:`${_}?`}),k.backtrack===!0){k.output="";for(let M of k.tokens)k.output+=M.output!=null?M.output:M.value,M.suffix&&(k.output+=M.suffix)}return k};uu.fastpaths=(e,t)=>{let r={...t},i=typeof r.maxLength=="number"?Math.min(Es,r.maxLength):Es,n=e.length;if(n>i)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${i}`);e=bm[e]||e;let s=ht.isWindows(t),{DOT_LITERAL:a,SLASH_LITERAL:l,ONE_CHAR:c,DOTS_SLASH:h,NO_DOT:d,NO_DOTS:p,NO_DOTS_SLASH:m,STAR:_,START_ANCHOR:y}=Ss.globChars(s),v=r.dot?p:d,E=r.dot?m:d,S=r.capture?"":"?:",R={negated:!1,prefix:""},O=r.bash===!0?".*?":_;r.capture&&(O=`(${O})`);let N=U=>U.noglobstar===!0?O:`(${S}(?:(?!${y}${U.dot?h:a}).)*?)`,$=U=>{switch(U){case"*":return`${v}${c}${O}`;case".*":return`${a}${c}${O}`;case"*.*":return`${v}${O}${a}${c}${O}`;case"*/*":return`${v}${O}${l}${c}${E}${O}`;case"**":return v+N(r);case"**/*":return`(?:${v}${N(r)}${l})?${E}${c}${O}`;case"**/*.*":return`(?:${v}${N(r)}${l})?${E}${O}${a}${c}${O}`;case"**/.*":return`(?:${v}${N(r)}${l})?${a}${c}${O}`;default:{let J=/^(.*?)\.(\w+)$/.exec(U);if(!J)return;let Se=$(J[1]);return Se?Se+a+J[2]:void 0}}},j=ht.removePrefix(e,R),ae=$(j);return ae&&r.strictSlashes!==!0&&(ae+=`${l}?`),ae};vm.exports=uu});var Em=W((HP,Sm)=>{"use strict";var LC=require("path"),IC=ym(),lu=wm(),cu=ws(),FC=Un(),NC=e=>e&&typeof e=="object"&&!Array.isArray(e),Le=(e,t,r=!1)=>{if(Array.isArray(e)){let d=e.map(m=>Le(m,t,r));return m=>{for(let _ of d){let y=_(m);if(y)return y}return!1}}let i=NC(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!i)throw new TypeError("Expected pattern to be a non-empty string");let n=t||{},s=cu.isWindows(t),a=i?Le.compileRe(e,t):Le.makeRe(e,t,!1,!0),l=a.state;delete a.state;let c=()=>!1;if(n.ignore){let d={...t,ignore:null,onMatch:null,onResult:null};c=Le(n.ignore,d,r)}let h=(d,p=!1)=>{let{isMatch:m,match:_,output:y}=Le.test(d,a,t,{glob:e,posix:s}),v={glob:e,state:l,regex:a,posix:s,input:d,output:y,match:_,isMatch:m};return typeof n.onResult=="function"&&n.onResult(v),m===!1?(v.isMatch=!1,p?v:!1):c(d)?(typeof n.onIgnore=="function"&&n.onIgnore(v),v.isMatch=!1,p?v:!1):(typeof n.onMatch=="function"&&n.onMatch(v),p?v:!0)};return r&&(h.state=l),h};Le.test=(e,t,r,{glob:i,posix:n}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let s=r||{},a=s.format||(n?cu.toPosixSlashes:null),l=e===i,c=l&&a?a(e):e;return l===!1&&(c=a?a(e):e,l=c===i),(l===!1||s.capture===!0)&&(s.matchBase===!0||s.basename===!0?l=Le.matchBase(e,t,r,n):l=t.exec(c)),{isMatch:!!l,match:l,output:c}};Le.matchBase=(e,t,r,i=cu.isWindows(r))=>(t instanceof RegExp?t:Le.makeRe(t,r)).test(LC.basename(e));Le.isMatch=(e,t,r)=>Le(t,r)(e);Le.parse=(e,t)=>Array.isArray(e)?e.map(r=>Le.parse(r,t)):lu(e,{...t,fastpaths:!1});Le.scan=(e,t)=>IC(e,t);Le.compileRe=(e,t,r=!1,i=!1)=>{if(r===!0)return e.output;let n=t||{},s=n.contains?"":"^",a=n.contains?"":"$",l=`${s}(?:${e.output})${a}`;e&&e.negated===!0&&(l=`^(?!${l}).*$`);let c=Le.toRegex(l,t);return i===!0&&(c.state=e),c};Le.makeRe=(e,t={},r=!1,i=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(n.output=lu.fastpaths(e,t)),n.output||(n=lu(e,t)),Le.compileRe(n,t,r,i)};Le.toRegex=(e,t)=>{try{let r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(r){if(t&&t.debug===!0)throw r;return/$^/}};Le.constants=FC;Sm.exports=Le});var fu=W((jP,Tm)=>{"use strict";Tm.exports=Em()});var Lm=W((UP,Pm)=>{"use strict";var Gn=require("fs"),{Readable:BC}=require("stream"),Kn=require("path"),{promisify:Cs}=require("util"),hu=fu(),DC=Cs(Gn.readdir),MC=Cs(Gn.stat),Rm=Cs(Gn.lstat),qC=Cs(Gn.realpath),$C="!",Om="READDIRP_RECURSIVE_ERROR",WC=new Set(["ENOENT","EPERM","EACCES","ELOOP",Om]),du="files",xm="directories",Rs="files_directories",Ts="all",Am=[du,xm,Rs,Ts],HC=e=>WC.has(e.code),[Cm,jC]=process.versions.node.split(".").slice(0,2).map(e=>Number.parseInt(e,10)),UC=process.platform==="win32"&&(Cm>10||Cm===10&&jC>=5),km=e=>{if(e!==void 0){if(typeof e=="function")return e;if(typeof e=="string"){let t=hu(e.trim());return r=>t(r.basename)}if(Array.isArray(e)){let t=[],r=[];for(let i of e){let n=i.trim();n.charAt(0)===$C?r.push(hu(n.slice(1))):t.push(hu(n))}return r.length>0?t.length>0?i=>t.some(n=>n(i.basename))&&!r.some(n=>n(i.basename)):i=>!r.some(n=>n(i.basename)):i=>t.some(n=>n(i.basename))}}},As=class e extends BC{static get defaultOptions(){return{root:".",fileFilter:t=>!0,directoryFilter:t=>!0,type:du,lstat:!1,depth:2147483648,alwaysStat:!1}}constructor(t={}){super({objectMode:!0,autoDestroy:!0,highWaterMark:t.highWaterMark||4096});let r={...e.defaultOptions,...t},{root:i,type:n}=r;this._fileFilter=km(r.fileFilter),this._directoryFilter=km(r.directoryFilter);let s=r.lstat?Rm:MC;UC?this._stat=a=>s(a,{bigint:!0}):this._stat=s,this._maxDepth=r.depth,this._wantsDir=[xm,Rs,Ts].includes(n),this._wantsFile=[du,Rs,Ts].includes(n),this._wantsEverything=n===Ts,this._root=Kn.resolve(i),this._isDirent="Dirent"in Gn&&!r.alwaysStat,this._statsProp=this._isDirent?"dirent":"stats",this._rdOptions={encoding:"utf8",withFileTypes:this._isDirent},this.parents=[this._exploreDir(i,1)],this.reading=!1,this.parent=void 0}async _read(t){if(!this.reading){this.reading=!0;try{for(;!this.destroyed&&t>0;){let{path:r,depth:i,files:n=[]}=this.parent||{};if(n.length>0){let s=n.splice(0,t).map(a=>this._formatEntry(a,r));for(let a of await Promise.all(s)){if(this.destroyed)return;let l=await this._getEntryType(a);l==="directory"&&this._directoryFilter(a)?(i<=this._maxDepth&&this.parents.push(this._exploreDir(a.fullPath,i+1)),this._wantsDir&&(this.push(a),t--)):(l==="file"||this._includeAsFile(a))&&this._fileFilter(a)&&this._wantsFile&&(this.push(a),t--)}}else{let s=this.parents.pop();if(!s){this.push(null);break}if(this.parent=await s,this.destroyed)return}}}catch(r){this.destroy(r)}finally{this.reading=!1}}}async _exploreDir(t,r){let i;try{i=await DC(t,this._rdOptions)}catch(n){this._onError(n)}return{files:i,depth:r,path:t}}async _formatEntry(t,r){let i;try{let n=this._isDirent?t.name:t,s=Kn.resolve(Kn.join(r,n));i={path:Kn.relative(this._root,s),fullPath:s,basename:n},i[this._statsProp]=this._isDirent?t:await this._stat(s)}catch(n){this._onError(n)}return i}_onError(t){HC(t)&&!this.destroyed?this.emit("warn",t):this.destroy(t)}async _getEntryType(t){let r=t&&t[this._statsProp];if(r){if(r.isFile())return"file";if(r.isDirectory())return"directory";if(r&&r.isSymbolicLink()){let i=t.fullPath;try{let n=await qC(i),s=await Rm(n);if(s.isFile())return"file";if(s.isDirectory()){let a=n.length;if(i.startsWith(n)&&i.substr(a,1)===Kn.sep){let l=new Error(`Circular symlink detected: "${i}" points to "${n}"`);return l.code=Om,this._onError(l)}return"directory"}}catch(n){this._onError(n)}}}}_includeAsFile(t){let r=t&&t[this._statsProp];return r&&this._wantsEverything&&!r.isDirectory()}},cn=(e,t={})=>{let r=t.entryType||t.type;if(r==="both"&&(r=Rs),r&&(t.type=r),e){if(typeof e!="string")throw new TypeError("readdirp: root argument must be a string. Usage: readdirp(root, options)");if(r&&!Am.includes(r))throw new Error(`readdirp: Invalid type passed. Use one of ${Am.join(", ")}`)}else throw new Error("readdirp: root argument is required. Usage: readdirp(root, options)");return t.root=e,new As(t)},zC=(e,t={})=>new Promise((r,i)=>{let n=[];cn(e,t).on("data",s=>n.push(s)).on("end",()=>r(n)).on("error",s=>i(s))});cn.promise=zC;cn.ReaddirpStream=As;cn.default=cn;Pm.exports=cn});var pu=W((zP,Im)=>{Im.exports=function(e,t){if(typeof e!="string")throw new TypeError("expected path to be a string");if(e==="\\"||e==="/")return"/";var r=e.length;if(r<=1)return e;var i="";if(r>4&&e[3]==="\\"){var n=e[2];(n==="?"||n===".")&&e.slice(0,2)==="\\\\"&&(e=e.slice(2),i="//")}var s=e.split(/[/\\]+/);return t!==!1&&s[s.length-1]===""&&s.pop(),i+s.join("/")}});var qm=W((Dm,Mm)=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});var Bm=fu(),KC=pu(),Fm="!",GC={returnIndex:!1},VC=e=>Array.isArray(e)?e:[e],YC=(e,t)=>{if(typeof e=="function")return e;if(typeof e=="string"){let r=Bm(e,t);return i=>e===i||r(i)}return e instanceof RegExp?r=>e.test(r):r=>!1},Nm=(e,t,r,i)=>{let n=Array.isArray(r),s=n?r[0]:r;if(!n&&typeof s!="string")throw new TypeError("anymatch: second argument must be a string: got "+Object.prototype.toString.call(s));let a=KC(s,!1);for(let c=0;c<t.length;c++){let h=t[c];if(h(a))return i?-1:!1}let l=n&&[a].concat(r.slice(1));for(let c=0;c<e.length;c++){let h=e[c];if(n?h(...l):h(a))return i?c:!0}return i?-1:!1},mu=(e,t,r=GC)=>{if(e==null)throw new TypeError("anymatch: specify first argument");let i=typeof r=="boolean"?{returnIndex:r}:r,n=i.returnIndex||!1,s=VC(e),a=s.filter(c=>typeof c=="string"&&c.charAt(0)===Fm).map(c=>c.slice(1)).map(c=>Bm(c,i)),l=s.filter(c=>typeof c!="string"||typeof c=="string"&&c.charAt(0)!==Fm).map(c=>YC(c,i));return t==null?(c,h=!1)=>Nm(l,a,c,typeof h=="boolean"?h:!1):Nm(l,a,t,n)};mu.default=mu;Mm.exports=mu});var Wm=W((KP,$m)=>{$m.exports=function(t){if(typeof t!="string"||t==="")return!1;for(var r;r=/(\\).|([@?!+*]\(.*\))/g.exec(t);){if(r[2])return!0;t=t.slice(r.index+r[0].length)}return!1}});var gu=W((GP,jm)=>{var QC=Wm(),Hm={"{":"}","(":")","[":"]"},XC=function(e){if(e[0]==="!")return!0;for(var t=0,r=-2,i=-2,n=-2,s=-2,a=-2;t<e.length;){if(e[t]==="*"||e[t+1]==="?"&&/[\].+)]/.test(e[t])||i!==-1&&e[t]==="["&&e[t+1]!=="]"&&(i<t&&(i=e.indexOf("]",t)),i>t&&(a===-1||a>i||(a=e.indexOf("\\",t),a===-1||a>i)))||n!==-1&&e[t]==="{"&&e[t+1]!=="}"&&(n=e.indexOf("}",t),n>t&&(a=e.indexOf("\\",t),a===-1||a>n))||s!==-1&&e[t]==="("&&e[t+1]==="?"&&/[:!=]/.test(e[t+2])&&e[t+3]!==")"&&(s=e.indexOf(")",t),s>t&&(a=e.indexOf("\\",t),a===-1||a>s))||r!==-1&&e[t]==="("&&e[t+1]!=="|"&&(r<t&&(r=e.indexOf("|",t)),r!==-1&&e[r+1]!==")"&&(s=e.indexOf(")",r),s>r&&(a=e.indexOf("\\",r),a===-1||a>s))))return!0;if(e[t]==="\\"){var l=e[t+1];t+=2;var c=Hm[l];if(c){var h=e.indexOf(c,t);h!==-1&&(t=h+1)}if(e[t]==="!")return!0}else t++}return!1},ZC=function(e){if(e[0]==="!")return!0;for(var t=0;t<e.length;){if(/[*?{}()[\]]/.test(e[t]))return!0;if(e[t]==="\\"){var r=e[t+1];t+=2;var i=Hm[r];if(i){var n=e.indexOf(i,t);n!==-1&&(t=n+1)}if(e[t]==="!")return!0}else t++}return!1};jm.exports=function(t,r){if(typeof t!="string"||t==="")return!1;if(QC(t))return!0;var i=XC;return r&&r.strict===!1&&(i=ZC),i(t)}});var zm=W((VP,Um)=>{"use strict";var JC=gu(),ek=require("path").posix.dirname,tk=require("os").platform()==="win32",_u="/",rk=/\\/g,nk=/[\{\[].*[\}\]]$/,ik=/(^|[^\\])([\{\[]|\([^\)]+$)/,sk=/\\([\!\*\?\|\[\]\(\)\{\}])/g;Um.exports=function(t,r){var i=Object.assign({flipBackslashes:!0},r);i.flipBackslashes&&tk&&t.indexOf(_u)<0&&(t=t.replace(rk,_u)),nk.test(t)&&(t+=_u),t+="a";do t=ek(t);while(JC(t)||ik.test(t));return t.replace(sk,"$1")}});var ks=W(wt=>{"use strict";wt.isInteger=e=>typeof e=="number"?Number.isInteger(e):typeof e=="string"&&e.trim()!==""?Number.isInteger(Number(e)):!1;wt.find=(e,t)=>e.nodes.find(r=>r.type===t);wt.exceedsLimit=(e,t,r=1,i)=>i===!1||!wt.isInteger(e)||!wt.isInteger(t)?!1:(Number(t)-Number(e))/Number(r)>=i;wt.escapeNode=(e,t=0,r)=>{let i=e.nodes[t];i&&(r&&i.type===r||i.type==="open"||i.type==="close")&&i.escaped!==!0&&(i.value="\\"+i.value,i.escaped=!0)};wt.encloseBrace=e=>e.type!=="brace"?!1:e.commas>>0+e.ranges>>0===0?(e.invalid=!0,!0):!1;wt.isInvalidBrace=e=>e.type!=="brace"?!1:e.invalid===!0||e.dollar?!0:e.commas>>0+e.ranges>>0===0||e.open!==!0||e.close!==!0?(e.invalid=!0,!0):!1;wt.isOpenOrClose=e=>e.type==="open"||e.type==="close"?!0:e.open===!0||e.close===!0;wt.reduce=e=>e.reduce((t,r)=>(r.type==="text"&&t.push(r.value),r.type==="range"&&(r.type="text"),t),[]);wt.flatten=(...e)=>{let t=[],r=i=>{for(let n=0;n<i.length;n++){let s=i[n];if(Array.isArray(s)){r(s);continue}s!==void 0&&t.push(s)}return t};return r(e),t}});var Os=W((QP,Gm)=>{"use strict";var Km=ks();Gm.exports=(e,t={})=>{let r=(i,n={})=>{let s=t.escapeInvalid&&Km.isInvalidBrace(n),a=i.invalid===!0&&t.escapeInvalid===!0,l="";if(i.value)return(s||a)&&Km.isOpenOrClose(i)?"\\"+i.value:i.value;if(i.value)return i.value;if(i.nodes)for(let c of i.nodes)l+=r(c);return l};return r(e)}});var Ym=W((XP,Vm)=>{"use strict";Vm.exports=function(e){return typeof e=="number"?e-e===0:typeof e=="string"&&e.trim()!==""?Number.isFinite?Number.isFinite(+e):isFinite(+e):!1}});var ig=W((ZP,ng)=>{"use strict";var Qm=Ym(),Ir=(e,t,r)=>{if(Qm(e)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(t===void 0||e===t)return String(e);if(Qm(t)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let i={relaxZeros:!0,...r};typeof i.strictZeros=="boolean"&&(i.relaxZeros=i.strictZeros===!1);let n=String(i.relaxZeros),s=String(i.shorthand),a=String(i.capture),l=String(i.wrap),c=e+":"+t+"="+n+s+a+l;if(Ir.cache.hasOwnProperty(c))return Ir.cache[c].result;let h=Math.min(e,t),d=Math.max(e,t);if(Math.abs(h-d)===1){let v=e+"|"+t;return i.capture?`(${v})`:i.wrap===!1?v:`(?:${v})`}let p=rg(e)||rg(t),m={min:e,max:t,a:h,b:d},_=[],y=[];if(p&&(m.isPadded=p,m.maxLen=String(m.max).length),h<0){let v=d<0?Math.abs(d):1;y=Xm(v,Math.abs(h),m,i),h=m.a=0}return d>=0&&(_=Xm(h,d,m,i)),m.negatives=y,m.positives=_,m.result=ok(y,_,i),i.capture===!0?m.result=`(${m.result})`:i.wrap!==!1&&_.length+y.length>1&&(m.result=`(?:${m.result})`),Ir.cache[c]=m,m.result};function ok(e,t,r){let i=yu(e,t,"-",!1,r)||[],n=yu(t,e,"",!1,r)||[],s=yu(e,t,"-?",!0,r)||[];return i.concat(s).concat(n).join("|")}function ak(e,t){let r=1,i=1,n=Jm(e,r),s=new Set([t]);for(;e<=n&&n<=t;)s.add(n),r+=1,n=Jm(e,r);for(n=eg(t+1,i)-1;e<n&&n<=t;)s.add(n),i+=1,n=eg(t+1,i)-1;return s=[...s],s.sort(ck),s}function uk(e,t,r){if(e===t)return{pattern:e,count:[],digits:0};let i=lk(e,t),n=i.length,s="",a=0;for(let l=0;l<n;l++){let[c,h]=i[l];c===h?s+=c:c!=="0"||h!=="9"?s+=fk(c,h,r):a++}return a&&(s+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:s,count:[a],digits:n}}function Xm(e,t,r,i){let n=ak(e,t),s=[],a=e,l;for(let c=0;c<n.length;c++){let h=n[c],d=uk(String(a),String(h),i),p="";if(!r.isPadded&&l&&l.pattern===d.pattern){l.count.length>1&&l.count.pop(),l.count.push(d.count[0]),l.string=l.pattern+tg(l.count),a=h+1;continue}r.isPadded&&(p=hk(h,r,i)),d.string=p+d.pattern+tg(d.count),s.push(d),a=h+1,l=d}return s}function yu(e,t,r,i,n){let s=[];for(let a of e){let{string:l}=a;!i&&!Zm(t,"string",l)&&s.push(r+l),i&&Zm(t,"string",l)&&s.push(r+l)}return s}function lk(e,t){let r=[];for(let i=0;i<e.length;i++)r.push([e[i],t[i]]);return r}function ck(e,t){return e>t?1:t>e?-1:0}function Zm(e,t,r){return e.some(i=>i[t]===r)}function Jm(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function eg(e,t){return e-e%Math.pow(10,t)}function tg(e){let[t=0,r=""]=e;return r||t>1?`{${t+(r?","+r:"")}}`:""}function fk(e,t,r){return`[${e}${t-e===1?"":"-"}${t}]`}function rg(e){return/^-?(0+)\d/.test(e)}function hk(e,t,r){if(!t.isPadded)return e;let i=Math.abs(t.maxLen-String(e).length),n=r.relaxZeros!==!1;switch(i){case 0:return"";case 1:return n?"0?":"0";case 2:return n?"0{0,2}":"00";default:return n?`0{0,${i}}`:`0{${i}}`}}Ir.cache={};Ir.clearCache=()=>Ir.cache={};ng.exports=Ir});var wu=W((JP,fg)=>{"use strict";var dk=require("util"),og=ig(),sg=e=>e!==null&&typeof e=="object"&&!Array.isArray(e),pk=e=>t=>e===!0?Number(t):String(t),bu=e=>typeof e=="number"||typeof e=="string"&&e!=="",Vn=e=>Number.isInteger(+e),vu=e=>{let t=`${e}`,r=-1;if(t[0]==="-"&&(t=t.slice(1)),t==="0")return!1;for(;t[++r]==="0";);return r>0},mk=(e,t,r)=>typeof e=="string"||typeof t=="string"?!0:r.stringify===!0,gk=(e,t,r)=>{if(t>0){let i=e[0]==="-"?"-":"";i&&(e=e.slice(1)),e=i+e.padStart(i?t-1:t,"0")}return r===!1?String(e):e},Ps=(e,t)=>{let r=e[0]==="-"?"-":"";for(r&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return r?"-"+e:e},_k=(e,t,r)=>{e.negatives.sort((l,c)=>l<c?-1:l>c?1:0),e.positives.sort((l,c)=>l<c?-1:l>c?1:0);let i=t.capture?"":"?:",n="",s="",a;return e.positives.length&&(n=e.positives.map(l=>Ps(String(l),r)).join("|")),e.negatives.length&&(s=`-(${i}${e.negatives.map(l=>Ps(String(l),r)).join("|")})`),n&&s?a=`${n}|${s}`:a=n||s,t.wrap?`(${i}${a})`:a},ag=(e,t,r,i)=>{if(r)return og(e,t,{wrap:!1,...i});let n=String.fromCharCode(e);if(e===t)return n;let s=String.fromCharCode(t);return`[${n}-${s}]`},ug=(e,t,r)=>{if(Array.isArray(e)){let i=r.wrap===!0,n=r.capture?"":"?:";return i?`(${n}${e.join("|")})`:e.join("|")}return og(e,t,r)},lg=(...e)=>new RangeError("Invalid range arguments: "+dk.inspect(...e)),cg=(e,t,r)=>{if(r.strictRanges===!0)throw lg([e,t]);return[]},yk=(e,t)=>{if(t.strictRanges===!0)throw new TypeError(`Expected step "${e}" to be a number`);return[]},bk=(e,t,r=1,i={})=>{let n=Number(e),s=Number(t);if(!Number.isInteger(n)||!Number.isInteger(s)){if(i.strictRanges===!0)throw lg([e,t]);return[]}n===0&&(n=0),s===0&&(s=0);let a=n>s,l=String(e),c=String(t),h=String(r);r=Math.max(Math.abs(r),1);let d=vu(l)||vu(c)||vu(h),p=d?Math.max(l.length,c.length,h.length):0,m=d===!1&&mk(e,t,i)===!1,_=i.transform||pk(m);if(i.toRegex&&r===1)return ag(Ps(e,p),Ps(t,p),!0,i);let y={negatives:[],positives:[]},v=R=>y[R<0?"negatives":"positives"].push(Math.abs(R)),E=[],S=0;for(;a?n>=s:n<=s;)i.toRegex===!0&&r>1?v(n):E.push(gk(_(n,S),p,m)),n=a?n-r:n+r,S++;return i.toRegex===!0?r>1?_k(y,i,p):ug(E,null,{wrap:!1,...i}):E},vk=(e,t,r=1,i={})=>{if(!Vn(e)&&e.length>1||!Vn(t)&&t.length>1)return cg(e,t,i);let n=i.transform||(m=>String.fromCharCode(m)),s=`${e}`.charCodeAt(0),a=`${t}`.charCodeAt(0),l=s>a,c=Math.min(s,a),h=Math.max(s,a);if(i.toRegex&&r===1)return ag(c,h,!1,i);let d=[],p=0;for(;l?s>=a:s<=a;)d.push(n(s,p)),s=l?s-r:s+r,p++;return i.toRegex===!0?ug(d,null,{wrap:!1,options:i}):d},xs=(e,t,r,i={})=>{if(t==null&&bu(e))return[e];if(!bu(e)||!bu(t))return cg(e,t,i);if(typeof r=="function")return xs(e,t,1,{transform:r});if(sg(r))return xs(e,t,0,r);let n={...i};return n.capture===!0&&(n.wrap=!0),r=r||n.step||1,Vn(r)?Vn(e)&&Vn(t)?bk(e,t,r,n):vk(e,t,Math.max(Math.abs(r),1),n):r!=null&&!sg(r)?yk(r,n):xs(e,t,1,r)};fg.exports=xs});var pg=W((eL,dg)=>{"use strict";var wk=wu(),hg=ks(),Sk=(e,t={})=>{let r=(i,n={})=>{let s=hg.isInvalidBrace(n),a=i.invalid===!0&&t.escapeInvalid===!0,l=s===!0||a===!0,c=t.escapeInvalid===!0?"\\":"",h="";if(i.isOpen===!0)return c+i.value;if(i.isClose===!0)return console.log("node.isClose",c,i.value),c+i.value;if(i.type==="open")return l?c+i.value:"(";if(i.type==="close")return l?c+i.value:")";if(i.type==="comma")return i.prev.type==="comma"?"":l?i.value:"|";if(i.value)return i.value;if(i.nodes&&i.ranges>0){let d=hg.reduce(i.nodes),p=wk(...d,{...t,wrap:!1,toRegex:!0,strictZeros:!0});if(p.length!==0)return d.length>1&&p.length>1?`(${p})`:p}if(i.nodes)for(let d of i.nodes)h+=r(d,i);return h};return r(e)};dg.exports=Sk});var _g=W((tL,gg)=>{"use strict";var Ek=wu(),mg=Os(),fn=ks(),Fr=(e="",t="",r=!1)=>{let i=[];if(e=[].concat(e),t=[].concat(t),!t.length)return e;if(!e.length)return r?fn.flatten(t).map(n=>`{${n}}`):t;for(let n of e)if(Array.isArray(n))for(let s of n)i.push(Fr(s,t,r));else for(let s of t)r===!0&&typeof s=="string"&&(s=`{${s}}`),i.push(Array.isArray(s)?Fr(n,s,r):n+s);return fn.flatten(i)},Tk=(e,t={})=>{let r=t.rangeLimit===void 0?1e3:t.rangeLimit,i=(n,s={})=>{n.queue=[];let a=s,l=s.queue;for(;a.type!=="brace"&&a.type!=="root"&&a.parent;)a=a.parent,l=a.queue;if(n.invalid||n.dollar){l.push(Fr(l.pop(),mg(n,t)));return}if(n.type==="brace"&&n.invalid!==!0&&n.nodes.length===2){l.push(Fr(l.pop(),["{}"]));return}if(n.nodes&&n.ranges>0){let p=fn.reduce(n.nodes);if(fn.exceedsLimit(...p,t.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let m=Ek(...p,t);m.length===0&&(m=mg(n,t)),l.push(Fr(l.pop(),m)),n.nodes=[];return}let c=fn.encloseBrace(n),h=n.queue,d=n;for(;d.type!=="brace"&&d.type!=="root"&&d.parent;)d=d.parent,h=d.queue;for(let p=0;p<n.nodes.length;p++){let m=n.nodes[p];if(m.type==="comma"&&n.type==="brace"){p===1&&h.push(""),h.push("");continue}if(m.type==="close"){l.push(Fr(l.pop(),h,c));continue}if(m.value&&m.type!=="open"){h.push(Fr(h.pop(),m.value));continue}m.nodes&&i(m,n)}return h};return fn.flatten(i(e))};gg.exports=Tk});var bg=W((rL,yg)=>{"use strict";yg.exports={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var Tg=W((nL,Eg)=>{"use strict";var Rk=Os(),{MAX_LENGTH:vg,CHAR_BACKSLASH:Su,CHAR_BACKTICK:Ak,CHAR_COMMA:Ck,CHAR_DOT:kk,CHAR_LEFT_PARENTHESES:Ok,CHAR_RIGHT_PARENTHESES:xk,CHAR_LEFT_CURLY_BRACE:Pk,CHAR_RIGHT_CURLY_BRACE:Lk,CHAR_LEFT_SQUARE_BRACKET:wg,CHAR_RIGHT_SQUARE_BRACKET:Sg,CHAR_DOUBLE_QUOTE:Ik,CHAR_SINGLE_QUOTE:Fk,CHAR_NO_BREAK_SPACE:Nk,CHAR_ZERO_WIDTH_NOBREAK_SPACE:Bk}=bg(),Dk=(e,t={})=>{if(typeof e!="string")throw new TypeError("Expected a string");let r=t||{},i=typeof r.maxLength=="number"?Math.min(vg,r.maxLength):vg;if(e.length>i)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${i})`);let n={type:"root",input:e,nodes:[]},s=[n],a=n,l=n,c=0,h=e.length,d=0,p=0,m,_=()=>e[d++],y=v=>{if(v.type==="text"&&l.type==="dot"&&(l.type="text"),l&&l.type==="text"&&v.type==="text"){l.value+=v.value;return}return a.nodes.push(v),v.parent=a,v.prev=l,l=v,v};for(y({type:"bos"});d<h;)if(a=s[s.length-1],m=_(),!(m===Bk||m===Nk)){if(m===Su){y({type:"text",value:(t.keepEscaping?m:"")+_()});continue}if(m===Sg){y({type:"text",value:"\\"+m});continue}if(m===wg){c++;let v;for(;d<h&&(v=_());){if(m+=v,v===wg){c++;continue}if(v===Su){m+=_();continue}if(v===Sg&&(c--,c===0))break}y({type:"text",value:m});continue}if(m===Ok){a=y({type:"paren",nodes:[]}),s.push(a),y({type:"text",value:m});continue}if(m===xk){if(a.type!=="paren"){y({type:"text",value:m});continue}a=s.pop(),y({type:"text",value:m}),a=s[s.length-1];continue}if(m===Ik||m===Fk||m===Ak){let v=m,E;for(t.keepQuotes!==!0&&(m="");d<h&&(E=_());){if(E===Su){m+=E+_();continue}if(E===v){t.keepQuotes===!0&&(m+=E);break}m+=E}y({type:"text",value:m});continue}if(m===Pk){p++;let E={type:"brace",open:!0,close:!1,dollar:l.value&&l.value.slice(-1)==="$"||a.dollar===!0,depth:p,commas:0,ranges:0,nodes:[]};a=y(E),s.push(a),y({type:"open",value:m});continue}if(m===Lk){if(a.type!=="brace"){y({type:"text",value:m});continue}let v="close";a=s.pop(),a.close=!0,y({type:v,value:m}),p--,a=s[s.length-1];continue}if(m===Ck&&p>0){if(a.ranges>0){a.ranges=0;let v=a.nodes.shift();a.nodes=[v,{type:"text",value:Rk(a)}]}y({type:"comma",value:m}),a.commas++;continue}if(m===kk&&p>0&&a.commas===0){let v=a.nodes;if(p===0||v.length===0){y({type:"text",value:m});continue}if(l.type==="dot"){if(a.range=[],l.value+=m,l.type="range",a.nodes.length!==3&&a.nodes.length!==5){a.invalid=!0,a.ranges=0,l.type="text";continue}a.ranges++,a.args=[];continue}if(l.type==="range"){v.pop();let E=v[v.length-1];E.value+=l.value+m,l=E,a.ranges--;continue}y({type:"dot",value:m});continue}y({type:"text",value:m})}do if(a=s.pop(),a.type!=="root"){a.nodes.forEach(S=>{S.nodes||(S.type==="open"&&(S.isOpen=!0),S.type==="close"&&(S.isClose=!0),S.nodes||(S.type="text"),S.invalid=!0)});let v=s[s.length-1],E=v.nodes.indexOf(a);v.nodes.splice(E,1,...a.nodes)}while(s.length>0);return y({type:"eos"}),n};Eg.exports=Dk});var Cg=W((iL,Ag)=>{"use strict";var Rg=Os(),Mk=pg(),qk=_g(),$k=Tg(),dt=(e,t={})=>{let r=[];if(Array.isArray(e))for(let i of e){let n=dt.create(i,t);Array.isArray(n)?r.push(...n):r.push(n)}else r=[].concat(dt.create(e,t));return t&&t.expand===!0&&t.nodupes===!0&&(r=[...new Set(r)]),r};dt.parse=(e,t={})=>$k(e,t);dt.stringify=(e,t={})=>Rg(typeof e=="string"?dt.parse(e,t):e,t);dt.compile=(e,t={})=>(typeof e=="string"&&(e=dt.parse(e,t)),Mk(e,t));dt.expand=(e,t={})=>{typeof e=="string"&&(e=dt.parse(e,t));let r=qk(e,t);return t.noempty===!0&&(r=r.filter(Boolean)),t.nodupes===!0&&(r=[...new Set(r)]),r};dt.create=(e,t={})=>e===""||e.length<3?[e]:t.expand!==!0?dt.compile(e,t):dt.expand(e,t);Ag.exports=dt});var kg=W((sL,Wk)=>{Wk.exports=["3dm","3ds","3g2","3gp","7z","a","aac","adp","afdesign","afphoto","afpub","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","odp","ods","odt","oga","ogg","ogv","otf","ott","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"]});var xg=W((oL,Og)=>{Og.exports=kg()});var Lg=W((aL,Pg)=>{"use strict";var Hk=require("path"),jk=xg(),Uk=new Set(jk);Pg.exports=e=>Uk.has(Hk.extname(e).slice(1).toLowerCase())});var Ls=W(z=>{"use strict";var{sep:zk}=require("path"),{platform:Eu}=process,Kk=require("os");z.EV_ALL="all";z.EV_READY="ready";z.EV_ADD="add";z.EV_CHANGE="change";z.EV_ADD_DIR="addDir";z.EV_UNLINK="unlink";z.EV_UNLINK_DIR="unlinkDir";z.EV_RAW="raw";z.EV_ERROR="error";z.STR_DATA="data";z.STR_END="end";z.STR_CLOSE="close";z.FSEVENT_CREATED="created";z.FSEVENT_MODIFIED="modified";z.FSEVENT_DELETED="deleted";z.FSEVENT_MOVED="moved";z.FSEVENT_CLONED="cloned";z.FSEVENT_UNKNOWN="unknown";z.FSEVENT_FLAG_MUST_SCAN_SUBDIRS=1;z.FSEVENT_TYPE_FILE="file";z.FSEVENT_TYPE_DIRECTORY="directory";z.FSEVENT_TYPE_SYMLINK="symlink";z.KEY_LISTENERS="listeners";z.KEY_ERR="errHandlers";z.KEY_RAW="rawEmitters";z.HANDLER_KEYS=[z.KEY_LISTENERS,z.KEY_ERR,z.KEY_RAW];z.DOT_SLASH=`.${zk}`;z.BACK_SLASH_RE=/\\/g;z.DOUBLE_SLASH_RE=/\/\//;z.SLASH_OR_BACK_SLASH_RE=/[/\\]/;z.DOT_RE=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/;z.REPLACER_RE=/^\.[/\\]/;z.SLASH="/";z.SLASH_SLASH="//";z.BRACE_START="{";z.BANG="!";z.ONE_DOT=".";z.TWO_DOTS="..";z.STAR="*";z.GLOBSTAR="**";z.ROOT_GLOBSTAR="/**/*";z.SLASH_GLOBSTAR="/**";z.DIR_SUFFIX="Dir";z.ANYMATCH_OPTS={dot:!0};z.STRING_TYPE="string";z.FUNCTION_TYPE="function";z.EMPTY_STR="";z.EMPTY_FN=()=>{};z.IDENTITY_FN=e=>e;z.isWindows=Eu==="win32";z.isMacos=Eu==="darwin";z.isLinux=Eu==="linux";z.isIBMi=Kk.type()==="OS400"});var Mg=W((lL,Dg)=>{"use strict";var Xt=require("fs"),Me=require("path"),{promisify:Zn}=require("util"),Gk=Lg(),{isWindows:Vk,isLinux:Yk,EMPTY_FN:Qk,EMPTY_STR:Xk,KEY_LISTENERS:hn,KEY_ERR:Tu,KEY_RAW:Yn,HANDLER_KEYS:Zk,EV_CHANGE:Fs,EV_ADD:Is,EV_ADD_DIR:Jk,EV_ERROR:Fg,STR_DATA:eO,STR_END:tO,BRACE_START:rO,STAR:nO}=Ls(),iO="watch",sO=Zn(Xt.open),Ng=Zn(Xt.stat),oO=Zn(Xt.lstat),aO=Zn(Xt.close),Ru=Zn(Xt.realpath),uO={lstat:oO,stat:Ng},Cu=(e,t)=>{e instanceof Set?e.forEach(t):t(e)},Qn=(e,t,r)=>{let i=e[t];i instanceof Set||(e[t]=i=new Set([i])),i.add(r)},lO=e=>t=>{let r=e[t];r instanceof Set?r.clear():delete e[t]},Xn=(e,t,r)=>{let i=e[t];i instanceof Set?i.delete(r):i===r&&delete e[t]},Bg=e=>e instanceof Set?e.size===0:!e,Ns=new Map;function Ig(e,t,r,i,n){let s=(a,l)=>{r(e),n(a,l,{watchedPath:e}),l&&e!==l&&Bs(Me.resolve(e,l),hn,Me.join(e,l))};try{return Xt.watch(e,t,s)}catch(a){i(a)}}var Bs=(e,t,r,i,n)=>{let s=Ns.get(e);s&&Cu(s[t],a=>{a(r,i,n)})},cO=(e,t,r,i)=>{let{listener:n,errHandler:s,rawEmitter:a}=i,l=Ns.get(t),c;if(!r.persistent)return c=Ig(e,r,n,s,a),c.close.bind(c);if(l)Qn(l,hn,n),Qn(l,Tu,s),Qn(l,Yn,a);else{if(c=Ig(e,r,Bs.bind(null,t,hn),s,Bs.bind(null,t,Yn)),!c)return;c.on(Fg,async h=>{let d=Bs.bind(null,t,Tu);if(l.watcherUnusable=!0,Vk&&h.code==="EPERM")try{let p=await sO(e,"r");await aO(p),d(h)}catch{}else d(h)}),l={listeners:n,errHandlers:s,rawEmitters:a,watcher:c},Ns.set(t,l)}return()=>{Xn(l,hn,n),Xn(l,Tu,s),Xn(l,Yn,a),Bg(l.listeners)&&(l.watcher.close(),Ns.delete(t),Zk.forEach(lO(l)),l.watcher=void 0,Object.freeze(l))}},Au=new Map,fO=(e,t,r,i)=>{let{listener:n,rawEmitter:s}=i,a=Au.get(t),l=new Set,c=new Set,h=a&&a.options;return h&&(h.persistent<r.persistent||h.interval>r.interval)&&(l=a.listeners,c=a.rawEmitters,Xt.unwatchFile(t),a=void 0),a?(Qn(a,hn,n),Qn(a,Yn,s)):(a={listeners:n,rawEmitters:s,options:r,watcher:Xt.watchFile(t,r,(d,p)=>{Cu(a.rawEmitters,_=>{_(Fs,t,{curr:d,prev:p})});let m=d.mtimeMs;(d.size!==p.size||m>p.mtimeMs||m===0)&&Cu(a.listeners,_=>_(e,d))})},Au.set(t,a)),()=>{Xn(a,hn,n),Xn(a,Yn,s),Bg(a.listeners)&&(Au.delete(t),Xt.unwatchFile(t),a.options=a.watcher=void 0,Object.freeze(a))}},ku=class{constructor(t){this.fsw=t,this._boundHandleError=r=>t._handleError(r)}_watchWithNodeFs(t,r){let i=this.fsw.options,n=Me.dirname(t),s=Me.basename(t);this.fsw._getWatchedDir(n).add(s);let l=Me.resolve(t),c={persistent:i.persistent};r||(r=Qk);let h;return i.usePolling?(c.interval=i.enableBinaryInterval&&Gk(s)?i.binaryInterval:i.interval,h=fO(t,l,c,{listener:r,rawEmitter:this.fsw._emitRaw})):h=cO(t,l,c,{listener:r,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw}),h}_handleFile(t,r,i){if(this.fsw.closed)return;let n=Me.dirname(t),s=Me.basename(t),a=this.fsw._getWatchedDir(n),l=r;if(a.has(s))return;let c=async(d,p)=>{if(this.fsw._throttle(iO,t,5)){if(!p||p.mtimeMs===0)try{let m=await Ng(t);if(this.fsw.closed)return;let _=m.atimeMs,y=m.mtimeMs;(!_||_<=y||y!==l.mtimeMs)&&this.fsw._emit(Fs,t,m),Yk&&l.ino!==m.ino?(this.fsw._closeFile(d),l=m,this.fsw._addPathCloser(d,this._watchWithNodeFs(t,c))):l=m}catch{this.fsw._remove(n,s)}else if(a.has(s)){let m=p.atimeMs,_=p.mtimeMs;(!m||m<=_||_!==l.mtimeMs)&&this.fsw._emit(Fs,t,p),l=p}}},h=this._watchWithNodeFs(t,c);if(!(i&&this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(t)){if(!this.fsw._throttle(Is,t,0))return;this.fsw._emit(Is,t,r)}return h}async _handleSymlink(t,r,i,n){if(this.fsw.closed)return;let s=t.fullPath,a=this.fsw._getWatchedDir(r);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();let l;try{l=await Ru(i)}catch{return this.fsw._emitReady(),!0}return this.fsw.closed?void 0:(a.has(n)?this.fsw._symlinkPaths.get(s)!==l&&(this.fsw._symlinkPaths.set(s,l),this.fsw._emit(Fs,i,t.stats)):(a.add(n),this.fsw._symlinkPaths.set(s,l),this.fsw._emit(Is,i,t.stats)),this.fsw._emitReady(),!0)}if(this.fsw._symlinkPaths.has(s))return!0;this.fsw._symlinkPaths.set(s,!0)}_handleRead(t,r,i,n,s,a,l){if(t=Me.join(t,Xk),!i.hasGlob&&(l=this.fsw._throttle("readdir",t,1e3),!l))return;let c=this.fsw._getWatchedDir(i.path),h=new Set,d=this.fsw._readdirp(t,{fileFilter:p=>i.filterPath(p),directoryFilter:p=>i.filterDir(p),depth:0}).on(eO,async p=>{if(this.fsw.closed){d=void 0;return}let m=p.path,_=Me.join(t,m);if(h.add(m),!(p.stats.isSymbolicLink()&&await this._handleSymlink(p,t,_,m))){if(this.fsw.closed){d=void 0;return}(m===n||!n&&!c.has(m))&&(this.fsw._incrReadyCount(),_=Me.join(s,Me.relative(s,_)),this._addToNodeFs(_,r,i,a+1))}}).on(Fg,this._boundHandleError);return new Promise(p=>d.once(tO,()=>{if(this.fsw.closed){d=void 0;return}let m=l?l.clear():!1;p(),c.getChildren().filter(_=>_!==t&&!h.has(_)&&(!i.hasGlob||i.filterPath({fullPath:Me.resolve(t,_)}))).forEach(_=>{this.fsw._remove(t,_)}),d=void 0,m&&this._handleRead(t,!1,i,n,s,a,l)}))}async _handleDir(t,r,i,n,s,a,l){let c=this.fsw._getWatchedDir(Me.dirname(t)),h=c.has(Me.basename(t));!(i&&this.fsw.options.ignoreInitial)&&!s&&!h&&(!a.hasGlob||a.globFilter(t))&&this.fsw._emit(Jk,t,r),c.add(Me.basename(t)),this.fsw._getWatchedDir(t);let d,p,m=this.fsw.options.depth;if((m==null||n<=m)&&!this.fsw._symlinkPaths.has(l)){if(!s&&(await this._handleRead(t,i,a,s,t,n,d),this.fsw.closed))return;p=this._watchWithNodeFs(t,(_,y)=>{y&&y.mtimeMs===0||this._handleRead(_,!1,a,s,t,n,d)})}return p}async _addToNodeFs(t,r,i,n,s){let a=this.fsw._emitReady;if(this.fsw._isIgnored(t)||this.fsw.closed)return a(),!1;let l=this.fsw._getWatchHelpers(t,n);!l.hasGlob&&i&&(l.hasGlob=i.hasGlob,l.globFilter=i.globFilter,l.filterPath=c=>i.filterPath(c),l.filterDir=c=>i.filterDir(c));try{let c=await uO[l.statMethod](l.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(l.watchPath,c))return a(),!1;let h=this.fsw.options.followSymlinks&&!t.includes(nO)&&!t.includes(rO),d;if(c.isDirectory()){let p=Me.resolve(t),m=h?await Ru(t):t;if(this.fsw.closed||(d=await this._handleDir(l.watchPath,c,r,n,s,l,m),this.fsw.closed))return;p!==m&&m!==void 0&&this.fsw._symlinkPaths.set(p,m)}else if(c.isSymbolicLink()){let p=h?await Ru(t):t;if(this.fsw.closed)return;let m=Me.dirname(l.watchPath);if(this.fsw._getWatchedDir(m).add(l.watchPath),this.fsw._emit(Is,l.watchPath,c),d=await this._handleDir(m,c,r,n,t,l,p),this.fsw.closed)return;p!==void 0&&this.fsw._symlinkPaths.set(Me.resolve(t),p)}else d=this._handleFile(l.watchPath,c,r);return a(),this.fsw._addPathCloser(t,d),!1}catch(c){if(this.fsw._handleError(c))return a(),t}}};Dg.exports=ku});var zg=W((cL,Bu)=>{"use strict";var Fu=require("fs"),qe=require("path"),{promisify:Nu}=require("util"),dn;try{dn=require("fsevents")}catch(e){process.env.CHOKIDAR_PRINT_FSEVENTS_REQUIRE_ERROR&&console.error(e)}if(dn){let e=process.version.match(/v(\d+)\.(\d+)/);if(e&&e[1]&&e[2]){let t=Number.parseInt(e[1],10),r=Number.parseInt(e[2],10);t===8&&r<16&&(dn=void 0)}}var{EV_ADD:Ou,EV_CHANGE:hO,EV_ADD_DIR:qg,EV_UNLINK:Ds,EV_ERROR:dO,STR_DATA:pO,STR_END:mO,FSEVENT_CREATED:gO,FSEVENT_MODIFIED:_O,FSEVENT_DELETED:yO,FSEVENT_MOVED:bO,FSEVENT_UNKNOWN:vO,FSEVENT_FLAG_MUST_SCAN_SUBDIRS:wO,FSEVENT_TYPE_FILE:SO,FSEVENT_TYPE_DIRECTORY:Jn,FSEVENT_TYPE_SYMLINK:Ug,ROOT_GLOBSTAR:$g,DIR_SUFFIX:EO,DOT_SLASH:Wg,FUNCTION_TYPE:xu,EMPTY_FN:TO,IDENTITY_FN:RO}=Ls(),AO=e=>isNaN(e)?{}:{depth:e},Lu=Nu(Fu.stat),CO=Nu(Fu.lstat),Hg=Nu(Fu.realpath),kO={stat:Lu,lstat:CO},Nr=new Map,OO=10,xO=new Set([69888,70400,71424,72704,73472,131328,131840,262912]),PO=(e,t)=>({stop:dn.watch(e,t)});function LO(e,t,r,i){let n=qe.extname(t)?qe.dirname(t):t,s=qe.dirname(n),a=Nr.get(n);IO(s)&&(n=s);let l=qe.resolve(e),c=l!==t,h=(p,m,_)=>{c&&(p=p.replace(t,l)),(p===l||!p.indexOf(l+qe.sep))&&r(p,m,_)},d=!1;for(let p of Nr.keys())if(t.indexOf(qe.resolve(p)+qe.sep)===0){n=p,a=Nr.get(n),d=!0;break}return a||d?a.listeners.add(h):(a={listeners:new Set([h]),rawEmitter:i,watcher:PO(n,(p,m)=>{if(!a.listeners.size||m&wO)return;let _=dn.getInfo(p,m);a.listeners.forEach(y=>{y(p,m,_)}),a.rawEmitter(_.event,p,_)})},Nr.set(n,a)),()=>{let p=a.listeners;if(p.delete(h),!p.size&&(Nr.delete(n),a.watcher))return a.watcher.stop().then(()=>{a.rawEmitter=a.watcher=void 0,Object.freeze(a)})}}var IO=e=>{let t=0;for(let r of Nr.keys())if(r.indexOf(e)===0&&(t++,t>=OO))return!0;return!1},FO=()=>dn&&Nr.size<128,Pu=(e,t)=>{let r=0;for(;!e.indexOf(t)&&(e=qe.dirname(e))!==t;)r++;return r},jg=(e,t)=>e.type===Jn&&t.isDirectory()||e.type===Ug&&t.isSymbolicLink()||e.type===SO&&t.isFile(),Iu=class{constructor(t){this.fsw=t}checkIgnored(t,r){let i=this.fsw._ignoredPaths;if(this.fsw._isIgnored(t,r))return i.add(t),r&&r.isDirectory()&&i.add(t+$g),!0;i.delete(t),i.delete(t+$g)}addOrChange(t,r,i,n,s,a,l,c){let h=s.has(a)?hO:Ou;this.handleEvent(h,t,r,i,n,s,a,l,c)}async checkExists(t,r,i,n,s,a,l,c){try{let h=await Lu(t);if(this.fsw.closed)return;jg(l,h)?this.addOrChange(t,r,i,n,s,a,l,c):this.handleEvent(Ds,t,r,i,n,s,a,l,c)}catch(h){h.code==="EACCES"?this.addOrChange(t,r,i,n,s,a,l,c):this.handleEvent(Ds,t,r,i,n,s,a,l,c)}}handleEvent(t,r,i,n,s,a,l,c,h){if(!(this.fsw.closed||this.checkIgnored(r)))if(t===Ds){let d=c.type===Jn;(d||a.has(l))&&this.fsw._remove(s,l,d)}else{if(t===Ou){if(c.type===Jn&&this.fsw._getWatchedDir(r),c.type===Ug&&h.followSymlinks){let p=h.depth===void 0?void 0:Pu(i,n)+1;return this._addToFsEvents(r,!1,!0,p)}this.fsw._getWatchedDir(s).add(l)}let d=c.type===Jn?t+EO:t;this.fsw._emit(d,r),d===qg&&this._addToFsEvents(r,!1,!0)}}_watchWithFsEvents(t,r,i,n){if(this.fsw.closed||this.fsw._isIgnored(t))return;let s=this.fsw.options,l=LO(t,r,async(c,h,d)=>{if(this.fsw.closed||s.depth!==void 0&&Pu(c,r)>s.depth)return;let p=i(qe.join(t,qe.relative(t,c)));if(n&&!n(p))return;let m=qe.dirname(p),_=qe.basename(p),y=this.fsw._getWatchedDir(d.type===Jn?p:m);if(xO.has(h)||d.event===vO)if(typeof s.ignored===xu){let v;try{v=await Lu(p)}catch{}if(this.fsw.closed||this.checkIgnored(p,v))return;jg(d,v)?this.addOrChange(p,c,r,m,y,_,d,s):this.handleEvent(Ds,p,c,r,m,y,_,d,s)}else this.checkExists(p,c,r,m,y,_,d,s);else switch(d.event){case gO:case _O:return this.addOrChange(p,c,r,m,y,_,d,s);case yO:case bO:return this.checkExists(p,c,r,m,y,_,d,s)}},this.fsw._emitRaw);return this.fsw._emitReady(),l}async _handleFsEventsSymlink(t,r,i,n){if(!(this.fsw.closed||this.fsw._symlinkPaths.has(r))){this.fsw._symlinkPaths.set(r,!0),this.fsw._incrReadyCount();try{let s=await Hg(t);if(this.fsw.closed)return;if(this.fsw._isIgnored(s))return this.fsw._emitReady();this.fsw._incrReadyCount(),this._addToFsEvents(s||t,a=>{let l=t;return s&&s!==Wg?l=a.replace(s,t):a!==Wg&&(l=qe.join(t,a)),i(l)},!1,n)}catch(s){if(this.fsw._handleError(s))return this.fsw._emitReady()}}}emitAdd(t,r,i,n,s){let a=i(t),l=r.isDirectory(),c=this.fsw._getWatchedDir(qe.dirname(a)),h=qe.basename(a);l&&this.fsw._getWatchedDir(a),!c.has(h)&&(c.add(h),(!n.ignoreInitial||s===!0)&&this.fsw._emit(l?qg:Ou,a,r))}initWatch(t,r,i,n){if(this.fsw.closed)return;let s=this._watchWithFsEvents(i.watchPath,qe.resolve(t||i.watchPath),n,i.globFilter);this.fsw._addPathCloser(r,s)}async _addToFsEvents(t,r,i,n){if(this.fsw.closed)return;let s=this.fsw.options,a=typeof r===xu?r:RO,l=this.fsw._getWatchHelpers(t);try{let c=await kO[l.statMethod](l.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(l.watchPath,c))throw null;if(c.isDirectory()){if(l.globFilter||this.emitAdd(a(t),c,a,s,i),n&&n>s.depth)return;this.fsw._readdirp(l.watchPath,{fileFilter:h=>l.filterPath(h),directoryFilter:h=>l.filterDir(h),...AO(s.depth-(n||0))}).on(pO,h=>{if(this.fsw.closed||h.stats.isDirectory()&&!l.filterPath(h))return;let d=qe.join(l.watchPath,h.path),{fullPath:p}=h;if(l.followSymlinks&&h.stats.isSymbolicLink()){let m=s.depth===void 0?void 0:Pu(d,qe.resolve(l.watchPath))+1;this._handleFsEventsSymlink(d,p,a,m)}else this.emitAdd(d,h.stats,a,s,i)}).on(dO,TO).on(mO,()=>{this.fsw._emitReady()})}else this.emitAdd(l.watchPath,c,a,s,i),this.fsw._emitReady()}catch(c){(!c||this.fsw._handleError(c))&&(this.fsw._emitReady(),this.fsw._emitReady())}if(s.persistent&&i!==!0)if(typeof r===xu)this.initWatch(void 0,t,l,a);else{let c;try{c=await Hg(l.watchPath)}catch{}this.initWatch(c,t,l,a)}}};Bu.exports=Iu;Bu.exports.canUse=FO});var Zu=W(Xu=>{"use strict";var{EventEmitter:NO}=require("events"),Yu=require("fs"),me=require("path"),{promisify:Zg}=require("util"),BO=Lm(),Hu=qm().default,DO=zm(),Du=gu(),MO=Cg(),qO=pu(),$O=Mg(),Kg=zg(),{EV_ALL:Mu,EV_READY:WO,EV_ADD:Ms,EV_CHANGE:ei,EV_UNLINK:Gg,EV_ADD_DIR:HO,EV_UNLINK_DIR:jO,EV_RAW:UO,EV_ERROR:qu,STR_CLOSE:zO,STR_END:KO,BACK_SLASH_RE:GO,DOUBLE_SLASH_RE:Vg,SLASH_OR_BACK_SLASH_RE:VO,DOT_RE:YO,REPLACER_RE:QO,SLASH:$u,SLASH_SLASH:XO,BRACE_START:ZO,BANG:ju,ONE_DOT:Jg,TWO_DOTS:JO,GLOBSTAR:e0,SLASH_GLOBSTAR:Wu,ANYMATCH_OPTS:Uu,STRING_TYPE:Qu,FUNCTION_TYPE:t0,EMPTY_STR:zu,EMPTY_FN:r0,isWindows:n0,isMacos:i0,isIBMi:s0}=Ls(),o0=Zg(Yu.stat),a0=Zg(Yu.readdir),Ku=(e=[])=>Array.isArray(e)?e:[e],e_=(e,t=[])=>(e.forEach(r=>{Array.isArray(r)?e_(r,t):t.push(r)}),t),Yg=e=>{let t=e_(Ku(e));if(!t.every(r=>typeof r===Qu))throw new TypeError(`Non-string provided as watch path: ${t}`);return t.map(t_)},Qg=e=>{let t=e.replace(GO,$u),r=!1;for(t.startsWith(XO)&&(r=!0);t.match(Vg);)t=t.replace(Vg,$u);return r&&(t=$u+t),t},t_=e=>Qg(me.normalize(Qg(e))),Xg=(e=zu)=>t=>typeof t!==Qu?t:t_(me.isAbsolute(t)?t:me.join(e,t)),u0=(e,t)=>me.isAbsolute(e)?e:e.startsWith(ju)?ju+me.join(t,e.slice(1)):me.join(t,e),Ct=(e,t)=>e[t]===void 0,Gu=class{constructor(t,r){this.path=t,this._removeWatcher=r,this.items=new Set}add(t){let{items:r}=this;r&&t!==Jg&&t!==JO&&r.add(t)}async remove(t){let{items:r}=this;if(!r||(r.delete(t),r.size>0))return;let i=this.path;try{await a0(i)}catch{this._removeWatcher&&this._removeWatcher(me.dirname(i),me.basename(i))}}has(t){let{items:r}=this;if(r)return r.has(t)}getChildren(){let{items:t}=this;if(t)return[...t.values()]}dispose(){this.items.clear(),delete this.path,delete this._removeWatcher,delete this.items,Object.freeze(this)}},l0="stat",c0="lstat",Vu=class{constructor(t,r,i,n){this.fsw=n,this.path=t=t.replace(QO,zu),this.watchPath=r,this.fullWatchPath=me.resolve(r),this.hasGlob=r!==t,t===zu&&(this.hasGlob=!1),this.globSymlink=this.hasGlob&&i?void 0:!1,this.globFilter=this.hasGlob?Hu(t,void 0,Uu):!1,this.dirParts=this.getDirParts(t),this.dirParts.forEach(s=>{s.length>1&&s.pop()}),this.followSymlinks=i,this.statMethod=i?l0:c0}checkGlobSymlink(t){return this.globSymlink===void 0&&(this.globSymlink=t.fullParentDir===this.fullWatchPath?!1:{realPath:t.fullParentDir,linkPath:this.fullWatchPath}),this.globSymlink?t.fullPath.replace(this.globSymlink.realPath,this.globSymlink.linkPath):t.fullPath}entryPath(t){return me.join(this.watchPath,me.relative(this.watchPath,this.checkGlobSymlink(t)))}filterPath(t){let{stats:r}=t;if(r&&r.isSymbolicLink())return this.filterDir(t);let i=this.entryPath(t);return(this.hasGlob&&typeof this.globFilter===t0?this.globFilter(i):!0)&&this.fsw._isntIgnored(i,r)&&this.fsw._hasReadPermissions(r)}getDirParts(t){if(!this.hasGlob)return[];let r=[];return(t.includes(ZO)?MO.expand(t):[t]).forEach(n=>{r.push(me.relative(this.watchPath,n).split(VO))}),r}filterDir(t){if(this.hasGlob){let r=this.getDirParts(this.checkGlobSymlink(t)),i=!1;this.unmatchedGlob=!this.dirParts.some(n=>n.every((s,a)=>(s===e0&&(i=!0),i||!r[0][a]||Hu(s,r[0][a],Uu))))}return!this.unmatchedGlob&&this.fsw._isntIgnored(this.entryPath(t),t.stats)}},qs=class extends NO{constructor(t){super();let r={};t&&Object.assign(r,t),this._watched=new Map,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._symlinkPaths=new Map,this._streams=new Set,this.closed=!1,Ct(r,"persistent")&&(r.persistent=!0),Ct(r,"ignoreInitial")&&(r.ignoreInitial=!1),Ct(r,"ignorePermissionErrors")&&(r.ignorePermissionErrors=!1),Ct(r,"interval")&&(r.interval=100),Ct(r,"binaryInterval")&&(r.binaryInterval=300),Ct(r,"disableGlobbing")&&(r.disableGlobbing=!1),r.enableBinaryInterval=r.binaryInterval!==r.interval,Ct(r,"useFsEvents")&&(r.useFsEvents=!r.usePolling),Kg.canUse()||(r.useFsEvents=!1),Ct(r,"usePolling")&&!r.useFsEvents&&(r.usePolling=i0),s0&&(r.usePolling=!0);let n=process.env.CHOKIDAR_USEPOLLING;if(n!==void 0){let c=n.toLowerCase();c==="false"||c==="0"?r.usePolling=!1:c==="true"||c==="1"?r.usePolling=!0:r.usePolling=!!c}let s=process.env.CHOKIDAR_INTERVAL;s&&(r.interval=Number.parseInt(s,10)),Ct(r,"atomic")&&(r.atomic=!r.usePolling&&!r.useFsEvents),r.atomic&&(this._pendingUnlinks=new Map),Ct(r,"followSymlinks")&&(r.followSymlinks=!0),Ct(r,"awaitWriteFinish")&&(r.awaitWriteFinish=!1),r.awaitWriteFinish===!0&&(r.awaitWriteFinish={});let a=r.awaitWriteFinish;a&&(a.stabilityThreshold||(a.stabilityThreshold=2e3),a.pollInterval||(a.pollInterval=100),this._pendingWrites=new Map),r.ignored&&(r.ignored=Ku(r.ignored));let l=0;this._emitReady=()=>{l++,l>=this._readyCount&&(this._emitReady=r0,this._readyEmitted=!0,process.nextTick(()=>this.emit(WO)))},this._emitRaw=(...c)=>this.emit(UO,...c),this._readyEmitted=!1,this.options=r,r.useFsEvents?this._fsEventsHandler=new Kg(this):this._nodeFsHandler=new $O(this),Object.freeze(r)}add(t,r,i){let{cwd:n,disableGlobbing:s}=this.options;this.closed=!1;let a=Yg(t);return n&&(a=a.map(l=>{let c=u0(l,n);return s||!Du(l)?c:qO(c)})),a=a.filter(l=>l.startsWith(ju)?(this._ignoredPaths.add(l.slice(1)),!1):(this._ignoredPaths.delete(l),this._ignoredPaths.delete(l+Wu),this._userIgnored=void 0,!0)),this.options.useFsEvents&&this._fsEventsHandler?(this._readyCount||(this._readyCount=a.length),this.options.persistent&&(this._readyCount+=a.length),a.forEach(l=>this._fsEventsHandler._addToFsEvents(l))):(this._readyCount||(this._readyCount=0),this._readyCount+=a.length,Promise.all(a.map(async l=>{let c=await this._nodeFsHandler._addToNodeFs(l,!i,0,0,r);return c&&this._emitReady(),c})).then(l=>{this.closed||l.filter(c=>c).forEach(c=>{this.add(me.dirname(c),me.basename(r||c))})})),this}unwatch(t){if(this.closed)return this;let r=Yg(t),{cwd:i}=this.options;return r.forEach(n=>{!me.isAbsolute(n)&&!this._closers.has(n)&&(i&&(n=me.join(i,n)),n=me.resolve(n)),this._closePath(n),this._ignoredPaths.add(n),this._watched.has(n)&&this._ignoredPaths.add(n+Wu),this._userIgnored=void 0}),this}close(){if(this.closed)return this._closePromise;this.closed=!0,this.removeAllListeners();let t=[];return this._closers.forEach(r=>r.forEach(i=>{let n=i();n instanceof Promise&&t.push(n)})),this._streams.forEach(r=>r.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach(r=>r.dispose()),["closers","watched","streams","symlinkPaths","throttled"].forEach(r=>{this[`_${r}`].clear()}),this._closePromise=t.length?Promise.all(t).then(()=>{}):Promise.resolve(),this._closePromise}getWatched(){let t={};return this._watched.forEach((r,i)=>{let n=this.options.cwd?me.relative(this.options.cwd,i):i;t[n||Jg]=r.getChildren().sort()}),t}emitWithAll(t,r){this.emit(...r),t!==qu&&this.emit(Mu,...r)}async _emit(t,r,i,n,s){if(this.closed)return;let a=this.options;n0&&(r=me.normalize(r)),a.cwd&&(r=me.relative(a.cwd,r));let l=[t,r];s!==void 0?l.push(i,n,s):n!==void 0?l.push(i,n):i!==void 0&&l.push(i);let c=a.awaitWriteFinish,h;if(c&&(h=this._pendingWrites.get(r)))return h.lastChange=new Date,this;if(a.atomic){if(t===Gg)return this._pendingUnlinks.set(r,l),setTimeout(()=>{this._pendingUnlinks.forEach((d,p)=>{this.emit(...d),this.emit(Mu,...d),this._pendingUnlinks.delete(p)})},typeof a.atomic=="number"?a.atomic:100),this;t===Ms&&this._pendingUnlinks.has(r)&&(t=l[0]=ei,this._pendingUnlinks.delete(r))}if(c&&(t===Ms||t===ei)&&this._readyEmitted){let d=(p,m)=>{p?(t=l[0]=qu,l[1]=p,this.emitWithAll(t,l)):m&&(l.length>2?l[2]=m:l.push(m),this.emitWithAll(t,l))};return this._awaitWriteFinish(r,c.stabilityThreshold,t,d),this}if(t===ei&&!this._throttle(ei,r,50))return this;if(a.alwaysStat&&i===void 0&&(t===Ms||t===HO||t===ei)){let d=a.cwd?me.join(a.cwd,r):r,p;try{p=await o0(d)}catch{}if(!p||this.closed)return;l.push(p)}return this.emitWithAll(t,l),this}_handleError(t){let r=t&&t.code;return t&&r!=="ENOENT"&&r!=="ENOTDIR"&&(!this.options.ignorePermissionErrors||r!=="EPERM"&&r!=="EACCES")&&this.emit(qu,t),t||this.closed}_throttle(t,r,i){this._throttled.has(t)||this._throttled.set(t,new Map);let n=this._throttled.get(t),s=n.get(r);if(s)return s.count++,!1;let a,l=()=>{let h=n.get(r),d=h?h.count:0;return n.delete(r),clearTimeout(a),h&&clearTimeout(h.timeoutObject),d};a=setTimeout(l,i);let c={timeoutObject:a,clear:l,count:0};return n.set(r,c),c}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(t,r,i,n){let s,a=t;this.options.cwd&&!me.isAbsolute(t)&&(a=me.join(this.options.cwd,t));let l=new Date,c=h=>{Yu.stat(a,(d,p)=>{if(d||!this._pendingWrites.has(t)){d&&d.code!=="ENOENT"&&n(d);return}let m=Number(new Date);h&&p.size!==h.size&&(this._pendingWrites.get(t).lastChange=m);let _=this._pendingWrites.get(t);m-_.lastChange>=r?(this._pendingWrites.delete(t),n(void 0,p)):s=setTimeout(c,this.options.awaitWriteFinish.pollInterval,p)})};this._pendingWrites.has(t)||(this._pendingWrites.set(t,{lastChange:l,cancelWait:()=>(this._pendingWrites.delete(t),clearTimeout(s),i)}),s=setTimeout(c,this.options.awaitWriteFinish.pollInterval))}_getGlobIgnored(){return[...this._ignoredPaths.values()]}_isIgnored(t,r){if(this.options.atomic&&YO.test(t))return!0;if(!this._userIgnored){let{cwd:i}=this.options,n=this.options.ignored,s=n&&n.map(Xg(i)),a=Ku(s).filter(c=>typeof c===Qu&&!Du(c)).map(c=>c+Wu),l=this._getGlobIgnored().map(Xg(i)).concat(s,a);this._userIgnored=Hu(l,void 0,Uu)}return this._userIgnored([t,r])}_isntIgnored(t,r){return!this._isIgnored(t,r)}_getWatchHelpers(t,r){let i=r||this.options.disableGlobbing||!Du(t)?t:DO(t),n=this.options.followSymlinks;return new Vu(t,i,n,this)}_getWatchedDir(t){this._boundRemove||(this._boundRemove=this._remove.bind(this));let r=me.resolve(t);return this._watched.has(r)||this._watched.set(r,new Gu(r,this._boundRemove)),this._watched.get(r)}_hasReadPermissions(t){if(this.options.ignorePermissionErrors)return!0;let i=(t&&Number.parseInt(t.mode,10))&511;return!!(4&Number.parseInt(i.toString(8)[0],10))}_remove(t,r,i){let n=me.join(t,r),s=me.resolve(n);if(i=i??(this._watched.has(n)||this._watched.has(s)),!this._throttle("remove",n,100))return;!i&&!this.options.useFsEvents&&this._watched.size===1&&this.add(t,r,!0),this._getWatchedDir(n).getChildren().forEach(m=>this._remove(n,m));let c=this._getWatchedDir(t),h=c.has(r);c.remove(r),this._symlinkPaths.has(s)&&this._symlinkPaths.delete(s);let d=n;if(this.options.cwd&&(d=me.relative(this.options.cwd,n)),this.options.awaitWriteFinish&&this._pendingWrites.has(d)&&this._pendingWrites.get(d).cancelWait()===Ms)return;this._watched.delete(n),this._watched.delete(s);let p=i?jO:Gg;h&&!this._isIgnored(n)&&this._emit(p,n),this.options.useFsEvents||this._closePath(n)}_closePath(t){this._closeFile(t);let r=me.dirname(t);this._getWatchedDir(r).remove(me.basename(t))}_closeFile(t){let r=this._closers.get(t);r&&(r.forEach(i=>i()),this._closers.delete(t))}_addPathCloser(t,r){if(!r)return;let i=this._closers.get(t);i||(i=[],this._closers.set(t,i)),i.push(r)}_readdirp(t,r){if(this.closed)return;let i={type:Mu,alwaysStat:!0,lstat:!0,...r},n=BO(t,i);return this._streams.add(n),n.once(zO,()=>{n=void 0}),n.once(KO,()=>{n&&(this._streams.delete(n),n=void 0)}),n}};Xu.FSWatcher=qs;var f0=(e,t)=>{let r=new qs(t);return r.add(e),r};Xu.watch=f0});var s_=W((hL,i_)=>{"use strict";function r_(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ju(e,t)}function Ju(e,t){return Ju=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Ju(e,t)}var Ws=require("fs"),$s=require("path"),n_=bs(),h0=sm(),d0=h0.PrecompiledLoader,Hs,p0=function(e){r_(t,e);function t(i,n){var s;if(s=e.call(this)||this,typeof n=="boolean"&&console.log("[nunjucks] Warning: you passed a boolean as the second argument to FileSystemLoader, but it now takes an options object. See http://mozilla.github.io/nunjucks/api.html#filesystemloader"),n=n||{},s.pathsToNames={},s.noCache=!!n.noCache,i?(i=Array.isArray(i)?i:[i],s.searchPaths=i.map($s.normalize)):s.searchPaths=["."],n.watch){try{Hs=Zu()}catch{throw new Error("watch requires chokidar to be installed")}var a=s.searchPaths.filter(Ws.existsSync),l=Hs.watch(a);l.on("all",function(c,h){h=$s.resolve(h),c==="change"&&h in s.pathsToNames&&s.emit("update",s.pathsToNames[h],h)}),l.on("error",function(c){console.log("Watcher error: "+c)})}return s}var r=t.prototype;return r.getSource=function(n){for(var s=null,a=this.searchPaths,l=0;l<a.length;l++){var c=$s.resolve(a[l]),h=$s.resolve(a[l],n);if(h.indexOf(c)===0&&Ws.existsSync(h)){s=h;break}}if(!s)return null;this.pathsToNames[s]=n;var d={src:Ws.readFileSync(s,"utf-8"),path:s,noCache:this.noCache};return this.emit("load",n,d),d},t}(n_),m0=function(e){r_(t,e);function t(i){var n;if(n=e.call(this)||this,i=i||{},n.pathsToNames={},n.noCache=!!i.noCache,i.watch){try{Hs=Zu()}catch{throw new Error("watch requires chokidar to be installed")}n.watcher=Hs.watch(),n.watcher.on("change",function(s){n.emit("update",n.pathsToNames[s],s)}),n.watcher.on("error",function(s){console.log("Watcher error: "+s)}),n.on("load",function(s,a){n.watcher.add(a.path)})}return n}var r=t.prototype;return r.getSource=function(n){if(/^\.?\.?(\/|\\)/.test(n)||/^[A-Z]:/.test(n))return null;var s;try{s=require.resolve(n)}catch{return null}this.pathsToNames[s]=n;var a={src:Ws.readFileSync(s,"utf-8"),path:s,noCache:this.noCache};return this.emit("load",n,a),a},t}(n_);i_.exports={FileSystemLoader:p0,PrecompiledLoader:d0,NodeResolveLoader:m0}});var el=W((dL,o_)=>{"use strict";o_.exports=s_()});var a_=W(de=>{"use strict";var g0=un().SafeString;function _0(e){return typeof e=="function"}de.callable=_0;function y0(e){return e!==void 0}de.defined=y0;function b0(e,t){return e%t===0}de.divisibleby=b0;function v0(e){return e instanceof g0}de.escaped=v0;function w0(e,t){return e===t}de.equalto=w0;de.eq=de.equalto;de.sameas=de.equalto;function S0(e){return e%2===0}de.even=S0;function E0(e){return!e}de.falsy=E0;function T0(e,t){return e>=t}de.ge=T0;function R0(e,t){return e>t}de.greaterthan=R0;de.gt=de.greaterthan;function A0(e,t){return e<=t}de.le=A0;function C0(e,t){return e<t}de.lessthan=C0;de.lt=de.lessthan;function k0(e){return e.toLowerCase()===e}de.lower=k0;function O0(e,t){return e!==t}de.ne=O0;function x0(e){return e===null}de.null=x0;function P0(e){return typeof e=="number"}de.number=P0;function L0(e){return e%2===1}de.odd=L0;function I0(e){return typeof e=="string"}de.string=I0;function F0(e){return!!e}de.truthy=F0;function N0(e){return e===void 0}de.undefined=N0;function B0(e){return e.toUpperCase()===e}de.upper=B0;function D0(e){return typeof Symbol<"u"?!!e[Symbol.iterator]:Array.isArray(e)||typeof e=="string"}de.iterable=D0;function M0(e){var t=e!=null&&typeof e=="object"&&!Array.isArray(e);return Set?t&&!(e instanceof Set):t}de.mapping=M0});var l_=W((mL,u_)=>{"use strict";function q0(e){var t=-1;return{current:null,reset:function(){t=-1,this.current=null},next:function(){return t++,t>=e.length&&(t=0),this.current=e[t],this.current}}}function $0(e){e=e||",";var t=!0;return function(){var r=t?"":e;return t=!1,r}}function W0(){return{range:function(t,r,i){typeof r>"u"?(r=t,t=0,i=1):i||(i=1);var n=[];if(i>0)for(var s=t;s<r;s+=i)n.push(s);else for(var a=t;a>r;a+=i)n.push(a);return n},cycler:function(){return q0(Array.prototype.slice.call(arguments))},joiner:function(t){return $0(t)}}}u_.exports=W0});var f_=W((gL,c_)=>{"use strict";var H0=require("path");c_.exports=function(t,r){function i(n,s){if(this.name=n,this.path=n,this.defaultEngine=s.defaultEngine,this.ext=H0.extname(n),!this.ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");this.ext||(this.name+=this.ext=(this.defaultEngine[0]!=="."?".":"")+this.defaultEngine)}return i.prototype.render=function(s,a){t.render(this.name,s,a)},r.set("view",i),r.set("nunjucksEnv",t),t}});var ol=W((_L,y_)=>{"use strict";function nl(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,tl(e,t)}function tl(e,t){return tl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},tl(e,t)}var j0=Vd(),U0=Qd(),$e=At(),z0=ys(),K0=tm(),il=el(),h_=il.FileSystemLoader,d_=il.WebLoader,G0=il.PrecompiledLoader,V0=a_(),Y0=l_(),g_=on(),__=g_.Obj,Q0=g_.EmitterObj,js=un(),X0=js.handleError,p_=js.Frame,Z0=f_();function rl(e,t,r){j0(function(){e(t,r)})}var J0={type:"code",obj:{root:function(t,r,i,n,s){try{s(null,"")}catch(a){s(X0(a,null,null))}}}},sl=function(e){nl(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.init=function(n,s){var a=this;s=this.opts=s||{},this.opts.dev=!!s.dev,this.opts.autoescape=s.autoescape!=null?s.autoescape:!0,this.opts.throwOnUndefined=!!s.throwOnUndefined,this.opts.trimBlocks=!!s.trimBlocks,this.opts.lstripBlocks=!!s.lstripBlocks,this.loaders=[],n?this.loaders=$e.isArray(n)?n:[n]:h_?this.loaders=[new h_("views")]:d_&&(this.loaders=[new d_("/views")]),typeof window<"u"&&window.nunjucksPrecompiled&&this.loaders.unshift(new G0(window.nunjucksPrecompiled)),this._initLoaders(),this.globals=Y0(),this.filters={},this.tests={},this.asyncFilters=[],this.extensions={},this.extensionsList=[],$e._entries(K0).forEach(function(l){var c=l[0],h=l[1];return a.addFilter(c,h)}),$e._entries(V0).forEach(function(l){var c=l[0],h=l[1];return a.addTest(c,h)})},r._initLoaders=function(){var n=this;this.loaders.forEach(function(s){s.cache={},typeof s.on=="function"&&(s.on("update",function(a,l){s.cache[a]=null,n.emit("update",a,l,s)}),s.on("load",function(a,l){n.emit("load",a,l,s)}))})},r.invalidateCache=function(){this.loaders.forEach(function(n){n.cache={}})},r.addExtension=function(n,s){return s.__name=n,this.extensions[n]=s,this.extensionsList.push(s),this},r.removeExtension=function(n){var s=this.getExtension(n);s&&(this.extensionsList=$e.without(this.extensionsList,s),delete this.extensions[n])},r.getExtension=function(n){return this.extensions[n]},r.hasExtension=function(n){return!!this.extensions[n]},r.addGlobal=function(n,s){return this.globals[n]=s,this},r.getGlobal=function(n){if(typeof this.globals[n]>"u")throw new Error("global not found: "+n);return this.globals[n]},r.addFilter=function(n,s,a){var l=s;return a&&this.asyncFilters.push(n),this.filters[n]=l,this},r.getFilter=function(n){if(!this.filters[n])throw new Error("filter not found: "+n);return this.filters[n]},r.addTest=function(n,s){return this.tests[n]=s,this},r.getTest=function(n){if(!this.tests[n])throw new Error("test not found: "+n);return this.tests[n]},r.resolveTemplate=function(n,s,a){var l=n.isRelative&&s?n.isRelative(a):!1;return l&&n.resolve?n.resolve(s,a):a},r.getTemplate=function(n,s,a,l,c){var h=this,d=this,p=null;if(n&&n.raw&&(n=n.raw),$e.isFunction(a)&&(c=a,a=null,s=s||!1),$e.isFunction(s)&&(c=s,s=!1),n instanceof ti)p=n;else{if(typeof n!="string")throw new Error("template names must be a string: "+n);for(var m=0;m<this.loaders.length;m++){var _=this.loaders[m];if(p=_.cache[this.resolveTemplate(_,a,n)],p)break}}if(p)if(s&&p.compile(),c){c(null,p);return}else return p;var y,v=function(S,R){if(!R&&!S&&!l&&(S=new Error("template not found: "+n)),S)if(c){c(S);return}else throw S;var O;R?(O=new ti(R.src,h,R.path,s),R.noCache||(R.loader.cache[n]=O)):O=new ti(J0,h,"",s),c?c(null,O):y=O};return $e.asyncIter(this.loaders,function(E,S,R,O){function N($,j){$?O($):j?(j.loader=E,O(null,j)):R()}n=d.resolveTemplate(E,a,n),E.async?E.getSource(n,N):N(null,E.getSource(n))},v),y},r.express=function(n){return Z0(this,n)},r.render=function(n,s,a){$e.isFunction(s)&&(a=s,s=null);var l=null;return this.getTemplate(n,function(c,h){if(c&&a)rl(a,c);else{if(c)throw c;l=h.render(s,a)}}),l},r.renderString=function(n,s,a,l){$e.isFunction(a)&&(l=a,a={}),a=a||{};var c=new ti(n,this,a.path);return c.render(s,l)},r.waterfall=function(n,s,a){return U0(n,s,a)},t}(Q0),m_=function(e){nl(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.init=function(n,s,a){var l=this;this.env=a||new sl,this.ctx=$e.extend({},n),this.blocks={},this.exported=[],$e.keys(s).forEach(function(c){l.addBlock(c,s[c])})},r.lookup=function(n){return n in this.env.globals&&!(n in this.ctx)?this.env.globals[n]:this.ctx[n]},r.setVariable=function(n,s){this.ctx[n]=s},r.getVariables=function(){return this.ctx},r.addBlock=function(n,s){return this.blocks[n]=this.blocks[n]||[],this.blocks[n].push(s),this},r.getBlock=function(n){if(!this.blocks[n])throw new Error('unknown block "'+n+'"');return this.blocks[n][0]},r.getSuper=function(n,s,a,l,c,h){var d=$e.indexOf(this.blocks[s]||[],a),p=this.blocks[s][d+1],m=this;if(d===-1||!p)throw new Error('no super block available for "'+s+'"');p(n,m,l,c,h)},r.addExport=function(n){this.exported.push(n)},r.getExported=function(){var n=this,s={};return this.exported.forEach(function(a){s[a]=n.ctx[a]}),s},t}(__),ti=function(e){nl(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.init=function(n,s,a,l){if(this.env=s||new sl,$e.isObject(n))switch(n.type){case"code":this.tmplProps=n.obj;break;case"string":this.tmplStr=n.obj;break;default:throw new Error("Unexpected template object type "+n.type+"; expected 'code', or 'string'")}else if($e.isString(n))this.tmplStr=n;else throw new Error("src must be a string or an object describing the source");if(this.path=a,l)try{this._compile()}catch(c){throw $e._prettifyError(this.path,this.env.opts.dev,c)}else this.compiled=!1},r.render=function(n,s,a){var l=this;typeof n=="function"?(a=n,n={}):typeof s=="function"&&(a=s,s=null);var c=!s;try{this.compile()}catch(y){var h=$e._prettifyError(this.path,this.env.opts.dev,y);if(a)return rl(a,h);throw h}var d=new m_(n||{},this.blocks,this.env),p=s?s.push(!0):new p_;p.topLevel=!0;var m=null,_=!1;return this.rootRenderFunc(this.env,d,p,js,function(y,v){if(!(_&&a&&typeof v<"u"))if(y&&(y=$e._prettifyError(l.path,l.env.opts.dev,y),_=!0),a)c?rl(a,y,v):a(y,v);else{if(y)throw y;m=v}}),m},r.getExported=function(n,s,a){typeof n=="function"&&(a=n,n={}),typeof s=="function"&&(a=s,s=null);try{this.compile()}catch(h){if(a)return a(h);throw h}var l=s?s.push():new p_;l.topLevel=!0;var c=new m_(n||{},this.blocks,this.env);this.rootRenderFunc(this.env,c,l,js,function(h){h?a(h,null):a(null,c.getExported())})},r.compile=function(){this.compiled||this._compile()},r._compile=function(){var n;if(this.tmplProps)n=this.tmplProps;else{var s=z0.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts),a=new Function(s);n=a()}this.blocks=this._getBlocks(n),this.rootRenderFunc=n.root,this.compiled=!0},r._getBlocks=function(n){var s={};return $e.keys(n).forEach(function(a){a.slice(0,2)==="b_"&&(s[a.slice(2)]=n[a])}),s},t}(__);y_.exports={Environment:sl,Template:ti}});var v_=W((yL,b_)=>{"use strict";function ex(e,t){var r="";t=t||{};for(var i=0;i<e.length;i++){var n=JSON.stringify(e[i].name),s=e[i].template;r+="(function() {(window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["+n+`] = (function() {
`+s+`
})();
`,t.asFunction&&(r+="return function(ctx, cb) { return nunjucks.render("+n+`, ctx, cb); }
`),r+=`})();
`}return r}b_.exports=ex});var R_=W((bL,T_)=>{"use strict";var pn=require("fs"),al=require("path"),tx=At(),rx=tx._prettifyError,nx=ys(),ix=ol(),ll=ix.Environment,S_=v_();function w_(e,t){return Array.isArray(t)?t.some(function(r){return e.match(r)}):!1}function E_(e,t){t=t||{},t.isString=!0;var r=t.env||new ll([]),i=t.wrapper||S_;if(!t.name)throw new Error('the "name" option is required when compiling a string');return i([ul(e,t.name,r)],t)}function sx(e,t){t=t||{};var r=t.env||new ll([]),i=t.wrapper||S_;if(t.isString)return E_(e,t);var n=pn.existsSync(e)&&pn.statSync(e),s=[],a=[];function l(d){pn.readdirSync(d).forEach(function(p){var m=al.join(d,p),_=m.substr(al.join(e,"/").length),y=pn.statSync(m);y&&y.isDirectory()?(_+="/",w_(_,t.exclude)||l(m)):w_(_,t.include)&&a.push(m)})}if(n.isFile())s.push(ul(pn.readFileSync(e,"utf-8"),t.name||e,r));else if(n.isDirectory()){l(e);for(var c=0;c<a.length;c++){var h=a[c].replace(al.join(e,"/"),"");try{s.push(ul(pn.readFileSync(a[c],"utf-8"),h,r))}catch(d){if(t.force)console.error(d);else throw d}}}return i(s,t)}function ul(e,t,r){r=r||new ll([]);var i=r.asyncFilters,n=r.extensionsList,s;t=t.replace(/\\/g,"/");try{s=nx.compile(e,i,n,t,r.opts)}catch(a){throw rx(t,!1,a)}return{name:t,template:s}}T_.exports={precompile:sx,precompileString:E_}});var C_=W((vL,A_)=>{"use strict";function ox(){"use strict";var e=this.runtime,t=this.lib,r=this.compiler.Compiler,i=this.parser.Parser,n=this.nodes,s=this.lexer,a=e.contextOrFrameLookup,l=e.memberLookup,c,h;r&&(c=r.prototype.assertType),i&&(h=i.prototype.parseAggregate);function d(){e.contextOrFrameLookup=a,e.memberLookup=l,r&&(r.prototype.assertType=c),i&&(i.prototype.parseAggregate=h)}e.contextOrFrameLookup=function(R,O,N){var $=a.apply(this,arguments);if($!==void 0)return $;switch(N){case"True":return!0;case"False":return!1;case"None":return null;default:return}};function p(S){return{index:S.index,lineno:S.lineno,colno:S.colno}}if(process.env.BUILD_TYPE!=="SLIM"&&n&&r&&i){var m=n.Node.extend("Slice",{fields:["start","stop","step"],init:function(R,O,N,$,j){N=N||new n.Literal(R,O,null),$=$||new n.Literal(R,O,null),j=j||new n.Literal(R,O,1),this.parent(R,O,N,$,j)}});r.prototype.assertType=function(R){R instanceof m||c.apply(this,arguments)},r.prototype.compileSlice=function(R,O){this._emit("("),this._compileExpression(R.start,O),this._emit("),("),this._compileExpression(R.stop,O),this._emit("),("),this._compileExpression(R.step,O),this._emit(")")},i.prototype.parseAggregate=function(){var R=this,O=p(this.tokens);O.colno--,O.index--;try{return h.apply(this)}catch(k){var N=p(this.tokens),$=function(){return t._assign(R.tokens,N),k};t._assign(this.tokens,O),this.peeked=!1;var j=this.peekToken();if(j.type!==s.TOKEN_LEFT_BRACKET)throw $();this.nextToken();for(var ae=new m(j.lineno,j.colno),U=!1,J=0;J<=ae.fields.length&&!this.skip(s.TOKEN_RIGHT_BRACKET);J++){if(J===ae.fields.length)if(U)this.fail("parseSlice: too many slice components",j.lineno,j.colno);else break;if(this.skip(s.TOKEN_COLON))U=!0;else{var Se=ae.fields[J];ae[Se]=this.parseExpression(),U=this.skip(s.TOKEN_COLON)||U}}if(!U)throw $();return new n.Array(j.lineno,j.colno,[ae])}}}function _(S,R,O,N){S=S||[],R===null&&(R=N<0?S.length-1:0),O===null?O=N<0?-1:S.length:O<0&&(O+=S.length),R<0&&(R+=S.length);for(var $=[],j=R;!(j<0||j>S.length||N>0&&j>=O||N<0&&j<=O);j+=N)$.push(e.memberLookup(S,j));return $}function y(S,R){return Object.prototype.hasOwnProperty.call(S,R)}var v={pop:function(R){if(R===void 0)return this.pop();if(R>=this.length||R<0)throw new Error("KeyError");return this.splice(R,1)},append:function(R){return this.push(R)},remove:function(R){for(var O=0;O<this.length;O++)if(this[O]===R)return this.splice(O,1);throw new Error("ValueError")},count:function(R){for(var O=0,N=0;N<this.length;N++)this[N]===R&&O++;return O},index:function(R){var O;if((O=this.indexOf(R))===-1)throw new Error("ValueError");return O},find:function(R){return this.indexOf(R)},insert:function(R,O){return this.splice(R,0,O)}},E={items:function(){return t._entries(this)},values:function(){return t._values(this)},keys:function(){return t.keys(this)},get:function(R,O){var N=this[R];return N===void 0&&(N=O),N},has_key:function(R){return y(this,R)},pop:function(R,O){var N=this[R];if(N===void 0&&O!==void 0)N=O;else{if(N===void 0)throw new Error("KeyError");delete this[R]}return N},popitem:function(){var R=t.keys(this);if(!R.length)throw new Error("KeyError");var O=R[0],N=this[O];return delete this[O],[O,N]},setdefault:function(R,O){return O===void 0&&(O=null),R in this||(this[R]=O),this[R]},update:function(R){return t._assign(this,R),null}};return E.iteritems=E.items,E.itervalues=E.values,E.iterkeys=E.keys,e.memberLookup=function(R,O,N){return arguments.length===4?_.apply(this,arguments):(R=R||{},t.isArray(R)&&y(v,O)?v[O].bind(R):t.isObject(R)&&y(E,O)?E[O].bind(R):l.apply(this,arguments))},d}A_.exports=ox});var I_=W((wL,L_)=>{"use strict";var O_=At(),x_=ol(),P_=x_.Environment,k_=x_.Template,ax=bs(),mr=el(),Us=R_(),ux=ys(),lx=Ga(),cx=Ba(),fx=un(),hx=Hn(),dx=C_(),Zt;function zs(e,t){t=t||{},O_.isObject(e)&&(t=e,e=null);var r;return mr.FileSystemLoader?r=new mr.FileSystemLoader(e,{watch:t.watch,noCache:t.noCache}):mr.WebLoader&&(r=new mr.WebLoader(e,{useCache:t.web&&t.web.useCache,async:t.web&&t.web.async})),Zt=new P_(r,t),t&&t.express&&Zt.express(t.express),Zt}L_.exports={Environment:P_,Template:k_,Loader:ax,FileSystemLoader:mr.FileSystemLoader,NodeResolveLoader:mr.NodeResolveLoader,PrecompiledLoader:mr.PrecompiledLoader,WebLoader:mr.WebLoader,compiler:ux,parser:lx,lexer:cx,runtime:fx,lib:O_,nodes:hx,installJinjaCompat:dx,configure:zs,reset:function(){Zt=void 0},compile:function(t,r,i,n){return Zt||zs(),new k_(t,r,i,n)},render:function(t,r,i){return Zt||zs(),Zt.render(t,r,i)},renderString:function(t,r,i){return Zt||zs(),Zt.renderString(t,r,i)},precompile:Us?Us.precompile:void 0,precompileString:Us?Us.precompileString:void 0}});function px(e){if(!/^data:/i.test(e))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');e=e.replace(/\r?\n/g,"");let t=e.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let r=e.substring(5,t).split(";"),i="",n=!1,s=r[0]||"text/plain",a=s;for(let d=1;d<r.length;d++)r[d]==="base64"?n=!0:r[d]&&(a+=`;${r[d]}`,r[d].indexOf("charset=")===0&&(i=r[d].substring(8)));!r[0]&&!i.length&&(a+=";charset=US-ASCII",i="US-ASCII");let l=n?"base64":"ascii",c=unescape(e.substring(t+1)),h=Buffer.from(c,l);return h.type=s,h.typeFull=a,h.charset=i,h}var F_,N_=Fe(()=>{F_=px});var D_=W((Ks,B_)=>{(function(e,t){typeof Ks=="object"&&typeof B_<"u"?t(Ks):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.WebStreamsPolyfill={}))})(Ks,function(e){"use strict";function t(){}function r(o){return typeof o=="object"&&o!==null||typeof o=="function"}let i=t;function n(o,u){try{Object.defineProperty(o,"name",{value:u,configurable:!0})}catch{}}let s=Promise,a=Promise.prototype.then,l=Promise.reject.bind(s);function c(o){return new s(o)}function h(o){return c(u=>u(o))}function d(o){return l(o)}function p(o,u,f){return a.call(o,u,f)}function m(o,u,f){p(p(o,u,f),void 0,i)}function _(o,u){m(o,u)}function y(o,u){m(o,void 0,u)}function v(o,u,f){return p(o,u,f)}function E(o){p(o,void 0,i)}let S=o=>{if(typeof queueMicrotask=="function")S=queueMicrotask;else{let u=h(void 0);S=f=>p(u,f)}return S(o)};function R(o,u,f){if(typeof o!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(o,u,f)}function O(o,u,f){try{return h(R(o,u,f))}catch(g){return d(g)}}let N=16384;class ${constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(u){let f=this._back,g=f;f._elements.length===N-1&&(g={_elements:[],_next:void 0}),f._elements.push(u),g!==f&&(this._back=g,f._next=g),++this._size}shift(){let u=this._front,f=u,g=this._cursor,b=g+1,w=u._elements,T=w[g];return b===N&&(f=u._next,b=0),--this._size,this._cursor=b,u!==f&&(this._front=f),w[g]=void 0,T}forEach(u){let f=this._cursor,g=this._front,b=g._elements;for(;(f!==b.length||g._next!==void 0)&&!(f===b.length&&(g=g._next,b=g._elements,f=0,b.length===0));)u(b[f]),++f}peek(){let u=this._front,f=this._cursor;return u._elements[f]}}let j=Symbol("[[AbortSteps]]"),ae=Symbol("[[ErrorSteps]]"),U=Symbol("[[CancelSteps]]"),J=Symbol("[[PullSteps]]"),Se=Symbol("[[ReleaseSteps]]");function k(o,u){o._ownerReadableStream=u,u._reader=o,u._state==="readable"?A(o):u._state==="closed"?Ie(o):C(o,u._storedError)}function ce(o,u){let f=o._ownerReadableStream;return Tt(f,u)}function ie(o){let u=o._ownerReadableStream;u._state==="readable"?ne(o,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Ze(o,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),u._readableStreamController[Se](),u._reader=void 0,o._ownerReadableStream=void 0}function Ke(o){return new TypeError("Cannot "+o+" a stream using a released reader")}function A(o){o._closedPromise=c((u,f)=>{o._closedPromise_resolve=u,o._closedPromise_reject=f})}function C(o,u){A(o),ne(o,u)}function Ie(o){A(o),Ge(o)}function ne(o,u){o._closedPromise_reject!==void 0&&(E(o._closedPromise),o._closedPromise_reject(u),o._closedPromise_resolve=void 0,o._closedPromise_reject=void 0)}function Ze(o,u){C(o,u)}function Ge(o){o._closedPromise_resolve!==void 0&&(o._closedPromise_resolve(void 0),o._closedPromise_resolve=void 0,o._closedPromise_reject=void 0)}let Be=Number.isFinite||function(o){return typeof o=="number"&&isFinite(o)},tr=Math.trunc||function(o){return o<0?Math.ceil(o):Math.floor(o)};function _n(o){return typeof o=="object"||typeof o=="function"}function He(o,u){if(o!==void 0&&!_n(o))throw new TypeError(`${u} is not an object.`)}function Ae(o,u){if(typeof o!="function")throw new TypeError(`${u} is not a function.`)}function te(o){return typeof o=="object"&&o!==null||typeof o=="function"}function $t(o,u){if(!te(o))throw new TypeError(`${u} is not an object.`)}function at(o,u,f){if(o===void 0)throw new TypeError(`Parameter ${u} is required in '${f}'.`)}function M(o,u,f){if(o===void 0)throw new TypeError(`${u} is required in '${f}'.`)}function fe(o){return Number(o)}function L(o){return o===0?0:o}function I(o){return L(tr(o))}function pe(o,u){let g=Number.MAX_SAFE_INTEGER,b=Number(o);if(b=L(b),!Be(b))throw new TypeError(`${u} is not a finite number`);if(b=I(b),b<0||b>g)throw new TypeError(`${u} is outside the accepted range of 0 to ${g}, inclusive`);return!Be(b)||b===0?0:b}function x(o,u){if(!ur(o))throw new TypeError(`${u} is not a ReadableStream.`)}function F(o){return new rr(o)}function oe(o,u){o._reader._readRequests.push(u)}function Te(o,u,f){let b=o._reader._readRequests.shift();f?b._closeSteps():b._chunkSteps(u)}function je(o){return o._reader._readRequests.length}function $r(o){let u=o._reader;return!(u===void 0||!nr(u))}class rr{constructor(u){if(at(u,1,"ReadableStreamDefaultReader"),x(u,"First parameter"),lr(u))throw new TypeError("This stream has already been locked for exclusive reading by another reader");k(this,u),this._readRequests=new $}get closed(){return nr(this)?this._closedPromise:d(fi("closed"))}cancel(u=void 0){return nr(this)?this._ownerReadableStream===void 0?d(Ke("cancel")):ce(this,u):d(fi("cancel"))}read(){if(!nr(this))return d(fi("read"));if(this._ownerReadableStream===void 0)return d(Ke("read from"));let u,f,g=c((w,T)=>{u=w,f=T});return yn(this,{_chunkSteps:w=>u({value:w,done:!1}),_closeSteps:()=>u({value:void 0,done:!0}),_errorSteps:w=>f(w)}),g}releaseLock(){if(!nr(this))throw fi("releaseLock");this._ownerReadableStream!==void 0&&Oy(this)}}Object.defineProperties(rr.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),n(rr.prototype.cancel,"cancel"),n(rr.prototype.read,"read"),n(rr.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(rr.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function nr(o){return!r(o)||!Object.prototype.hasOwnProperty.call(o,"_readRequests")?!1:o instanceof rr}function yn(o,u){let f=o._ownerReadableStream;f._disturbed=!0,f._state==="closed"?u._closeSteps():f._state==="errored"?u._errorSteps(f._storedError):f._readableStreamController[J](u)}function Oy(o){ie(o);let u=new TypeError("Reader was released");Ol(o,u)}function Ol(o,u){let f=o._readRequests;o._readRequests=new $,f.forEach(g=>{g._errorSteps(u)})}function fi(o){return new TypeError(`ReadableStreamDefaultReader.prototype.${o} can only be used on a ReadableStreamDefaultReader`)}let xy=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class xl{constructor(u,f){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=u,this._preventCancel=f}next(){let u=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?v(this._ongoingPromise,u,u):u(),this._ongoingPromise}return(u){let f=()=>this._returnSteps(u);return this._ongoingPromise?v(this._ongoingPromise,f,f):f()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let u=this._reader,f,g,b=c((T,q)=>{f=T,g=q});return yn(u,{_chunkSteps:T=>{this._ongoingPromise=void 0,S(()=>f({value:T,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,ie(u),f({value:void 0,done:!0})},_errorSteps:T=>{this._ongoingPromise=void 0,this._isFinished=!0,ie(u),g(T)}}),b}_returnSteps(u){if(this._isFinished)return Promise.resolve({value:u,done:!0});this._isFinished=!0;let f=this._reader;if(!this._preventCancel){let g=ce(f,u);return ie(f),v(g,()=>({value:u,done:!0}))}return ie(f),h({value:u,done:!0})}}let Pl={next(){return Ll(this)?this._asyncIteratorImpl.next():d(Il("next"))},return(o){return Ll(this)?this._asyncIteratorImpl.return(o):d(Il("return"))}};Object.setPrototypeOf(Pl,xy);function Py(o,u){let f=F(o),g=new xl(f,u),b=Object.create(Pl);return b._asyncIteratorImpl=g,b}function Ll(o){if(!r(o)||!Object.prototype.hasOwnProperty.call(o,"_asyncIteratorImpl"))return!1;try{return o._asyncIteratorImpl instanceof xl}catch{return!1}}function Il(o){return new TypeError(`ReadableStreamAsyncIterator.${o} can only be used on a ReadableSteamAsyncIterator`)}let Fl=Number.isNaN||function(o){return o!==o};var so,oo,ao;function bn(o){return o.slice()}function Nl(o,u,f,g,b){new Uint8Array(o).set(new Uint8Array(f,g,b),u)}let Wt=o=>(typeof o.transfer=="function"?Wt=u=>u.transfer():typeof structuredClone=="function"?Wt=u=>structuredClone(u,{transfer:[u]}):Wt=u=>u,Wt(o)),ir=o=>(typeof o.detached=="boolean"?ir=u=>u.detached:ir=u=>u.byteLength===0,ir(o));function Bl(o,u,f){if(o.slice)return o.slice(u,f);let g=f-u,b=new ArrayBuffer(g);return Nl(b,0,o,u,g),b}function hi(o,u){let f=o[u];if(f!=null){if(typeof f!="function")throw new TypeError(`${String(u)} is not a function`);return f}}function Ly(o){let u={[Symbol.iterator]:()=>o.iterator},f=async function*(){return yield*u}(),g=f.next;return{iterator:f,nextMethod:g,done:!1}}let uo=(ao=(so=Symbol.asyncIterator)!==null&&so!==void 0?so:(oo=Symbol.for)===null||oo===void 0?void 0:oo.call(Symbol,"Symbol.asyncIterator"))!==null&&ao!==void 0?ao:"@@asyncIterator";function Dl(o,u="sync",f){if(f===void 0)if(u==="async"){if(f=hi(o,uo),f===void 0){let w=hi(o,Symbol.iterator),T=Dl(o,"sync",w);return Ly(T)}}else f=hi(o,Symbol.iterator);if(f===void 0)throw new TypeError("The object is not iterable");let g=R(f,o,[]);if(!r(g))throw new TypeError("The iterator method must return an object");let b=g.next;return{iterator:g,nextMethod:b,done:!1}}function Iy(o){let u=R(o.nextMethod,o.iterator,[]);if(!r(u))throw new TypeError("The iterator.next() method must return an object");return u}function Fy(o){return!!o.done}function Ny(o){return o.value}function By(o){return!(typeof o!="number"||Fl(o)||o<0)}function Ml(o){let u=Bl(o.buffer,o.byteOffset,o.byteOffset+o.byteLength);return new Uint8Array(u)}function lo(o){let u=o._queue.shift();return o._queueTotalSize-=u.size,o._queueTotalSize<0&&(o._queueTotalSize=0),u.value}function co(o,u,f){if(!By(f)||f===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");o._queue.push({value:u,size:f}),o._queueTotalSize+=f}function Dy(o){return o._queue.peek().value}function sr(o){o._queue=new $,o._queueTotalSize=0}function ql(o){return o===DataView}function My(o){return ql(o.constructor)}function qy(o){return ql(o)?1:o.BYTES_PER_ELEMENT}class vr{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!fo(this))throw _o("view");return this._view}respond(u){if(!fo(this))throw _o("respond");if(at(u,1,"respond"),u=pe(u,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(ir(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");gi(this._associatedReadableByteStreamController,u)}respondWithNewView(u){if(!fo(this))throw _o("respondWithNewView");if(at(u,1,"respondWithNewView"),!ArrayBuffer.isView(u))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(ir(u.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");_i(this._associatedReadableByteStreamController,u)}}Object.defineProperties(vr.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),n(vr.prototype.respond,"respond"),n(vr.prototype.respondWithNewView,"respondWithNewView"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(vr.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Ht{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!wr(this))throw wn("byobRequest");return go(this)}get desiredSize(){if(!wr(this))throw wn("desiredSize");return Yl(this)}close(){if(!wr(this))throw wn("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let u=this._controlledReadableByteStream._state;if(u!=="readable")throw new TypeError(`The stream (in ${u} state) is not in the readable state and cannot be closed`);vn(this)}enqueue(u){if(!wr(this))throw wn("enqueue");if(at(u,1,"enqueue"),!ArrayBuffer.isView(u))throw new TypeError("chunk must be an array buffer view");if(u.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(u.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let f=this._controlledReadableByteStream._state;if(f!=="readable")throw new TypeError(`The stream (in ${f} state) is not in the readable state and cannot be enqueued to`);mi(this,u)}error(u=void 0){if(!wr(this))throw wn("error");_t(this,u)}[U](u){$l(this),sr(this);let f=this._cancelAlgorithm(u);return pi(this),f}[J](u){let f=this._controlledReadableByteStream;if(this._queueTotalSize>0){Vl(this,u);return}let g=this._autoAllocateChunkSize;if(g!==void 0){let b;try{b=new ArrayBuffer(g)}catch(T){u._errorSteps(T);return}let w={buffer:b,bufferByteLength:g,byteOffset:0,byteLength:g,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(w)}oe(f,u),Sr(this)}[Se](){if(this._pendingPullIntos.length>0){let u=this._pendingPullIntos.peek();u.readerType="none",this._pendingPullIntos=new $,this._pendingPullIntos.push(u)}}}Object.defineProperties(Ht.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),n(Ht.prototype.close,"close"),n(Ht.prototype.enqueue,"enqueue"),n(Ht.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ht.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function wr(o){return!r(o)||!Object.prototype.hasOwnProperty.call(o,"_controlledReadableByteStream")?!1:o instanceof Ht}function fo(o){return!r(o)||!Object.prototype.hasOwnProperty.call(o,"_associatedReadableByteStreamController")?!1:o instanceof vr}function Sr(o){if(!Uy(o))return;if(o._pulling){o._pullAgain=!0;return}o._pulling=!0;let f=o._pullAlgorithm();m(f,()=>(o._pulling=!1,o._pullAgain&&(o._pullAgain=!1,Sr(o)),null),g=>(_t(o,g),null))}function $l(o){po(o),o._pendingPullIntos=new $}function ho(o,u){let f=!1;o._state==="closed"&&(f=!0);let g=Wl(u);u.readerType==="default"?Te(o,g,f):Qy(o,g,f)}function Wl(o){let u=o.bytesFilled,f=o.elementSize;return new o.viewConstructor(o.buffer,o.byteOffset,u/f)}function di(o,u,f,g){o._queue.push({buffer:u,byteOffset:f,byteLength:g}),o._queueTotalSize+=g}function Hl(o,u,f,g){let b;try{b=Bl(u,f,f+g)}catch(w){throw _t(o,w),w}di(o,b,0,g)}function jl(o,u){u.bytesFilled>0&&Hl(o,u.buffer,u.byteOffset,u.bytesFilled),Wr(o)}function Ul(o,u){let f=Math.min(o._queueTotalSize,u.byteLength-u.bytesFilled),g=u.bytesFilled+f,b=f,w=!1,T=g%u.elementSize,q=g-T;q>=u.minimumFill&&(b=q-u.bytesFilled,w=!0);let V=o._queue;for(;b>0;){let K=V.peek(),X=Math.min(b,K.byteLength),re=u.byteOffset+u.bytesFilled;Nl(u.buffer,re,K.buffer,K.byteOffset,X),K.byteLength===X?V.shift():(K.byteOffset+=X,K.byteLength-=X),o._queueTotalSize-=X,zl(o,X,u),b-=X}return w}function zl(o,u,f){f.bytesFilled+=u}function Kl(o){o._queueTotalSize===0&&o._closeRequested?(pi(o),Cn(o._controlledReadableByteStream)):Sr(o)}function po(o){o._byobRequest!==null&&(o._byobRequest._associatedReadableByteStreamController=void 0,o._byobRequest._view=null,o._byobRequest=null)}function mo(o){for(;o._pendingPullIntos.length>0;){if(o._queueTotalSize===0)return;let u=o._pendingPullIntos.peek();Ul(o,u)&&(Wr(o),ho(o._controlledReadableByteStream,u))}}function $y(o){let u=o._controlledReadableByteStream._reader;for(;u._readRequests.length>0;){if(o._queueTotalSize===0)return;let f=u._readRequests.shift();Vl(o,f)}}function Wy(o,u,f,g){let b=o._controlledReadableByteStream,w=u.constructor,T=qy(w),{byteOffset:q,byteLength:V}=u,K=f*T,X;try{X=Wt(u.buffer)}catch(ge){g._errorSteps(ge);return}let re={buffer:X,bufferByteLength:X.byteLength,byteOffset:q,byteLength:V,bytesFilled:0,minimumFill:K,elementSize:T,viewConstructor:w,readerType:"byob"};if(o._pendingPullIntos.length>0){o._pendingPullIntos.push(re),Zl(b,g);return}if(b._state==="closed"){let ge=new w(re.buffer,re.byteOffset,0);g._closeSteps(ge);return}if(o._queueTotalSize>0){if(Ul(o,re)){let ge=Wl(re);Kl(o),g._chunkSteps(ge);return}if(o._closeRequested){let ge=new TypeError("Insufficient bytes to fill elements in the given buffer");_t(o,ge),g._errorSteps(ge);return}}o._pendingPullIntos.push(re),Zl(b,g),Sr(o)}function Hy(o,u){u.readerType==="none"&&Wr(o);let f=o._controlledReadableByteStream;if(yo(f))for(;Jl(f)>0;){let g=Wr(o);ho(f,g)}}function jy(o,u,f){if(zl(o,u,f),f.readerType==="none"){jl(o,f),mo(o);return}if(f.bytesFilled<f.minimumFill)return;Wr(o);let g=f.bytesFilled%f.elementSize;if(g>0){let b=f.byteOffset+f.bytesFilled;Hl(o,f.buffer,b-g,g)}f.bytesFilled-=g,ho(o._controlledReadableByteStream,f),mo(o)}function Gl(o,u){let f=o._pendingPullIntos.peek();po(o),o._controlledReadableByteStream._state==="closed"?Hy(o,f):jy(o,u,f),Sr(o)}function Wr(o){return o._pendingPullIntos.shift()}function Uy(o){let u=o._controlledReadableByteStream;return u._state!=="readable"||o._closeRequested||!o._started?!1:!!($r(u)&&je(u)>0||yo(u)&&Jl(u)>0||Yl(o)>0)}function pi(o){o._pullAlgorithm=void 0,o._cancelAlgorithm=void 0}function vn(o){let u=o._controlledReadableByteStream;if(!(o._closeRequested||u._state!=="readable")){if(o._queueTotalSize>0){o._closeRequested=!0;return}if(o._pendingPullIntos.length>0){let f=o._pendingPullIntos.peek();if(f.bytesFilled%f.elementSize!==0){let g=new TypeError("Insufficient bytes to fill elements in the given buffer");throw _t(o,g),g}}pi(o),Cn(u)}}function mi(o,u){let f=o._controlledReadableByteStream;if(o._closeRequested||f._state!=="readable")return;let{buffer:g,byteOffset:b,byteLength:w}=u;if(ir(g))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");let T=Wt(g);if(o._pendingPullIntos.length>0){let q=o._pendingPullIntos.peek();if(ir(q.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");po(o),q.buffer=Wt(q.buffer),q.readerType==="none"&&jl(o,q)}if($r(f))if($y(o),je(f)===0)di(o,T,b,w);else{o._pendingPullIntos.length>0&&Wr(o);let q=new Uint8Array(T,b,w);Te(f,q,!1)}else yo(f)?(di(o,T,b,w),mo(o)):di(o,T,b,w);Sr(o)}function _t(o,u){let f=o._controlledReadableByteStream;f._state==="readable"&&($l(o),sr(o),pi(o),Ec(f,u))}function Vl(o,u){let f=o._queue.shift();o._queueTotalSize-=f.byteLength,Kl(o);let g=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);u._chunkSteps(g)}function go(o){if(o._byobRequest===null&&o._pendingPullIntos.length>0){let u=o._pendingPullIntos.peek(),f=new Uint8Array(u.buffer,u.byteOffset+u.bytesFilled,u.byteLength-u.bytesFilled),g=Object.create(vr.prototype);Ky(g,o,f),o._byobRequest=g}return o._byobRequest}function Yl(o){let u=o._controlledReadableByteStream._state;return u==="errored"?null:u==="closed"?0:o._strategyHWM-o._queueTotalSize}function gi(o,u){let f=o._pendingPullIntos.peek();if(o._controlledReadableByteStream._state==="closed"){if(u!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(u===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(f.bytesFilled+u>f.byteLength)throw new RangeError("bytesWritten out of range")}f.buffer=Wt(f.buffer),Gl(o,u)}function _i(o,u){let f=o._pendingPullIntos.peek();if(o._controlledReadableByteStream._state==="closed"){if(u.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(u.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(f.byteOffset+f.bytesFilled!==u.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(f.bufferByteLength!==u.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(f.bytesFilled+u.byteLength>f.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let b=u.byteLength;f.buffer=Wt(u.buffer),Gl(o,b)}function Ql(o,u,f,g,b,w,T){u._controlledReadableByteStream=o,u._pullAgain=!1,u._pulling=!1,u._byobRequest=null,u._queue=u._queueTotalSize=void 0,sr(u),u._closeRequested=!1,u._started=!1,u._strategyHWM=w,u._pullAlgorithm=g,u._cancelAlgorithm=b,u._autoAllocateChunkSize=T,u._pendingPullIntos=new $,o._readableStreamController=u;let q=f();m(h(q),()=>(u._started=!0,Sr(u),null),V=>(_t(u,V),null))}function zy(o,u,f){let g=Object.create(Ht.prototype),b,w,T;u.start!==void 0?b=()=>u.start(g):b=()=>{},u.pull!==void 0?w=()=>u.pull(g):w=()=>h(void 0),u.cancel!==void 0?T=V=>u.cancel(V):T=()=>h(void 0);let q=u.autoAllocateChunkSize;if(q===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Ql(o,g,b,w,T,f,q)}function Ky(o,u,f){o._associatedReadableByteStreamController=u,o._view=f}function _o(o){return new TypeError(`ReadableStreamBYOBRequest.prototype.${o} can only be used on a ReadableStreamBYOBRequest`)}function wn(o){return new TypeError(`ReadableByteStreamController.prototype.${o} can only be used on a ReadableByteStreamController`)}function Gy(o,u){He(o,u);let f=o?.mode;return{mode:f===void 0?void 0:Vy(f,`${u} has member 'mode' that`)}}function Vy(o,u){if(o=`${o}`,o!=="byob")throw new TypeError(`${u} '${o}' is not a valid enumeration value for ReadableStreamReaderMode`);return o}function Yy(o,u){var f;He(o,u);let g=(f=o?.min)!==null&&f!==void 0?f:1;return{min:pe(g,`${u} has member 'min' that`)}}function Xl(o){return new or(o)}function Zl(o,u){o._reader._readIntoRequests.push(u)}function Qy(o,u,f){let b=o._reader._readIntoRequests.shift();f?b._closeSteps(u):b._chunkSteps(u)}function Jl(o){return o._reader._readIntoRequests.length}function yo(o){let u=o._reader;return!(u===void 0||!Er(u))}class or{constructor(u){if(at(u,1,"ReadableStreamBYOBReader"),x(u,"First parameter"),lr(u))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!wr(u._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");k(this,u),this._readIntoRequests=new $}get closed(){return Er(this)?this._closedPromise:d(yi("closed"))}cancel(u=void 0){return Er(this)?this._ownerReadableStream===void 0?d(Ke("cancel")):ce(this,u):d(yi("cancel"))}read(u,f={}){if(!Er(this))return d(yi("read"));if(!ArrayBuffer.isView(u))return d(new TypeError("view must be an array buffer view"));if(u.byteLength===0)return d(new TypeError("view must have non-zero byteLength"));if(u.buffer.byteLength===0)return d(new TypeError("view's buffer must have non-zero byteLength"));if(ir(u.buffer))return d(new TypeError("view's buffer has been detached"));let g;try{g=Yy(f,"options")}catch(K){return d(K)}let b=g.min;if(b===0)return d(new TypeError("options.min must be greater than 0"));if(My(u)){if(b>u.byteLength)return d(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(b>u.length)return d(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return d(Ke("read from"));let w,T,q=c((K,X)=>{w=K,T=X});return ec(this,u,b,{_chunkSteps:K=>w({value:K,done:!1}),_closeSteps:K=>w({value:K,done:!0}),_errorSteps:K=>T(K)}),q}releaseLock(){if(!Er(this))throw yi("releaseLock");this._ownerReadableStream!==void 0&&Xy(this)}}Object.defineProperties(or.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),n(or.prototype.cancel,"cancel"),n(or.prototype.read,"read"),n(or.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(or.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Er(o){return!r(o)||!Object.prototype.hasOwnProperty.call(o,"_readIntoRequests")?!1:o instanceof or}function ec(o,u,f,g){let b=o._ownerReadableStream;b._disturbed=!0,b._state==="errored"?g._errorSteps(b._storedError):Wy(b._readableStreamController,u,f,g)}function Xy(o){ie(o);let u=new TypeError("Reader was released");tc(o,u)}function tc(o,u){let f=o._readIntoRequests;o._readIntoRequests=new $,f.forEach(g=>{g._errorSteps(u)})}function yi(o){return new TypeError(`ReadableStreamBYOBReader.prototype.${o} can only be used on a ReadableStreamBYOBReader`)}function Sn(o,u){let{highWaterMark:f}=o;if(f===void 0)return u;if(Fl(f)||f<0)throw new RangeError("Invalid highWaterMark");return f}function bi(o){let{size:u}=o;return u||(()=>1)}function vi(o,u){He(o,u);let f=o?.highWaterMark,g=o?.size;return{highWaterMark:f===void 0?void 0:fe(f),size:g===void 0?void 0:Zy(g,`${u} has member 'size' that`)}}function Zy(o,u){return Ae(o,u),f=>fe(o(f))}function Jy(o,u){He(o,u);let f=o?.abort,g=o?.close,b=o?.start,w=o?.type,T=o?.write;return{abort:f===void 0?void 0:eb(f,o,`${u} has member 'abort' that`),close:g===void 0?void 0:tb(g,o,`${u} has member 'close' that`),start:b===void 0?void 0:rb(b,o,`${u} has member 'start' that`),write:T===void 0?void 0:nb(T,o,`${u} has member 'write' that`),type:w}}function eb(o,u,f){return Ae(o,f),g=>O(o,u,[g])}function tb(o,u,f){return Ae(o,f),()=>O(o,u,[])}function rb(o,u,f){return Ae(o,f),g=>R(o,u,[g])}function nb(o,u,f){return Ae(o,f),(g,b)=>O(o,u,[g,b])}function rc(o,u){if(!Hr(o))throw new TypeError(`${u} is not a WritableStream.`)}function ib(o){if(typeof o!="object"||o===null)return!1;try{return typeof o.aborted=="boolean"}catch{return!1}}let sb=typeof AbortController=="function";function ob(){if(sb)return new AbortController}class ar{constructor(u={},f={}){u===void 0?u=null:$t(u,"First parameter");let g=vi(f,"Second parameter"),b=Jy(u,"First parameter");if(ic(this),b.type!==void 0)throw new RangeError("Invalid type is specified");let T=bi(g),q=Sn(g,1);vb(this,b,q,T)}get locked(){if(!Hr(this))throw Ri("locked");return jr(this)}abort(u=void 0){return Hr(this)?jr(this)?d(new TypeError("Cannot abort a stream that already has a writer")):wi(this,u):d(Ri("abort"))}close(){return Hr(this)?jr(this)?d(new TypeError("Cannot close a stream that already has a writer")):xt(this)?d(new TypeError("Cannot close an already-closing stream")):sc(this):d(Ri("close"))}getWriter(){if(!Hr(this))throw Ri("getWriter");return nc(this)}}Object.defineProperties(ar.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),n(ar.prototype.abort,"abort"),n(ar.prototype.close,"close"),n(ar.prototype.getWriter,"getWriter"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ar.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:!0});function nc(o){return new jt(o)}function ab(o,u,f,g,b=1,w=()=>1){let T=Object.create(ar.prototype);ic(T);let q=Object.create(Ur.prototype);return fc(T,q,o,u,f,g,b,w),T}function ic(o){o._state="writable",o._storedError=void 0,o._writer=void 0,o._writableStreamController=void 0,o._writeRequests=new $,o._inFlightWriteRequest=void 0,o._closeRequest=void 0,o._inFlightCloseRequest=void 0,o._pendingAbortRequest=void 0,o._backpressure=!1}function Hr(o){return!r(o)||!Object.prototype.hasOwnProperty.call(o,"_writableStreamController")?!1:o instanceof ar}function jr(o){return o._writer!==void 0}function wi(o,u){var f;if(o._state==="closed"||o._state==="errored")return h(void 0);o._writableStreamController._abortReason=u,(f=o._writableStreamController._abortController)===null||f===void 0||f.abort(u);let g=o._state;if(g==="closed"||g==="errored")return h(void 0);if(o._pendingAbortRequest!==void 0)return o._pendingAbortRequest._promise;let b=!1;g==="erroring"&&(b=!0,u=void 0);let w=c((T,q)=>{o._pendingAbortRequest={_promise:void 0,_resolve:T,_reject:q,_reason:u,_wasAlreadyErroring:b}});return o._pendingAbortRequest._promise=w,b||vo(o,u),w}function sc(o){let u=o._state;if(u==="closed"||u==="errored")return d(new TypeError(`The stream (in ${u} state) is not in the writable state and cannot be closed`));let f=c((b,w)=>{let T={_resolve:b,_reject:w};o._closeRequest=T}),g=o._writer;return g!==void 0&&o._backpressure&&u==="writable"&&ko(g),wb(o._writableStreamController),f}function ub(o){return c((f,g)=>{let b={_resolve:f,_reject:g};o._writeRequests.push(b)})}function bo(o,u){if(o._state==="writable"){vo(o,u);return}wo(o)}function vo(o,u){let f=o._writableStreamController;o._state="erroring",o._storedError=u;let g=o._writer;g!==void 0&&ac(g,u),!db(o)&&f._started&&wo(o)}function wo(o){o._state="errored",o._writableStreamController[ae]();let u=o._storedError;if(o._writeRequests.forEach(b=>{b._reject(u)}),o._writeRequests=new $,o._pendingAbortRequest===void 0){Si(o);return}let f=o._pendingAbortRequest;if(o._pendingAbortRequest=void 0,f._wasAlreadyErroring){f._reject(u),Si(o);return}let g=o._writableStreamController[j](f._reason);m(g,()=>(f._resolve(),Si(o),null),b=>(f._reject(b),Si(o),null))}function lb(o){o._inFlightWriteRequest._resolve(void 0),o._inFlightWriteRequest=void 0}function cb(o,u){o._inFlightWriteRequest._reject(u),o._inFlightWriteRequest=void 0,bo(o,u)}function fb(o){o._inFlightCloseRequest._resolve(void 0),o._inFlightCloseRequest=void 0,o._state==="erroring"&&(o._storedError=void 0,o._pendingAbortRequest!==void 0&&(o._pendingAbortRequest._resolve(),o._pendingAbortRequest=void 0)),o._state="closed";let f=o._writer;f!==void 0&&mc(f)}function hb(o,u){o._inFlightCloseRequest._reject(u),o._inFlightCloseRequest=void 0,o._pendingAbortRequest!==void 0&&(o._pendingAbortRequest._reject(u),o._pendingAbortRequest=void 0),bo(o,u)}function xt(o){return!(o._closeRequest===void 0&&o._inFlightCloseRequest===void 0)}function db(o){return!(o._inFlightWriteRequest===void 0&&o._inFlightCloseRequest===void 0)}function pb(o){o._inFlightCloseRequest=o._closeRequest,o._closeRequest=void 0}function mb(o){o._inFlightWriteRequest=o._writeRequests.shift()}function Si(o){o._closeRequest!==void 0&&(o._closeRequest._reject(o._storedError),o._closeRequest=void 0);let u=o._writer;u!==void 0&&Ao(u,o._storedError)}function So(o,u){let f=o._writer;f!==void 0&&u!==o._backpressure&&(u?kb(f):ko(f)),o._backpressure=u}class jt{constructor(u){if(at(u,1,"WritableStreamDefaultWriter"),rc(u,"First parameter"),jr(u))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=u,u._writer=this;let f=u._state;if(f==="writable")!xt(u)&&u._backpressure?Ci(this):gc(this),Ai(this);else if(f==="erroring")Co(this,u._storedError),Ai(this);else if(f==="closed")gc(this),Ab(this);else{let g=u._storedError;Co(this,g),pc(this,g)}}get closed(){return Tr(this)?this._closedPromise:d(Rr("closed"))}get desiredSize(){if(!Tr(this))throw Rr("desiredSize");if(this._ownerWritableStream===void 0)throw Tn("desiredSize");return bb(this)}get ready(){return Tr(this)?this._readyPromise:d(Rr("ready"))}abort(u=void 0){return Tr(this)?this._ownerWritableStream===void 0?d(Tn("abort")):gb(this,u):d(Rr("abort"))}close(){if(!Tr(this))return d(Rr("close"));let u=this._ownerWritableStream;return u===void 0?d(Tn("close")):xt(u)?d(new TypeError("Cannot close an already-closing stream")):oc(this)}releaseLock(){if(!Tr(this))throw Rr("releaseLock");this._ownerWritableStream!==void 0&&uc(this)}write(u=void 0){return Tr(this)?this._ownerWritableStream===void 0?d(Tn("write to")):lc(this,u):d(Rr("write"))}}Object.defineProperties(jt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),n(jt.prototype.abort,"abort"),n(jt.prototype.close,"close"),n(jt.prototype.releaseLock,"releaseLock"),n(jt.prototype.write,"write"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(jt.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Tr(o){return!r(o)||!Object.prototype.hasOwnProperty.call(o,"_ownerWritableStream")?!1:o instanceof jt}function gb(o,u){let f=o._ownerWritableStream;return wi(f,u)}function oc(o){let u=o._ownerWritableStream;return sc(u)}function _b(o){let u=o._ownerWritableStream,f=u._state;return xt(u)||f==="closed"?h(void 0):f==="errored"?d(u._storedError):oc(o)}function yb(o,u){o._closedPromiseState==="pending"?Ao(o,u):Cb(o,u)}function ac(o,u){o._readyPromiseState==="pending"?_c(o,u):Ob(o,u)}function bb(o){let u=o._ownerWritableStream,f=u._state;return f==="errored"||f==="erroring"?null:f==="closed"?0:hc(u._writableStreamController)}function uc(o){let u=o._ownerWritableStream,f=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");ac(o,f),yb(o,f),u._writer=void 0,o._ownerWritableStream=void 0}function lc(o,u){let f=o._ownerWritableStream,g=f._writableStreamController,b=Sb(g,u);if(f!==o._ownerWritableStream)return d(Tn("write to"));let w=f._state;if(w==="errored")return d(f._storedError);if(xt(f)||w==="closed")return d(new TypeError("The stream is closing or closed and cannot be written to"));if(w==="erroring")return d(f._storedError);let T=ub(f);return Eb(g,u,b),T}let cc={};class Ur{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Eo(this))throw Ro("abortReason");return this._abortReason}get signal(){if(!Eo(this))throw Ro("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(u=void 0){if(!Eo(this))throw Ro("error");this._controlledWritableStream._state==="writable"&&dc(this,u)}[j](u){let f=this._abortAlgorithm(u);return Ei(this),f}[ae](){sr(this)}}Object.defineProperties(Ur.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ur.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Eo(o){return!r(o)||!Object.prototype.hasOwnProperty.call(o,"_controlledWritableStream")?!1:o instanceof Ur}function fc(o,u,f,g,b,w,T,q){u._controlledWritableStream=o,o._writableStreamController=u,u._queue=void 0,u._queueTotalSize=void 0,sr(u),u._abortReason=void 0,u._abortController=ob(),u._started=!1,u._strategySizeAlgorithm=q,u._strategyHWM=T,u._writeAlgorithm=g,u._closeAlgorithm=b,u._abortAlgorithm=w;let V=To(u);So(o,V);let K=f(),X=h(K);m(X,()=>(u._started=!0,Ti(u),null),re=>(u._started=!0,bo(o,re),null))}function vb(o,u,f,g){let b=Object.create(Ur.prototype),w,T,q,V;u.start!==void 0?w=()=>u.start(b):w=()=>{},u.write!==void 0?T=K=>u.write(K,b):T=()=>h(void 0),u.close!==void 0?q=()=>u.close():q=()=>h(void 0),u.abort!==void 0?V=K=>u.abort(K):V=()=>h(void 0),fc(o,b,w,T,q,V,f,g)}function Ei(o){o._writeAlgorithm=void 0,o._closeAlgorithm=void 0,o._abortAlgorithm=void 0,o._strategySizeAlgorithm=void 0}function wb(o){co(o,cc,0),Ti(o)}function Sb(o,u){try{return o._strategySizeAlgorithm(u)}catch(f){return En(o,f),1}}function hc(o){return o._strategyHWM-o._queueTotalSize}function Eb(o,u,f){try{co(o,u,f)}catch(b){En(o,b);return}let g=o._controlledWritableStream;if(!xt(g)&&g._state==="writable"){let b=To(o);So(g,b)}Ti(o)}function Ti(o){let u=o._controlledWritableStream;if(!o._started||u._inFlightWriteRequest!==void 0)return;if(u._state==="erroring"){wo(u);return}if(o._queue.length===0)return;let g=Dy(o);g===cc?Tb(o):Rb(o,g)}function En(o,u){o._controlledWritableStream._state==="writable"&&dc(o,u)}function Tb(o){let u=o._controlledWritableStream;pb(u),lo(o);let f=o._closeAlgorithm();Ei(o),m(f,()=>(fb(u),null),g=>(hb(u,g),null))}function Rb(o,u){let f=o._controlledWritableStream;mb(f);let g=o._writeAlgorithm(u);m(g,()=>{lb(f);let b=f._state;if(lo(o),!xt(f)&&b==="writable"){let w=To(o);So(f,w)}return Ti(o),null},b=>(f._state==="writable"&&Ei(o),cb(f,b),null))}function To(o){return hc(o)<=0}function dc(o,u){let f=o._controlledWritableStream;Ei(o),vo(f,u)}function Ri(o){return new TypeError(`WritableStream.prototype.${o} can only be used on a WritableStream`)}function Ro(o){return new TypeError(`WritableStreamDefaultController.prototype.${o} can only be used on a WritableStreamDefaultController`)}function Rr(o){return new TypeError(`WritableStreamDefaultWriter.prototype.${o} can only be used on a WritableStreamDefaultWriter`)}function Tn(o){return new TypeError("Cannot "+o+" a stream using a released writer")}function Ai(o){o._closedPromise=c((u,f)=>{o._closedPromise_resolve=u,o._closedPromise_reject=f,o._closedPromiseState="pending"})}function pc(o,u){Ai(o),Ao(o,u)}function Ab(o){Ai(o),mc(o)}function Ao(o,u){o._closedPromise_reject!==void 0&&(E(o._closedPromise),o._closedPromise_reject(u),o._closedPromise_resolve=void 0,o._closedPromise_reject=void 0,o._closedPromiseState="rejected")}function Cb(o,u){pc(o,u)}function mc(o){o._closedPromise_resolve!==void 0&&(o._closedPromise_resolve(void 0),o._closedPromise_resolve=void 0,o._closedPromise_reject=void 0,o._closedPromiseState="resolved")}function Ci(o){o._readyPromise=c((u,f)=>{o._readyPromise_resolve=u,o._readyPromise_reject=f}),o._readyPromiseState="pending"}function Co(o,u){Ci(o),_c(o,u)}function gc(o){Ci(o),ko(o)}function _c(o,u){o._readyPromise_reject!==void 0&&(E(o._readyPromise),o._readyPromise_reject(u),o._readyPromise_resolve=void 0,o._readyPromise_reject=void 0,o._readyPromiseState="rejected")}function kb(o){Ci(o)}function Ob(o,u){Co(o,u)}function ko(o){o._readyPromise_resolve!==void 0&&(o._readyPromise_resolve(void 0),o._readyPromise_resolve=void 0,o._readyPromise_reject=void 0,o._readyPromiseState="fulfilled")}function xb(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof global<"u")return global}let Oo=xb();function Pb(o){if(!(typeof o=="function"||typeof o=="object")||o.name!=="DOMException")return!1;try{return new o,!0}catch{return!1}}function Lb(){let o=Oo?.DOMException;return Pb(o)?o:void 0}function Ib(){let o=function(f,g){this.message=f||"",this.name=g||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return n(o,"DOMException"),o.prototype=Object.create(Error.prototype),Object.defineProperty(o.prototype,"constructor",{value:o,writable:!0,configurable:!0}),o}let Fb=Lb()||Ib();function yc(o,u,f,g,b,w){let T=F(o),q=nc(u);o._disturbed=!0;let V=!1,K=h(void 0);return c((X,re)=>{let ge;if(w!==void 0){if(ge=()=>{let G=w.reason!==void 0?w.reason:new Fb("Aborted","AbortError"),se=[];g||se.push(()=>u._state==="writable"?wi(u,G):h(void 0)),b||se.push(()=>o._state==="readable"?Tt(o,G):h(void 0)),Je(()=>Promise.all(se.map(ye=>ye())),!0,G)},w.aborted){ge();return}w.addEventListener("abort",ge)}function Rt(){return c((G,se)=>{function ye(ut){ut?G():p(Vr(),ye,se)}ye(!1)})}function Vr(){return V?h(!0):p(q._readyPromise,()=>c((G,se)=>{yn(T,{_chunkSteps:ye=>{K=p(lc(q,ye),void 0,t),G(!1)},_closeSteps:()=>G(!0),_errorSteps:se})}))}if(zt(o,T._closedPromise,G=>(g?yt(!0,G):Je(()=>wi(u,G),!0,G),null)),zt(u,q._closedPromise,G=>(b?yt(!0,G):Je(()=>Tt(o,G),!0,G),null)),Ve(o,T._closedPromise,()=>(f?yt():Je(()=>_b(q)),null)),xt(u)||u._state==="closed"){let G=new TypeError("the destination writable stream closed before all data could be piped to it");b?yt(!0,G):Je(()=>Tt(o,G),!0,G)}E(Rt());function fr(){let G=K;return p(K,()=>G!==K?fr():void 0)}function zt(G,se,ye){G._state==="errored"?ye(G._storedError):y(se,ye)}function Ve(G,se,ye){G._state==="closed"?ye():_(se,ye)}function Je(G,se,ye){if(V)return;V=!0,u._state==="writable"&&!xt(u)?_(fr(),ut):ut();function ut(){return m(G(),()=>Kt(se,ye),Yr=>Kt(!0,Yr)),null}}function yt(G,se){V||(V=!0,u._state==="writable"&&!xt(u)?_(fr(),()=>Kt(G,se)):Kt(G,se))}function Kt(G,se){return uc(q),ie(T),w!==void 0&&w.removeEventListener("abort",ge),G?re(se):X(void 0),null}})}class Ut{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!ki(this))throw xi("desiredSize");return xo(this)}close(){if(!ki(this))throw xi("close");if(!Kr(this))throw new TypeError("The stream is not in a state that permits close");Ar(this)}enqueue(u=void 0){if(!ki(this))throw xi("enqueue");if(!Kr(this))throw new TypeError("The stream is not in a state that permits enqueue");return zr(this,u)}error(u=void 0){if(!ki(this))throw xi("error");Et(this,u)}[U](u){sr(this);let f=this._cancelAlgorithm(u);return Oi(this),f}[J](u){let f=this._controlledReadableStream;if(this._queue.length>0){let g=lo(this);this._closeRequested&&this._queue.length===0?(Oi(this),Cn(f)):Rn(this),u._chunkSteps(g)}else oe(f,u),Rn(this)}[Se](){}}Object.defineProperties(Ut.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),n(Ut.prototype.close,"close"),n(Ut.prototype.enqueue,"enqueue"),n(Ut.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ut.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function ki(o){return!r(o)||!Object.prototype.hasOwnProperty.call(o,"_controlledReadableStream")?!1:o instanceof Ut}function Rn(o){if(!bc(o))return;if(o._pulling){o._pullAgain=!0;return}o._pulling=!0;let f=o._pullAlgorithm();m(f,()=>(o._pulling=!1,o._pullAgain&&(o._pullAgain=!1,Rn(o)),null),g=>(Et(o,g),null))}function bc(o){let u=o._controlledReadableStream;return!Kr(o)||!o._started?!1:!!(lr(u)&&je(u)>0||xo(o)>0)}function Oi(o){o._pullAlgorithm=void 0,o._cancelAlgorithm=void 0,o._strategySizeAlgorithm=void 0}function Ar(o){if(!Kr(o))return;let u=o._controlledReadableStream;o._closeRequested=!0,o._queue.length===0&&(Oi(o),Cn(u))}function zr(o,u){if(!Kr(o))return;let f=o._controlledReadableStream;if(lr(f)&&je(f)>0)Te(f,u,!1);else{let g;try{g=o._strategySizeAlgorithm(u)}catch(b){throw Et(o,b),b}try{co(o,u,g)}catch(b){throw Et(o,b),b}}Rn(o)}function Et(o,u){let f=o._controlledReadableStream;f._state==="readable"&&(sr(o),Oi(o),Ec(f,u))}function xo(o){let u=o._controlledReadableStream._state;return u==="errored"?null:u==="closed"?0:o._strategyHWM-o._queueTotalSize}function Nb(o){return!bc(o)}function Kr(o){let u=o._controlledReadableStream._state;return!o._closeRequested&&u==="readable"}function vc(o,u,f,g,b,w,T){u._controlledReadableStream=o,u._queue=void 0,u._queueTotalSize=void 0,sr(u),u._started=!1,u._closeRequested=!1,u._pullAgain=!1,u._pulling=!1,u._strategySizeAlgorithm=T,u._strategyHWM=w,u._pullAlgorithm=g,u._cancelAlgorithm=b,o._readableStreamController=u;let q=f();m(h(q),()=>(u._started=!0,Rn(u),null),V=>(Et(u,V),null))}function Bb(o,u,f,g){let b=Object.create(Ut.prototype),w,T,q;u.start!==void 0?w=()=>u.start(b):w=()=>{},u.pull!==void 0?T=()=>u.pull(b):T=()=>h(void 0),u.cancel!==void 0?q=V=>u.cancel(V):q=()=>h(void 0),vc(o,b,w,T,q,f,g)}function xi(o){return new TypeError(`ReadableStreamDefaultController.prototype.${o} can only be used on a ReadableStreamDefaultController`)}function Db(o,u){return wr(o._readableStreamController)?qb(o):Mb(o)}function Mb(o,u){let f=F(o),g=!1,b=!1,w=!1,T=!1,q,V,K,X,re,ge=c(Ve=>{re=Ve});function Rt(){return g?(b=!0,h(void 0)):(g=!0,yn(f,{_chunkSteps:Je=>{S(()=>{b=!1;let yt=Je,Kt=Je;w||zr(K._readableStreamController,yt),T||zr(X._readableStreamController,Kt),g=!1,b&&Rt()})},_closeSteps:()=>{g=!1,w||Ar(K._readableStreamController),T||Ar(X._readableStreamController),(!w||!T)&&re(void 0)},_errorSteps:()=>{g=!1}}),h(void 0))}function Vr(Ve){if(w=!0,q=Ve,T){let Je=bn([q,V]),yt=Tt(o,Je);re(yt)}return ge}function fr(Ve){if(T=!0,V=Ve,w){let Je=bn([q,V]),yt=Tt(o,Je);re(yt)}return ge}function zt(){}return K=An(zt,Rt,Vr),X=An(zt,Rt,fr),y(f._closedPromise,Ve=>(Et(K._readableStreamController,Ve),Et(X._readableStreamController,Ve),(!w||!T)&&re(void 0),null)),[K,X]}function qb(o){let u=F(o),f=!1,g=!1,b=!1,w=!1,T=!1,q,V,K,X,re,ge=c(G=>{re=G});function Rt(G){y(G._closedPromise,se=>(G!==u||(_t(K._readableStreamController,se),_t(X._readableStreamController,se),(!w||!T)&&re(void 0)),null))}function Vr(){Er(u)&&(ie(u),u=F(o),Rt(u)),yn(u,{_chunkSteps:se=>{S(()=>{g=!1,b=!1;let ye=se,ut=se;if(!w&&!T)try{ut=Ml(se)}catch(Yr){_t(K._readableStreamController,Yr),_t(X._readableStreamController,Yr),re(Tt(o,Yr));return}w||mi(K._readableStreamController,ye),T||mi(X._readableStreamController,ut),f=!1,g?zt():b&&Ve()})},_closeSteps:()=>{f=!1,w||vn(K._readableStreamController),T||vn(X._readableStreamController),K._readableStreamController._pendingPullIntos.length>0&&gi(K._readableStreamController,0),X._readableStreamController._pendingPullIntos.length>0&&gi(X._readableStreamController,0),(!w||!T)&&re(void 0)},_errorSteps:()=>{f=!1}})}function fr(G,se){nr(u)&&(ie(u),u=Xl(o),Rt(u));let ye=se?X:K,ut=se?K:X;ec(u,G,1,{_chunkSteps:Qr=>{S(()=>{g=!1,b=!1;let Xr=se?T:w;if(se?w:T)Xr||_i(ye._readableStreamController,Qr);else{let Bc;try{Bc=Ml(Qr)}catch(No){_t(ye._readableStreamController,No),_t(ut._readableStreamController,No),re(Tt(o,No));return}Xr||_i(ye._readableStreamController,Qr),mi(ut._readableStreamController,Bc)}f=!1,g?zt():b&&Ve()})},_closeSteps:Qr=>{f=!1;let Xr=se?T:w,Mi=se?w:T;Xr||vn(ye._readableStreamController),Mi||vn(ut._readableStreamController),Qr!==void 0&&(Xr||_i(ye._readableStreamController,Qr),!Mi&&ut._readableStreamController._pendingPullIntos.length>0&&gi(ut._readableStreamController,0)),(!Xr||!Mi)&&re(void 0)},_errorSteps:()=>{f=!1}})}function zt(){if(f)return g=!0,h(void 0);f=!0;let G=go(K._readableStreamController);return G===null?Vr():fr(G._view,!1),h(void 0)}function Ve(){if(f)return b=!0,h(void 0);f=!0;let G=go(X._readableStreamController);return G===null?Vr():fr(G._view,!0),h(void 0)}function Je(G){if(w=!0,q=G,T){let se=bn([q,V]),ye=Tt(o,se);re(ye)}return ge}function yt(G){if(T=!0,V=G,w){let se=bn([q,V]),ye=Tt(o,se);re(ye)}return ge}function Kt(){}return K=Sc(Kt,zt,Je),X=Sc(Kt,Ve,yt),Rt(u),[K,X]}function $b(o){return r(o)&&typeof o.getReader<"u"}function Wb(o){return $b(o)?jb(o.getReader()):Hb(o)}function Hb(o){let u,f=Dl(o,"async"),g=t;function b(){let T;try{T=Iy(f)}catch(V){return d(V)}let q=h(T);return v(q,V=>{if(!r(V))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(Fy(V))Ar(u._readableStreamController);else{let X=Ny(V);zr(u._readableStreamController,X)}})}function w(T){let q=f.iterator,V;try{V=hi(q,"return")}catch(re){return d(re)}if(V===void 0)return h(void 0);let K;try{K=R(V,q,[T])}catch(re){return d(re)}let X=h(K);return v(X,re=>{if(!r(re))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return u=An(g,b,w,0),u}function jb(o){let u,f=t;function g(){let w;try{w=o.read()}catch(T){return d(T)}return v(w,T=>{if(!r(T))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(T.done)Ar(u._readableStreamController);else{let q=T.value;zr(u._readableStreamController,q)}})}function b(w){try{return h(o.cancel(w))}catch(T){return d(T)}}return u=An(f,g,b,0),u}function Ub(o,u){He(o,u);let f=o,g=f?.autoAllocateChunkSize,b=f?.cancel,w=f?.pull,T=f?.start,q=f?.type;return{autoAllocateChunkSize:g===void 0?void 0:pe(g,`${u} has member 'autoAllocateChunkSize' that`),cancel:b===void 0?void 0:zb(b,f,`${u} has member 'cancel' that`),pull:w===void 0?void 0:Kb(w,f,`${u} has member 'pull' that`),start:T===void 0?void 0:Gb(T,f,`${u} has member 'start' that`),type:q===void 0?void 0:Vb(q,`${u} has member 'type' that`)}}function zb(o,u,f){return Ae(o,f),g=>O(o,u,[g])}function Kb(o,u,f){return Ae(o,f),g=>O(o,u,[g])}function Gb(o,u,f){return Ae(o,f),g=>R(o,u,[g])}function Vb(o,u){if(o=`${o}`,o!=="bytes")throw new TypeError(`${u} '${o}' is not a valid enumeration value for ReadableStreamType`);return o}function Yb(o,u){return He(o,u),{preventCancel:!!o?.preventCancel}}function wc(o,u){He(o,u);let f=o?.preventAbort,g=o?.preventCancel,b=o?.preventClose,w=o?.signal;return w!==void 0&&Qb(w,`${u} has member 'signal' that`),{preventAbort:!!f,preventCancel:!!g,preventClose:!!b,signal:w}}function Qb(o,u){if(!ib(o))throw new TypeError(`${u} is not an AbortSignal.`)}function Xb(o,u){He(o,u);let f=o?.readable;M(f,"readable","ReadableWritablePair"),x(f,`${u} has member 'readable' that`);let g=o?.writable;return M(g,"writable","ReadableWritablePair"),rc(g,`${u} has member 'writable' that`),{readable:f,writable:g}}class Ue{constructor(u={},f={}){u===void 0?u=null:$t(u,"First parameter");let g=vi(f,"Second parameter"),b=Ub(u,"First parameter");if(Po(this),b.type==="bytes"){if(g.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let w=Sn(g,0);zy(this,b,w)}else{let w=bi(g),T=Sn(g,1);Bb(this,b,T,w)}}get locked(){if(!ur(this))throw Cr("locked");return lr(this)}cancel(u=void 0){return ur(this)?lr(this)?d(new TypeError("Cannot cancel a stream that already has a reader")):Tt(this,u):d(Cr("cancel"))}getReader(u=void 0){if(!ur(this))throw Cr("getReader");return Gy(u,"First parameter").mode===void 0?F(this):Xl(this)}pipeThrough(u,f={}){if(!ur(this))throw Cr("pipeThrough");at(u,1,"pipeThrough");let g=Xb(u,"First parameter"),b=wc(f,"Second parameter");if(lr(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(jr(g.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let w=yc(this,g.writable,b.preventClose,b.preventAbort,b.preventCancel,b.signal);return E(w),g.readable}pipeTo(u,f={}){if(!ur(this))return d(Cr("pipeTo"));if(u===void 0)return d("Parameter 1 is required in 'pipeTo'.");if(!Hr(u))return d(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let g;try{g=wc(f,"Second parameter")}catch(b){return d(b)}return lr(this)?d(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):jr(u)?d(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):yc(this,u,g.preventClose,g.preventAbort,g.preventCancel,g.signal)}tee(){if(!ur(this))throw Cr("tee");let u=Db(this);return bn(u)}values(u=void 0){if(!ur(this))throw Cr("values");let f=Yb(u,"First parameter");return Py(this,f.preventCancel)}[uo](u){return this.values(u)}static from(u){return Wb(u)}}Object.defineProperties(Ue,{from:{enumerable:!0}}),Object.defineProperties(Ue.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),n(Ue.from,"from"),n(Ue.prototype.cancel,"cancel"),n(Ue.prototype.getReader,"getReader"),n(Ue.prototype.pipeThrough,"pipeThrough"),n(Ue.prototype.pipeTo,"pipeTo"),n(Ue.prototype.tee,"tee"),n(Ue.prototype.values,"values"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ue.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(Ue.prototype,uo,{value:Ue.prototype.values,writable:!0,configurable:!0});function An(o,u,f,g=1,b=()=>1){let w=Object.create(Ue.prototype);Po(w);let T=Object.create(Ut.prototype);return vc(w,T,o,u,f,g,b),w}function Sc(o,u,f){let g=Object.create(Ue.prototype);Po(g);let b=Object.create(Ht.prototype);return Ql(g,b,o,u,f,0,void 0),g}function Po(o){o._state="readable",o._reader=void 0,o._storedError=void 0,o._disturbed=!1}function ur(o){return!r(o)||!Object.prototype.hasOwnProperty.call(o,"_readableStreamController")?!1:o instanceof Ue}function lr(o){return o._reader!==void 0}function Tt(o,u){if(o._disturbed=!0,o._state==="closed")return h(void 0);if(o._state==="errored")return d(o._storedError);Cn(o);let f=o._reader;if(f!==void 0&&Er(f)){let b=f._readIntoRequests;f._readIntoRequests=new $,b.forEach(w=>{w._closeSteps(void 0)})}let g=o._readableStreamController[U](u);return v(g,t)}function Cn(o){o._state="closed";let u=o._reader;if(u!==void 0&&(Ge(u),nr(u))){let f=u._readRequests;u._readRequests=new $,f.forEach(g=>{g._closeSteps()})}}function Ec(o,u){o._state="errored",o._storedError=u;let f=o._reader;f!==void 0&&(ne(f,u),nr(f)?Ol(f,u):tc(f,u))}function Cr(o){return new TypeError(`ReadableStream.prototype.${o} can only be used on a ReadableStream`)}function Tc(o,u){He(o,u);let f=o?.highWaterMark;return M(f,"highWaterMark","QueuingStrategyInit"),{highWaterMark:fe(f)}}let Rc=o=>o.byteLength;n(Rc,"size");class Pi{constructor(u){at(u,1,"ByteLengthQueuingStrategy"),u=Tc(u,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=u.highWaterMark}get highWaterMark(){if(!Cc(this))throw Ac("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Cc(this))throw Ac("size");return Rc}}Object.defineProperties(Pi.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Pi.prototype,Symbol.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Ac(o){return new TypeError(`ByteLengthQueuingStrategy.prototype.${o} can only be used on a ByteLengthQueuingStrategy`)}function Cc(o){return!r(o)||!Object.prototype.hasOwnProperty.call(o,"_byteLengthQueuingStrategyHighWaterMark")?!1:o instanceof Pi}let kc=()=>1;n(kc,"size");class Li{constructor(u){at(u,1,"CountQueuingStrategy"),u=Tc(u,"First parameter"),this._countQueuingStrategyHighWaterMark=u.highWaterMark}get highWaterMark(){if(!xc(this))throw Oc("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!xc(this))throw Oc("size");return kc}}Object.defineProperties(Li.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Li.prototype,Symbol.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Oc(o){return new TypeError(`CountQueuingStrategy.prototype.${o} can only be used on a CountQueuingStrategy`)}function xc(o){return!r(o)||!Object.prototype.hasOwnProperty.call(o,"_countQueuingStrategyHighWaterMark")?!1:o instanceof Li}function Zb(o,u){He(o,u);let f=o?.cancel,g=o?.flush,b=o?.readableType,w=o?.start,T=o?.transform,q=o?.writableType;return{cancel:f===void 0?void 0:rv(f,o,`${u} has member 'cancel' that`),flush:g===void 0?void 0:Jb(g,o,`${u} has member 'flush' that`),readableType:b,start:w===void 0?void 0:ev(w,o,`${u} has member 'start' that`),transform:T===void 0?void 0:tv(T,o,`${u} has member 'transform' that`),writableType:q}}function Jb(o,u,f){return Ae(o,f),g=>O(o,u,[g])}function ev(o,u,f){return Ae(o,f),g=>R(o,u,[g])}function tv(o,u,f){return Ae(o,f),(g,b)=>O(o,u,[g,b])}function rv(o,u,f){return Ae(o,f),g=>O(o,u,[g])}class Ii{constructor(u={},f={},g={}){u===void 0&&(u=null);let b=vi(f,"Second parameter"),w=vi(g,"Third parameter"),T=Zb(u,"First parameter");if(T.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(T.writableType!==void 0)throw new RangeError("Invalid writableType specified");let q=Sn(w,0),V=bi(w),K=Sn(b,1),X=bi(b),re,ge=c(Rt=>{re=Rt});nv(this,ge,K,X,q,V),sv(this,T),T.start!==void 0?re(T.start(this._transformStreamController)):re(void 0)}get readable(){if(!Pc(this))throw Nc("readable");return this._readable}get writable(){if(!Pc(this))throw Nc("writable");return this._writable}}Object.defineProperties(Ii.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ii.prototype,Symbol.toStringTag,{value:"TransformStream",configurable:!0});function nv(o,u,f,g,b,w){function T(){return u}function q(ge){return uv(o,ge)}function V(ge){return lv(o,ge)}function K(){return cv(o)}o._writable=ab(T,q,K,V,f,g);function X(){return fv(o)}function re(ge){return hv(o,ge)}o._readable=An(T,X,re,b,w),o._backpressure=void 0,o._backpressureChangePromise=void 0,o._backpressureChangePromise_resolve=void 0,Fi(o,!0),o._transformStreamController=void 0}function Pc(o){return!r(o)||!Object.prototype.hasOwnProperty.call(o,"_transformStreamController")?!1:o instanceof Ii}function Lc(o,u){Et(o._readable._readableStreamController,u),Lo(o,u)}function Lo(o,u){Bi(o._transformStreamController),En(o._writable._writableStreamController,u),Io(o)}function Io(o){o._backpressure&&Fi(o,!1)}function Fi(o,u){o._backpressureChangePromise!==void 0&&o._backpressureChangePromise_resolve(),o._backpressureChangePromise=c(f=>{o._backpressureChangePromise_resolve=f}),o._backpressure=u}class cr{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Ni(this))throw Di("desiredSize");let u=this._controlledTransformStream._readable._readableStreamController;return xo(u)}enqueue(u=void 0){if(!Ni(this))throw Di("enqueue");Ic(this,u)}error(u=void 0){if(!Ni(this))throw Di("error");ov(this,u)}terminate(){if(!Ni(this))throw Di("terminate");av(this)}}Object.defineProperties(cr.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),n(cr.prototype.enqueue,"enqueue"),n(cr.prototype.error,"error"),n(cr.prototype.terminate,"terminate"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(cr.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Ni(o){return!r(o)||!Object.prototype.hasOwnProperty.call(o,"_controlledTransformStream")?!1:o instanceof cr}function iv(o,u,f,g,b){u._controlledTransformStream=o,o._transformStreamController=u,u._transformAlgorithm=f,u._flushAlgorithm=g,u._cancelAlgorithm=b,u._finishPromise=void 0,u._finishPromise_resolve=void 0,u._finishPromise_reject=void 0}function sv(o,u){let f=Object.create(cr.prototype),g,b,w;u.transform!==void 0?g=T=>u.transform(T,f):g=T=>{try{return Ic(f,T),h(void 0)}catch(q){return d(q)}},u.flush!==void 0?b=()=>u.flush(f):b=()=>h(void 0),u.cancel!==void 0?w=T=>u.cancel(T):w=()=>h(void 0),iv(o,f,g,b,w)}function Bi(o){o._transformAlgorithm=void 0,o._flushAlgorithm=void 0,o._cancelAlgorithm=void 0}function Ic(o,u){let f=o._controlledTransformStream,g=f._readable._readableStreamController;if(!Kr(g))throw new TypeError("Readable side is not in a state that permits enqueue");try{zr(g,u)}catch(w){throw Lo(f,w),f._readable._storedError}Nb(g)!==f._backpressure&&Fi(f,!0)}function ov(o,u){Lc(o._controlledTransformStream,u)}function Fc(o,u){let f=o._transformAlgorithm(u);return v(f,void 0,g=>{throw Lc(o._controlledTransformStream,g),g})}function av(o){let u=o._controlledTransformStream,f=u._readable._readableStreamController;Ar(f);let g=new TypeError("TransformStream terminated");Lo(u,g)}function uv(o,u){let f=o._transformStreamController;if(o._backpressure){let g=o._backpressureChangePromise;return v(g,()=>{let b=o._writable;if(b._state==="erroring")throw b._storedError;return Fc(f,u)})}return Fc(f,u)}function lv(o,u){let f=o._transformStreamController;if(f._finishPromise!==void 0)return f._finishPromise;let g=o._readable;f._finishPromise=c((w,T)=>{f._finishPromise_resolve=w,f._finishPromise_reject=T});let b=f._cancelAlgorithm(u);return Bi(f),m(b,()=>(g._state==="errored"?Gr(f,g._storedError):(Et(g._readableStreamController,u),Fo(f)),null),w=>(Et(g._readableStreamController,w),Gr(f,w),null)),f._finishPromise}function cv(o){let u=o._transformStreamController;if(u._finishPromise!==void 0)return u._finishPromise;let f=o._readable;u._finishPromise=c((b,w)=>{u._finishPromise_resolve=b,u._finishPromise_reject=w});let g=u._flushAlgorithm();return Bi(u),m(g,()=>(f._state==="errored"?Gr(u,f._storedError):(Ar(f._readableStreamController),Fo(u)),null),b=>(Et(f._readableStreamController,b),Gr(u,b),null)),u._finishPromise}function fv(o){return Fi(o,!1),o._backpressureChangePromise}function hv(o,u){let f=o._transformStreamController;if(f._finishPromise!==void 0)return f._finishPromise;let g=o._writable;f._finishPromise=c((w,T)=>{f._finishPromise_resolve=w,f._finishPromise_reject=T});let b=f._cancelAlgorithm(u);return Bi(f),m(b,()=>(g._state==="errored"?Gr(f,g._storedError):(En(g._writableStreamController,u),Io(o),Fo(f)),null),w=>(En(g._writableStreamController,w),Io(o),Gr(f,w),null)),f._finishPromise}function Di(o){return new TypeError(`TransformStreamDefaultController.prototype.${o} can only be used on a TransformStreamDefaultController`)}function Fo(o){o._finishPromise_resolve!==void 0&&(o._finishPromise_resolve(),o._finishPromise_resolve=void 0,o._finishPromise_reject=void 0)}function Gr(o,u){o._finishPromise_reject!==void 0&&(E(o._finishPromise),o._finishPromise_reject(u),o._finishPromise_resolve=void 0,o._finishPromise_reject=void 0)}function Nc(o){return new TypeError(`TransformStream.prototype.${o} can only be used on a TransformStream`)}e.ByteLengthQueuingStrategy=Pi,e.CountQueuingStrategy=Li,e.ReadableByteStreamController=Ht,e.ReadableStream=Ue,e.ReadableStreamBYOBReader=or,e.ReadableStreamBYOBRequest=vr,e.ReadableStreamDefaultController=Ut,e.ReadableStreamDefaultReader=rr,e.TransformStream=Ii,e.TransformStreamDefaultController=cr,e.WritableStream=ar,e.WritableStreamDefaultController=Ur,e.WritableStreamDefaultWriter=jt})});var M_=W(()=>{if(!globalThis.ReadableStream)try{let e=require("node:process"),{emitWarning:t}=e;try{e.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),e.emitWarning=t}catch(r){throw e.emitWarning=t,r}}catch{Object.assign(globalThis,D_())}try{let{Blob:e}=require("buffer");e&&!e.prototype.stream&&(e.prototype.stream=function(r){let i=0,n=this;return new ReadableStream({type:"bytes",async pull(s){let l=await n.slice(i,Math.min(n.size,i+65536)).arrayBuffer();i+=l.byteLength,s.enqueue(new Uint8Array(l)),i===n.size&&s.close()}})})}catch{}});async function*cl(e,t=!0){for(let r of e)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r))if(t){let i=r.byteOffset,n=r.byteOffset+r.byteLength;for(;i!==n;){let s=Math.min(n-i,q_),a=r.buffer.slice(i,i+s);i+=a.byteLength,yield new Uint8Array(a)}}else yield r;else{let i=0,n=r;for(;i!==n.size;){let a=await n.slice(i,Math.min(n.size,i+q_)).arrayBuffer();i+=a.byteLength,yield new Uint8Array(a)}}}var RL,q_,$_,mx,kt,ri=Fe(()=>{RL=Ne(M_(),1);q_=65536;$_=class fl{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],r={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof r!="object"&&typeof r!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");r===null&&(r={});let i=new TextEncoder;for(let s of t){let a;ArrayBuffer.isView(s)?a=new Uint8Array(s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)):s instanceof ArrayBuffer?a=new Uint8Array(s.slice(0)):s instanceof fl?a=s:a=i.encode(`${s}`),this.#r+=ArrayBuffer.isView(a)?a.byteLength:a.size,this.#e.push(a)}this.#n=`${r.endings===void 0?"transparent":r.endings}`;let n=r.type===void 0?"":String(r.type);this.#t=/^[\x20-\x7E]*$/.test(n)?n:""}get size(){return this.#r}get type(){return this.#t}async text(){let t=new TextDecoder,r="";for await(let i of cl(this.#e,!1))r+=t.decode(i,{stream:!0});return r+=t.decode(),r}async arrayBuffer(){let t=new Uint8Array(this.size),r=0;for await(let i of cl(this.#e,!1))t.set(i,r),r+=i.length;return t.buffer}stream(){let t=cl(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(r){let i=await t.next();i.done?r.close():r.enqueue(i.value)},async cancel(){await t.return()}})}slice(t=0,r=this.size,i=""){let{size:n}=this,s=t<0?Math.max(n+t,0):Math.min(t,n),a=r<0?Math.max(n+r,0):Math.min(r,n),l=Math.max(a-s,0),c=this.#e,h=[],d=0;for(let m of c){if(d>=l)break;let _=ArrayBuffer.isView(m)?m.byteLength:m.size;if(s&&_<=s)s-=_,a-=_;else{let y;ArrayBuffer.isView(m)?(y=m.subarray(s,Math.min(_,a)),d+=y.byteLength):(y=m.slice(s,Math.min(_,a)),d+=y.size),a-=_,h.push(y),s=0}}let p=new fl([],{type:String(i).toLowerCase()});return p.#r=l,p.#e=h,p}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties($_.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});mx=$_,kt=mx});var gx,_x,gr,hl=Fe(()=>{ri();gx=class extends kt{#e=0;#t="";constructor(t,r,i={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,i),i===null&&(i={});let n=i.lastModified===void 0?Date.now():Number(i.lastModified);Number.isNaN(n)||(this.#e=n),this.#t=String(r)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof kt&&/^(File)$/.test(t[Symbol.toStringTag])}},_x=gx,gr=_x});function j_(e,t=kt){var r=`${W_()}${W_()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],n=`--${r}\r
Content-Disposition: form-data; name="`;return e.forEach((s,a)=>typeof s=="string"?i.push(n+dl(a)+`"\r
\r
${s.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):i.push(n+dl(a)+`"; filename="${dl(s.name,1)}"\r
Content-Type: ${s.type||"application/octet-stream"}\r
\r
`,s,`\r
`)),i.push(`--${r}--`),new t(i,{type:"multipart/form-data; boundary="+r})}var ni,yx,bx,W_,vx,H_,dl,Br,_r,Gs=Fe(()=>{ri();hl();({toStringTag:ni,iterator:yx,hasInstance:bx}=Symbol),W_=Math.random,vx="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),H_=(e,t,r)=>(e+="",/^(Blob|File)$/.test(t&&t[ni])?[(r=r!==void 0?r+"":t[ni]=="File"?t.name:"blob",e),t.name!==r||t[ni]=="blob"?new gr([t],r,t):t]:[e,t+""]),dl=(e,t)=>(t?e:e.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Br=(e,t,r)=>{if(t.length<r)throw new TypeError(`Failed to execute '${e}' on 'FormData': ${r} arguments required, but only ${t.length} present.`)},_r=class{#e=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[ni](){return"FormData"}[yx](){return this.entries()}static[bx](t){return t&&typeof t=="object"&&t[ni]==="FormData"&&!vx.some(r=>typeof t[r]!="function")}append(...t){Br("append",arguments,2),this.#e.push(H_(...t))}delete(t){Br("delete",arguments,1),t+="",this.#e=this.#e.filter(([r])=>r!==t)}get(t){Br("get",arguments,1),t+="";for(var r=this.#e,i=r.length,n=0;n<i;n++)if(r[n][0]===t)return r[n][1];return null}getAll(t,r){return Br("getAll",arguments,1),r=[],t+="",this.#e.forEach(i=>i[0]===t&&r.push(i[1])),r}has(t){return Br("has",arguments,1),t+="",this.#e.some(r=>r[0]===t)}forEach(t,r){Br("forEach",arguments,1);for(var[i,n]of this)t.call(r,n,i,this)}set(...t){Br("set",arguments,2);var r=[],i=!0;t=H_(...t),this.#e.forEach(n=>{n[0]===t[0]?i&&(i=!r.push(t)):r.push(n)}),i&&r.push(t),this.#e=r}*entries(){yield*this.#e}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var Jt,Vs=Fe(()=>{Jt=class extends Error{constructor(t,r){super(t),Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}});var Xe,pl=Fe(()=>{Vs();Xe=class extends Jt{constructor(t,r,i){super(t,r),i&&(this.code=this.errno=i.code,this.erroredSysCall=i.syscall)}}});var Ys,ml,ii,U_,z_,K_,Qs=Fe(()=>{Ys=Symbol.toStringTag,ml=e=>typeof e=="object"&&typeof e.append=="function"&&typeof e.delete=="function"&&typeof e.get=="function"&&typeof e.getAll=="function"&&typeof e.has=="function"&&typeof e.set=="function"&&typeof e.sort=="function"&&e[Ys]==="URLSearchParams",ii=e=>e&&typeof e=="object"&&typeof e.arrayBuffer=="function"&&typeof e.type=="string"&&typeof e.stream=="function"&&typeof e.constructor=="function"&&/^(Blob|File)$/.test(e[Ys]),U_=e=>typeof e=="object"&&(e[Ys]==="AbortSignal"||e[Ys]==="EventTarget"),z_=(e,t)=>{let r=new URL(t).hostname,i=new URL(e).hostname;return r===i||r.endsWith(`.${i}`)},K_=(e,t)=>{let r=new URL(t).protocol,i=new URL(e).protocol;return r===i}});var V_=W((ML,G_)=>{if(!globalThis.DOMException)try{let{MessageChannel:e}=require("worker_threads"),t=new e().port1,r=new ArrayBuffer;t.postMessage(r,[r,r])}catch(e){e.constructor.name==="DOMException"&&(globalThis.DOMException=e.constructor)}G_.exports=globalThis.DOMException});var Dr,Y_,Q_,gl,X_,Z_,J_,ey,ty,ry,Xs,_l=Fe(()=>{Dr=require("node:fs"),Y_=require("node:path"),Q_=Ne(V_(),1);hl();ri();({stat:gl}=Dr.promises),X_=(e,t)=>ty((0,Dr.statSync)(e),e,t),Z_=(e,t)=>gl(e).then(r=>ty(r,e,t)),J_=(e,t)=>gl(e).then(r=>ry(r,e,t)),ey=(e,t)=>ry((0,Dr.statSync)(e),e,t),ty=(e,t,r="")=>new kt([new Xs({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],{type:r}),ry=(e,t,r="")=>new gr([new Xs({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],(0,Y_.basename)(t),{type:r,lastModified:e.mtimeMs}),Xs=class e{#e;#t;constructor(t){this.#e=t.path,this.#t=t.start,this.size=t.size,this.lastModified=t.lastModified}slice(t,r){return new e({path:this.#e,lastModified:this.lastModified,size:r-t,start:this.#t+t})}async*stream(){let{mtimeMs:t}=await gl(this.#e);if(t>this.lastModified)throw new Q_.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Dr.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var iy={};$i(iy,{toFormData:()=>Cx});function Ax(e){let t=e.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let r=t[2]||t[3]||"",i=r.slice(r.lastIndexOf("\\")+1);return i=i.replace(/%22/g,'"'),i=i.replace(/&#(\d{4});/g,(n,s)=>String.fromCharCode(s)),i}async function Cx(e,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let r=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!r)throw new TypeError("no or bad content-type header, no multipart boundary");let i=new yl(r[1]||r[2]),n,s,a,l,c,h,d=[],p=new _r,m=S=>{a+=E.decode(S,{stream:!0})},_=S=>{d.push(S)},y=()=>{let S=new gr(d,h,{type:c});p.append(l,S)},v=()=>{p.append(l,a)},E=new TextDecoder("utf-8");E.decode(),i.onPartBegin=function(){i.onPartData=m,i.onPartEnd=v,n="",s="",a="",l="",c="",h=null,d.length=0},i.onHeaderField=function(S){n+=E.decode(S,{stream:!0})},i.onHeaderValue=function(S){s+=E.decode(S,{stream:!0})},i.onHeaderEnd=function(){if(s+=E.decode(),n=n.toLowerCase(),n==="content-disposition"){let S=s.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);S&&(l=S[2]||S[3]||""),h=Ax(s),h&&(i.onPartData=_,i.onPartEnd=y)}else n==="content-type"&&(c=s);s="",n=""};for await(let S of e)i.write(S);return i.end(),p}var Mt,ve,ny,yr,Zs,Js,wx,si,Sx,Ex,Tx,Rx,Mr,yl,sy=Fe(()=>{_l();Gs();Mt=0,ve={START_BOUNDARY:Mt++,HEADER_FIELD_START:Mt++,HEADER_FIELD:Mt++,HEADER_VALUE_START:Mt++,HEADER_VALUE:Mt++,HEADER_VALUE_ALMOST_DONE:Mt++,HEADERS_ALMOST_DONE:Mt++,PART_DATA_START:Mt++,PART_DATA:Mt++,END:Mt++},ny=1,yr={PART_BOUNDARY:ny,LAST_BOUNDARY:ny*=2},Zs=10,Js=13,wx=32,si=45,Sx=58,Ex=97,Tx=122,Rx=e=>e|32,Mr=()=>{},yl=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=Mr,this.onHeaderField=Mr,this.onHeadersEnd=Mr,this.onHeaderValue=Mr,this.onPartBegin=Mr,this.onPartData=Mr,this.onPartEnd=Mr,this.boundaryChars={},t=`\r
--`+t;let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i),this.boundaryChars[r[i]]=!0;this.boundary=r,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=ve.START_BOUNDARY}write(t){let r=0,i=t.length,n=this.index,{lookbehind:s,boundary:a,boundaryChars:l,index:c,state:h,flags:d}=this,p=this.boundary.length,m=p-1,_=t.length,y,v,E=N=>{this[N+"Mark"]=r},S=N=>{delete this[N+"Mark"]},R=(N,$,j,ae)=>{($===void 0||$!==j)&&this[N](ae&&ae.subarray($,j))},O=(N,$)=>{let j=N+"Mark";j in this&&($?(R(N,this[j],r,t),delete this[j]):(R(N,this[j],t.length,t),this[j]=0))};for(r=0;r<i;r++)switch(y=t[r],h){case ve.START_BOUNDARY:if(c===a.length-2){if(y===si)d|=yr.LAST_BOUNDARY;else if(y!==Js)return;c++;break}else if(c-1===a.length-2){if(d&yr.LAST_BOUNDARY&&y===si)h=ve.END,d=0;else if(!(d&yr.LAST_BOUNDARY)&&y===Zs)c=0,R("onPartBegin"),h=ve.HEADER_FIELD_START;else return;break}y!==a[c+2]&&(c=-2),y===a[c+2]&&c++;break;case ve.HEADER_FIELD_START:h=ve.HEADER_FIELD,E("onHeaderField"),c=0;case ve.HEADER_FIELD:if(y===Js){S("onHeaderField"),h=ve.HEADERS_ALMOST_DONE;break}if(c++,y===si)break;if(y===Sx){if(c===1)return;O("onHeaderField",!0),h=ve.HEADER_VALUE_START;break}if(v=Rx(y),v<Ex||v>Tx)return;break;case ve.HEADER_VALUE_START:if(y===wx)break;E("onHeaderValue"),h=ve.HEADER_VALUE;case ve.HEADER_VALUE:y===Js&&(O("onHeaderValue",!0),R("onHeaderEnd"),h=ve.HEADER_VALUE_ALMOST_DONE);break;case ve.HEADER_VALUE_ALMOST_DONE:if(y!==Zs)return;h=ve.HEADER_FIELD_START;break;case ve.HEADERS_ALMOST_DONE:if(y!==Zs)return;R("onHeadersEnd"),h=ve.PART_DATA_START;break;case ve.PART_DATA_START:h=ve.PART_DATA,E("onPartData");case ve.PART_DATA:if(n=c,c===0){for(r+=m;r<_&&!(t[r]in l);)r+=p;r-=m,y=t[r]}if(c<a.length)a[c]===y?(c===0&&O("onPartData",!0),c++):c=0;else if(c===a.length)c++,y===Js?d|=yr.PART_BOUNDARY:y===si?d|=yr.LAST_BOUNDARY:c=0;else if(c-1===a.length)if(d&yr.PART_BOUNDARY){if(c=0,y===Zs){d&=~yr.PART_BOUNDARY,R("onPartEnd"),R("onPartBegin"),h=ve.HEADER_FIELD_START;break}}else d&yr.LAST_BOUNDARY&&y===si?(R("onPartEnd"),h=ve.END,d=0):c=0;if(c>0)s[c-1]=y;else if(n>0){let N=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);R("onPartData",0,n,N),n=0,E("onPartData"),r--}break;case ve.END:break;default:throw new Error(`Unexpected state entered: ${h}`)}O("onHeaderField"),O("onHeaderValue"),O("onPartData"),this.index=c,this.state=h,this.flags=d}end(){if(this.state===ve.HEADER_FIELD_START&&this.index===0||this.state===ve.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==ve.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});async function bl(e){if(e[st].disturbed)throw new TypeError(`body used already for: ${e.url}`);if(e[st].disturbed=!0,e[st].error)throw e[st].error;let{body:t}=e;if(t===null)return pt.Buffer.alloc(0);if(!(t instanceof St.default))return pt.Buffer.alloc(0);let r=[],i=0;try{for await(let n of t){if(e.size>0&&i+n.length>e.size){let s=new Xe(`content size at ${e.url} over limit: ${e.size}`,"max-size");throw t.destroy(s),s}i+=n.length,r.push(n)}}catch(n){throw n instanceof Jt?n:new Xe(`Invalid response body while trying to fetch ${e.url}: ${n.message}`,"system",n)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return r.every(n=>typeof n=="string")?pt.Buffer.from(r.join("")):pt.Buffer.concat(r,i)}catch(n){throw new Xe(`Could not create Buffer from response body for ${e.url}: ${n.message}`,"system",n)}else throw new Xe(`Premature close of server response while trying to fetch ${e.url}`)}var St,er,pt,kx,st,qt,mn,Ox,eo,oy,ay,to=Fe(()=>{St=Ne(require("node:stream"),1),er=require("node:util"),pt=require("node:buffer");ri();Gs();pl();Vs();Qs();kx=(0,er.promisify)(St.default.pipeline),st=Symbol("Body internals"),qt=class{constructor(t,{size:r=0}={}){let i=null;t===null?t=null:ml(t)?t=pt.Buffer.from(t.toString()):ii(t)||pt.Buffer.isBuffer(t)||(er.types.isAnyArrayBuffer(t)?t=pt.Buffer.from(t):ArrayBuffer.isView(t)?t=pt.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof St.default||(t instanceof _r?(t=j_(t),i=t.type.split("=")[1]):t=pt.Buffer.from(String(t))));let n=t;pt.Buffer.isBuffer(t)?n=St.default.Readable.from(t):ii(t)&&(n=St.default.Readable.from(t.stream())),this[st]={body:t,stream:n,boundary:i,disturbed:!1,error:null},this.size=r,t instanceof St.default&&t.on("error",s=>{let a=s instanceof Jt?s:new Xe(`Invalid response body while trying to fetch ${this.url}: ${s.message}`,"system",s);this[st].error=a})}get body(){return this[st].stream}get bodyUsed(){return this[st].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:r,byteLength:i}=await bl(this);return t.slice(r,r+i)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let i=new _r,n=new URLSearchParams(await this.text());for(let[s,a]of n)i.append(s,a);return i}let{toFormData:r}=await Promise.resolve().then(()=>(sy(),iy));return r(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[st].body&&this[st].body.type||"",r=await this.arrayBuffer();return new kt([r],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await bl(this);return new TextDecoder().decode(t)}buffer(){return bl(this)}};qt.prototype.buffer=(0,er.deprecate)(qt.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(qt.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,er.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});mn=(e,t)=>{let r,i,{body:n}=e[st];if(e.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof St.default&&typeof n.getBoundary!="function"&&(r=new St.PassThrough({highWaterMark:t}),i=new St.PassThrough({highWaterMark:t}),n.pipe(r),n.pipe(i),e[st].stream=r,n=i),n},Ox=(0,er.deprecate)(e=>e.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),eo=(e,t)=>e===null?null:typeof e=="string"?"text/plain;charset=UTF-8":ml(e)?"application/x-www-form-urlencoded;charset=UTF-8":ii(e)?e.type||null:pt.Buffer.isBuffer(e)||er.types.isAnyArrayBuffer(e)||ArrayBuffer.isView(e)?null:e instanceof _r?`multipart/form-data; boundary=${t[st].boundary}`:e&&typeof e.getBoundary=="function"?`multipart/form-data;boundary=${Ox(e)}`:e instanceof St.default?null:"text/plain;charset=UTF-8",oy=e=>{let{body:t}=e[st];return t===null?0:ii(t)?t.size:pt.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},ay=async(e,{body:t})=>{t===null?e.end():await kx(t,e)}});function uy(e=[]){return new ot(e.reduce((t,r,i,n)=>(i%2===0&&t.push(n.slice(i,i+2)),t),[]).filter(([t,r])=>{try{return ro(t),wl(t,String(r)),!0}catch{return!1}}))}var vl,oi,ro,wl,ot,no=Fe(()=>{vl=require("node:util"),oi=Ne(require("node:http"),1),ro=typeof oi.default.validateHeaderName=="function"?oi.default.validateHeaderName:e=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let t=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},wl=typeof oi.default.validateHeaderValue=="function"?oi.default.validateHeaderValue:(e,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let r=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}},ot=class e extends URLSearchParams{constructor(t){let r=[];if(t instanceof e){let i=t.raw();for(let[n,s]of Object.entries(i))r.push(...s.map(a=>[n,a]))}else if(t!=null)if(typeof t=="object"&&!vl.types.isBoxedPrimitive(t)){let i=t[Symbol.iterator];if(i==null)r.push(...Object.entries(t));else{if(typeof i!="function")throw new TypeError("Header pairs must be iterable");r=[...t].map(n=>{if(typeof n!="object"||vl.types.isBoxedPrimitive(n))throw new TypeError("Each header pair must be an iterable object");return[...n]}).map(n=>{if(n.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...n]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([i,n])=>(ro(i),wl(i,String(n)),[String(i).toLowerCase(),String(n)])):void 0,super(r),new Proxy(this,{get(i,n,s){switch(n){case"append":case"set":return(a,l)=>(ro(a),wl(a,String(l)),URLSearchParams.prototype[n].call(i,String(a).toLowerCase(),String(l)));case"delete":case"has":case"getAll":return a=>(ro(a),URLSearchParams.prototype[n].call(i,String(a).toLowerCase()));case"keys":return()=>(i.sort(),new Set(URLSearchParams.prototype.keys.call(i)).keys());default:return Reflect.get(i,n,s)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let r=this.getAll(t);if(r.length===0)return null;let i=r.join(", ");return/^content-encoding$/i.test(t)&&(i=i.toLowerCase()),i}forEach(t,r=void 0){for(let i of this.keys())Reflect.apply(t,r,[this.get(i),i,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,r)=>(t[r]=this.getAll(r),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,r)=>{let i=this.getAll(r);return r==="host"?t[r]=i[0]:t[r]=i.length>1?i:i[0],t},{})}};Object.defineProperties(ot.prototype,["get","entries","forEach","values"].reduce((e,t)=>(e[t]={enumerable:!0},e),{}))});var xx,ai,Sl=Fe(()=>{xx=new Set([301,302,303,307,308]),ai=e=>xx.has(e)});var Ot,mt,ly=Fe(()=>{no();to();Sl();Ot=Symbol("Response internals"),mt=class e extends qt{constructor(t=null,r={}){super(t,r);let i=r.status!=null?r.status:200,n=new ot(r.headers);if(t!==null&&!n.has("Content-Type")){let s=eo(t,this);s&&n.append("Content-Type",s)}this[Ot]={type:"default",url:r.url,status:i,statusText:r.statusText||"",headers:n,counter:r.counter,highWaterMark:r.highWaterMark}}get type(){return this[Ot].type}get url(){return this[Ot].url||""}get status(){return this[Ot].status}get ok(){return this[Ot].status>=200&&this[Ot].status<300}get redirected(){return this[Ot].counter>0}get statusText(){return this[Ot].statusText}get headers(){return this[Ot].headers}get highWaterMark(){return this[Ot].highWaterMark}clone(){return new e(mn(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,r=302){if(!ai(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new e(null,{headers:{location:new URL(t).toString()},status:r})}static error(){let t=new e(null,{status:0,statusText:""});return t[Ot].type="error",t}static json(t=void 0,r={}){let i=JSON.stringify(t);if(i===void 0)throw new TypeError("data is not JSON serializable");let n=new ot(r&&r.headers);return n.has("content-type")||n.set("content-type","application/json"),new e(i,{...r,headers:n})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(mt.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}})});var cy,fy=Fe(()=>{cy=e=>{if(e.search)return e.search;let t=e.href.length-1,r=e.hash||(e.href[t]==="#"?"#":"");return e.href[t-r.length]==="?"?"?":""}});function hy(e,t=!1){return e==null||(e=new URL(e),/^(about|blob|data):$/.test(e.protocol))?"no-referrer":(e.username="",e.password="",e.hash="",t&&(e.pathname="",e.search=""),e)}function gy(e){if(!py.has(e))throw new TypeError(`Invalid referrerPolicy: ${e}`);return e}function Px(e){if(/^(http|ws)s:$/.test(e.protocol))return!0;let t=e.host.replace(/(^\[)|(]$)/g,""),r=(0,dy.isIP)(t);return r===4&&/^127\./.test(t)||r===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:e.host==="localhost"||e.host.endsWith(".localhost")?!1:e.protocol==="file:"}function gn(e){return/^about:(blank|srcdoc)$/.test(e)||e.protocol==="data:"||/^(blob|filesystem):$/.test(e.protocol)?!0:Px(e)}function _y(e,{referrerURLCallback:t,referrerOriginCallback:r}={}){if(e.referrer==="no-referrer"||e.referrerPolicy==="")return null;let i=e.referrerPolicy;if(e.referrer==="about:client")return"no-referrer";let n=e.referrer,s=hy(n),a=hy(n,!0);s.toString().length>4096&&(s=a),t&&(s=t(s)),r&&(a=r(a));let l=new URL(e.url);switch(i){case"no-referrer":return"no-referrer";case"origin":return a;case"unsafe-url":return s;case"strict-origin":return gn(s)&&!gn(l)?"no-referrer":a.toString();case"strict-origin-when-cross-origin":return s.origin===l.origin?s:gn(s)&&!gn(l)?"no-referrer":a;case"same-origin":return s.origin===l.origin?s:"no-referrer";case"origin-when-cross-origin":return s.origin===l.origin?s:a;case"no-referrer-when-downgrade":return gn(s)&&!gn(l)?"no-referrer":s;default:throw new TypeError(`Invalid referrerPolicy: ${i}`)}}function yy(e){let t=(e.get("referrer-policy")||"").split(/[,\s]+/),r="";for(let i of t)i&&py.has(i)&&(r=i);return r}var dy,py,my,El=Fe(()=>{dy=require("node:net");py=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),my="strict-origin-when-cross-origin"});var by,vy,We,ui,Lx,br,wy,Sy=Fe(()=>{by=require("node:url"),vy=require("node:util");no();to();Qs();fy();El();We=Symbol("Request internals"),ui=e=>typeof e=="object"&&typeof e[We]=="object",Lx=(0,vy.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),br=class e extends qt{constructor(t,r={}){let i;if(ui(t)?i=new URL(t.url):(i=new URL(t),t={}),i.username!==""||i.password!=="")throw new TypeError(`${i} is an url with embedded credentials.`);let n=r.method||t.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(n)&&(n=n.toUpperCase()),!ui(r)&&"data"in r&&Lx(),(r.body!=null||ui(t)&&t.body!==null)&&(n==="GET"||n==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let s=r.body?r.body:ui(t)&&t.body!==null?mn(t):null;super(s,{size:r.size||t.size||0});let a=new ot(r.headers||t.headers||{});if(s!==null&&!a.has("Content-Type")){let h=eo(s,this);h&&a.set("Content-Type",h)}let l=ui(t)?t.signal:null;if("signal"in r&&(l=r.signal),l!=null&&!U_(l))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let c=r.referrer==null?t.referrer:r.referrer;if(c==="")c="no-referrer";else if(c){let h=new URL(c);c=/^about:(\/\/)?client$/.test(h)?"client":h}else c=void 0;this[We]={method:n,redirect:r.redirect||t.redirect||"follow",headers:a,parsedURL:i,signal:l,referrer:c},this.follow=r.follow===void 0?t.follow===void 0?20:t.follow:r.follow,this.compress=r.compress===void 0?t.compress===void 0?!0:t.compress:r.compress,this.counter=r.counter||t.counter||0,this.agent=r.agent||t.agent,this.highWaterMark=r.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=r.referrerPolicy||t.referrerPolicy||""}get method(){return this[We].method}get url(){return(0,by.format)(this[We].parsedURL)}get headers(){return this[We].headers}get redirect(){return this[We].redirect}get signal(){return this[We].signal}get referrer(){if(this[We].referrer==="no-referrer")return"";if(this[We].referrer==="client")return"about:client";if(this[We].referrer)return this[We].referrer.toString()}get referrerPolicy(){return this[We].referrerPolicy}set referrerPolicy(t){this[We].referrerPolicy=gy(t)}clone(){return new e(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(br.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});wy=e=>{let{parsedURL:t}=e[We],r=new ot(e[We].headers);r.has("Accept")||r.set("Accept","*/*");let i=null;if(e.body===null&&/^(post|put)$/i.test(e.method)&&(i="0"),e.body!==null){let l=oy(e);typeof l=="number"&&!Number.isNaN(l)&&(i=String(l))}i&&r.set("Content-Length",i),e.referrerPolicy===""&&(e.referrerPolicy=my),e.referrer&&e.referrer!=="no-referrer"?e[We].referrer=_y(e):e[We].referrer="no-referrer",e[We].referrer instanceof URL&&r.set("Referer",e.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip, deflate, br");let{agent:n}=e;typeof n=="function"&&(n=n(t));let s=cy(t),a={path:t.pathname+s,method:e.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:e.insecureHTTPParser,agent:n};return{parsedURL:t,options:a}}});var li,Ey=Fe(()=>{Vs();li=class extends Jt{constructor(t,r="aborted"){super(t,r)}}});var Rl={};$i(Rl,{AbortError:()=>li,Blob:()=>kt,FetchError:()=>Xe,File:()=>gr,FormData:()=>_r,Headers:()=>ot,Request:()=>br,Response:()=>mt,blobFrom:()=>Z_,blobFromSync:()=>X_,default:()=>Tl,fileFrom:()=>J_,fileFromSync:()=>ey,isRedirect:()=>ai});async function Tl(e,t){return new Promise((r,i)=>{let n=new br(e,t),{parsedURL:s,options:a}=wy(n);if(!Ix.has(s.protocol))throw new TypeError(`node-fetch cannot load ${e}. URL scheme "${s.protocol.replace(/:$/,"")}" is not supported.`);if(s.protocol==="data:"){let y=F_(n.url),v=new mt(y,{headers:{"Content-Type":y.typeFull}});r(v);return}let l=(s.protocol==="https:"?Ry.default:Ty.default).request,{signal:c}=n,h=null,d=()=>{let y=new li("The operation was aborted.");i(y),n.body&&n.body instanceof gt.default.Readable&&n.body.destroy(y),!(!h||!h.body)&&h.body.emit("error",y)};if(c&&c.aborted){d();return}let p=()=>{d(),_()},m=l(s.toString(),a);c&&c.addEventListener("abort",p);let _=()=>{m.abort(),c&&c.removeEventListener("abort",p)};m.on("error",y=>{i(new Xe(`request to ${n.url} failed, reason: ${y.message}`,"system",y)),_()}),Fx(m,y=>{h&&h.body&&h.body.destroy(y)}),process.version<"v14"&&m.on("socket",y=>{let v;y.prependListener("end",()=>{v=y._eventsCount}),y.prependListener("close",E=>{if(h&&v<y._eventsCount&&!E){let S=new Error("Premature close");S.code="ERR_STREAM_PREMATURE_CLOSE",h.body.emit("error",S)}})}),m.on("response",y=>{m.setTimeout(0);let v=uy(y.rawHeaders);if(ai(y.statusCode)){let N=v.get("Location"),$=null;try{$=N===null?null:new URL(N,n.url)}catch{if(n.redirect!=="manual"){i(new Xe(`uri requested responds with an invalid redirect URL: ${N}`,"invalid-redirect")),_();return}}switch(n.redirect){case"error":i(new Xe(`uri requested responds with a redirect, redirect mode is set to error: ${n.url}`,"no-redirect")),_();return;case"manual":break;case"follow":{if($===null)break;if(n.counter>=n.follow){i(new Xe(`maximum redirect reached at: ${n.url}`,"max-redirect")),_();return}let j={headers:new ot(n.headers),follow:n.follow,counter:n.counter+1,agent:n.agent,compress:n.compress,method:n.method,body:mn(n),signal:n.signal,size:n.size,referrer:n.referrer,referrerPolicy:n.referrerPolicy};if(!z_(n.url,$)||!K_(n.url,$))for(let U of["authorization","www-authenticate","cookie","cookie2"])j.headers.delete(U);if(y.statusCode!==303&&n.body&&t.body instanceof gt.default.Readable){i(new Xe("Cannot follow redirect with body being a readable stream","unsupported-redirect")),_();return}(y.statusCode===303||(y.statusCode===301||y.statusCode===302)&&n.method==="POST")&&(j.method="GET",j.body=void 0,j.headers.delete("content-length"));let ae=yy(v);ae&&(j.referrerPolicy=ae),r(Tl(new br($,j))),_();return}default:return i(new TypeError(`Redirect option '${n.redirect}' is not a valid value of RequestRedirect`))}}c&&y.once("end",()=>{c.removeEventListener("abort",p)});let E=(0,gt.pipeline)(y,new gt.PassThrough,N=>{N&&i(N)});process.version<"v12.10"&&y.on("aborted",p);let S={url:n.url,status:y.statusCode,statusText:y.statusMessage,headers:v,size:n.size,counter:n.counter,highWaterMark:n.highWaterMark},R=v.get("Content-Encoding");if(!n.compress||n.method==="HEAD"||R===null||y.statusCode===204||y.statusCode===304){h=new mt(E,S),r(h);return}let O={flush:qr.default.Z_SYNC_FLUSH,finishFlush:qr.default.Z_SYNC_FLUSH};if(R==="gzip"||R==="x-gzip"){E=(0,gt.pipeline)(E,qr.default.createGunzip(O),N=>{N&&i(N)}),h=new mt(E,S),r(h);return}if(R==="deflate"||R==="x-deflate"){let N=(0,gt.pipeline)(y,new gt.PassThrough,$=>{$&&i($)});N.once("data",$=>{($[0]&15)===8?E=(0,gt.pipeline)(E,qr.default.createInflate(),j=>{j&&i(j)}):E=(0,gt.pipeline)(E,qr.default.createInflateRaw(),j=>{j&&i(j)}),h=new mt(E,S),r(h)}),N.once("end",()=>{h||(h=new mt(E,S),r(h))});return}if(R==="br"){E=(0,gt.pipeline)(E,qr.default.createBrotliDecompress(),N=>{N&&i(N)}),h=new mt(E,S),r(h);return}h=new mt(E,S),r(h)}),ay(m,n).catch(i)})}function Fx(e,t){let r=ci.Buffer.from(`0\r
\r
`),i=!1,n=!1,s;e.on("response",a=>{let{headers:l}=a;i=l["transfer-encoding"]==="chunked"&&!l["content-length"]}),e.on("socket",a=>{let l=()=>{if(i&&!n){let h=new Error("Premature close");h.code="ERR_STREAM_PREMATURE_CLOSE",t(h)}},c=h=>{n=ci.Buffer.compare(h.slice(-5),r)===0,!n&&s&&(n=ci.Buffer.compare(s.slice(-3),r.slice(0,3))===0&&ci.Buffer.compare(h.slice(-2),r.slice(3))===0),s=h};a.prependListener("close",l),a.on("data",c),e.on("close",()=>{a.removeListener("close",l),a.removeListener("data",c)})})}var Ty,Ry,qr,gt,ci,Ix,Al=Fe(()=>{Ty=Ne(require("node:http"),1),Ry=Ne(require("node:https"),1),qr=Ne(require("node:zlib"),1),gt=Ne(require("node:stream"),1),ci=require("node:buffer");N_();to();ly();no();Sy();pl();Ey();Sl();Gs();Qs();El();_l();Ix=new Set(["data:","http:","https:"])});var jx={};$i(jx,{activate:()=>Wx,deactivate:()=>Hx});module.exports=Mc(jx);var P=Ne(require("vscode"));var xf=require("node:buffer"),ss=Ne(Yc(),1),rs=Ne($o(),1),Sh=require("child_process"),sd=Ne(Ho(),1),rn=Ne(Ho(),1),Pd=require("node:events"),la=Object.defineProperty,Yv=Object.getOwnPropertyDescriptor,ca=Object.getOwnPropertyNames,Qv=Object.prototype.hasOwnProperty,B=(e,t)=>function(){return e&&(t=(0,e[ca(e)[0]])(e=0)),t},Xv=(e,t)=>function(){return t||(0,e[ca(e)[0]])((t={exports:{}}).exports,t),t.exports},xe=(e,t)=>{for(var r in t)la(e,r,{get:t[r],enumerable:!0})},Zv=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ca(t))!Qv.call(e,n)&&n!==r&&la(e,n,{get:()=>t[n],enumerable:!(i=Yv(t,n))||i.enumerable});return e},Ce=e=>Zv(la({},"__esModule",{value:!0}),e);function Jv(...e){let t=new String(e);return is.set(t,e),t}function Ji(e){return e instanceof String&&is.has(e)}function Qc(e){return is.get(e)||[]}var is,Pn=B({"src/lib/args/pathspec.ts"(){"use strict";is=new WeakMap}}),Vt,dr=B({"src/lib/errors/git-error.ts"(){"use strict";Vt=class extends Error{constructor(e,t){super(t),this.task=e,Object.setPrototypeOf(this,new.target.prototype)}}}}),Ln,sn=B({"src/lib/errors/git-response-error.ts"(){"use strict";dr(),Ln=class extends Vt{constructor(e,t){super(void 0,t||String(e)),this.git=e}}}}),kf,Of=B({"src/lib/errors/task-configuration-error.ts"(){"use strict";dr(),kf=class extends Vt{constructor(e){super(void 0,e)}}}});function Pf(e){return typeof e!="function"?Lr:e}function Lf(e){return typeof e=="function"&&e!==Lr}function If(e,t){let r=e.indexOf(t);return r<=0?[e,""]:[e.substr(0,r),e.substr(r+1)]}function Ff(e,t=0){return Nf(e)&&e.length>t?e[t]:void 0}function Pr(e,t=0){if(Nf(e)&&e.length>t)return e[e.length-1-t]}function Nf(e){return!!(e&&typeof e.length=="number")}function In(e="",t=!0,r=`
`){return e.split(r).reduce((i,n)=>{let s=t?n.trim():n;return s&&i.push(s),i},[])}function fa(e,t){return In(e,!0).map(r=>t(r))}function ha(e){return(0,ss.exists)(e,ss.FOLDER)}function le(e,t){return Array.isArray(e)?e.includes(t)||e.push(t):e.add(t),t}function Bf(e,t){return Array.isArray(e)&&!e.includes(t)&&e.push(t),e}function os(e,t){if(Array.isArray(e)){let r=e.indexOf(t);r>=0&&e.splice(r,1)}else e.delete(t);return t}function Pt(e){return Array.isArray(e)?e:[e]}function Df(e){return e.replace(/[\s-]+(.)/g,(t,r)=>r.toUpperCase())}function Mf(e){return Pt(e).map(String)}function be(e,t=0){if(e==null)return t;let r=parseInt(e,10);return isNaN(r)?t:r}function On(e,t){let r=[];for(let i=0,n=e.length;i<n;i++)r.push(t,e[i]);return r}function xn(e){return(Array.isArray(e)?xf.Buffer.concat(e):e).toString("utf-8")}function qf(e,t){return Object.assign({},...t.map(r=>r in e?{[r]:e[r]}:{}))}function Yo(e=0){return new Promise(t=>setTimeout(t,e))}function Qo(e){if(e!==!1)return e}var nn,Lr,Fn,as=B({"src/lib/utils/util.ts"(){"use strict";nn="\0",Lr=()=>{},Fn=Object.prototype.toString.call.bind(Object.prototype.toString)}});function Lt(e,t,r){return t(e)?e:arguments.length>2?r:void 0}function Xo(e,t){let r=Ji(e)?"string":typeof e;return/number|string|boolean/.test(r)&&(!t||!t.includes(r))}function us(e){return!!e&&Fn(e)==="[object Object]"}function $f(e){return typeof e=="function"}var Nn,ze,Wf,es,da,Hf=B({"src/lib/utils/argument-filters.ts"(){"use strict";as(),Pn(),Nn=e=>Array.isArray(e),ze=e=>typeof e=="string",Wf=e=>Array.isArray(e)&&e.every(ze),es=e=>ze(e)||Array.isArray(e)&&e.every(ze),da=e=>e==null||"number|boolean|function".includes(typeof e)?!1:Array.isArray(e)||typeof e=="string"||typeof e.length=="number"}}),Zo,ew=B({"src/lib/utils/exit-codes.ts"(){"use strict";Zo=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR",e[e.NOT_FOUND=-2]="NOT_FOUND",e[e.UNCLEAN=128]="UNCLEAN",e))(Zo||{})}}),ts,tw=B({"src/lib/utils/git-output-streams.ts"(){"use strict";ts=class jf{constructor(t,r){this.stdOut=t,this.stdErr=r}asStrings(){return new jf(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}}}}),Z,hr,rw=B({"src/lib/utils/line-parser.ts"(){"use strict";Z=class{constructor(e,t){this.matches=[],this.parse=(r,i)=>(this.resetMatches(),this._regExp.every((n,s)=>this.addMatch(n,s,r(s)))?this.useMatches(i,this.prepareMatches())!==!1:!1),this._regExp=Array.isArray(e)?e:[e],t&&(this.useMatches=t)}useMatches(e,t){throw new Error("LineParser:useMatches not implemented")}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(e,t,r){let i=r&&e.exec(r);return i&&this.pushMatch(t,i),!!i}pushMatch(e,t){this.matches.push(...t.slice(1))}},hr=class extends Z{addMatch(e,t,r){return/^remote:\s/.test(String(r))&&super.addMatch(e,t,r)}pushMatch(e,t){(e>0||t.length>1)&&super.pushMatch(e,t)}}}});function Uf(...e){let t=process.cwd(),r=Object.assign({baseDir:t,...zf},...e.filter(i=>typeof i=="object"&&i));return r.baseDir=r.baseDir||t,r.trimmed=r.trimmed===!0,r}var zf,nw=B({"src/lib/utils/simple-git-options.ts"(){"use strict";zf={binary:"git",maxConcurrentProcesses:5,config:[],trimmed:!1}}});function pa(e,t=[]){return us(e)?Object.keys(e).reduce((r,i)=>{let n=e[i];if(Ji(n))r.push(n);else if(Xo(n,["boolean"]))r.push(i+"="+n);else if(Array.isArray(n))for(let s of n)Xo(s,["string","number"])||r.push(i+"="+s);else r.push(i);return r},t):t}function tt(e,t=0,r=!1){let i=[];for(let n=0,s=t<0?e.length:t;n<s;n++)"string|number".includes(typeof e[n])&&i.push(String(e[n]));return pa(ma(e),i),r||i.push(...iw(e)),i}function iw(e){let t=typeof Pr(e)=="function";return Lt(Pr(e,t?1:0),Nn,[])}function ma(e){let t=$f(Pr(e));return Lt(Pr(e,t?1:0),us)}function ke(e,t=!0){let r=Pf(Pr(e));return t||Lf(r)?r:void 0}var sw=B({"src/lib/utils/task-options.ts"(){"use strict";Hf(),as(),Pn()}});function Jo(e,t){return e(t.stdOut,t.stdErr)}function nt(e,t,r,i=!0){return Pt(r).forEach(n=>{for(let s=In(n,i),a=0,l=s.length;a<l;a++){let c=(h=0)=>{if(!(a+h>=l))return s[a+h]};t.some(({parse:h})=>h(c,e))}}),e}var ow=B({"src/lib/utils/task-parser.ts"(){"use strict";as()}}),Kf={};xe(Kf,{ExitCodes:()=>Zo,GitOutputStreams:()=>ts,LineParser:()=>Z,NOOP:()=>Lr,NULL:()=>nn,RemoteLineParser:()=>hr,append:()=>le,appendTaskOptions:()=>pa,asArray:()=>Pt,asCamelCase:()=>Df,asFunction:()=>Pf,asNumber:()=>be,asStringArray:()=>Mf,bufferToString:()=>xn,callTaskParser:()=>Jo,createInstanceConfig:()=>Uf,delay:()=>Yo,filterArray:()=>Nn,filterFunction:()=>$f,filterHasLength:()=>da,filterPlainObject:()=>us,filterPrimitives:()=>Xo,filterString:()=>ze,filterStringArray:()=>Wf,filterStringOrStringArray:()=>es,filterType:()=>Lt,first:()=>Ff,folderExists:()=>ha,forEachLineWithContent:()=>fa,getTrailingOptions:()=>tt,including:()=>Bf,isUserFunction:()=>Lf,last:()=>Pr,objectToString:()=>Fn,orVoid:()=>Qo,parseStringResponse:()=>nt,pick:()=>qf,prefixedArray:()=>On,remove:()=>os,splitOn:()=>If,toLinesWithContent:()=>In,trailingFunctionArgument:()=>ke,trailingOptionsArgument:()=>ma});var Y=B({"src/lib/utils/index.ts"(){"use strict";Hf(),ew(),tw(),rw(),nw(),sw(),ow(),as()}}),Gf={};xe(Gf,{CheckRepoActions:()=>ea,checkIsBareRepoTask:()=>Yf,checkIsRepoRootTask:()=>Vf,checkIsRepoTask:()=>aw});function aw(e){switch(e){case"bare":return Yf();case"root":return Vf()}return{commands:["rev-parse","--is-inside-work-tree"],format:"utf-8",onError:ls,parser:ga}}function Vf(){return{commands:["rev-parse","--git-dir"],format:"utf-8",onError:ls,parser(t){return/^\.(git)?$/.test(t.trim())}}}function Yf(){return{commands:["rev-parse","--is-bare-repository"],format:"utf-8",onError:ls,parser:ga}}function uw(e){return/(Not a git repository|Kein Git-Repository)/i.test(String(e))}var ea,ls,ga,Qf=B({"src/lib/tasks/check-is-repo.ts"(){"use strict";Y(),ea=(e=>(e.BARE="bare",e.IN_TREE="tree",e.IS_REPO_ROOT="root",e))(ea||{}),ls=({exitCode:e},t,r,i)=>{if(e===128&&uw(t))return r(Buffer.from("false"));i(t)},ga=e=>e.trim()==="true"}});function lw(e,t){let r=new Xf(e),i=e?Jf:Zf;return In(t).forEach(n=>{let s=n.replace(i,"");r.paths.push(s),(eh.test(s)?r.folders:r.files).push(s)}),r}var Xf,Zf,Jf,eh,cw=B({"src/lib/responses/CleanSummary.ts"(){"use strict";Y(),Xf=class{constructor(e){this.dryRun=e,this.paths=[],this.files=[],this.folders=[]}},Zf=/^[a-z]+\s*/i,Jf=/^[a-z]+\s+[a-z]+\s*/i,eh=/\/$/}}),ta={};xe(ta,{EMPTY_COMMANDS:()=>cs,adhocExecTask:()=>th,configurationErrorTask:()=>rt,isBufferTask:()=>nh,isEmptyTask:()=>ih,straightThroughBufferTask:()=>rh,straightThroughStringTask:()=>Ye});function th(e){return{commands:cs,format:"empty",parser:e}}function rt(e){return{commands:cs,format:"empty",parser(){throw typeof e=="string"?new kf(e):e}}}function Ye(e,t=!1){return{commands:e,format:"utf-8",parser(r){return t?String(r).trim():r}}}function rh(e){return{commands:e,format:"buffer",parser(t){return t}}}function nh(e){return e.format==="buffer"}function ih(e){return e.format==="empty"||!e.commands.length}var cs,Oe=B({"src/lib/tasks/task.ts"(){"use strict";Of(),cs=[]}}),sh={};xe(sh,{CONFIG_ERROR_INTERACTIVE_MODE:()=>_a,CONFIG_ERROR_MODE_REQUIRED:()=>ya,CONFIG_ERROR_UNKNOWN_OPTION:()=>ba,CleanOptions:()=>Yi,cleanTask:()=>oh,cleanWithOptionsTask:()=>fw,isCleanOptionsArray:()=>hw});function fw(e,t){let{cleanMode:r,options:i,valid:n}=dw(e);return r?n.options?(i.push(...t),i.some(gw)?rt(_a):oh(r,i)):rt(ba+JSON.stringify(e)):rt(ya)}function oh(e,t){return{commands:["clean",`-${e}`,...t],format:"utf-8",parser(i){return lw(e==="n",i)}}}function hw(e){return Array.isArray(e)&&e.every(t=>va.has(t))}function dw(e){let t,r=[],i={cleanMode:!1,options:!0};return e.replace(/[^a-z]i/g,"").split("").forEach(n=>{pw(n)?(t=n,i.cleanMode=!0):i.options=i.options&&mw(r[r.length]=`-${n}`)}),{cleanMode:t,options:r,valid:i}}function pw(e){return e==="f"||e==="n"}function mw(e){return/^-[a-z]$/i.test(e)&&va.has(e.charAt(1))}function gw(e){return/^-[^\-]/.test(e)?e.indexOf("i")>0:e==="--interactive"}var _a,ya,ba,Yi,va,ah=B({"src/lib/tasks/clean.ts"(){"use strict";cw(),Y(),Oe(),_a="Git clean interactive mode is not supported",ya='Git clean mode parameter ("n" or "f") is required',ba="Git clean unknown option found in: ",Yi=(e=>(e.DRY_RUN="n",e.FORCE="f",e.IGNORED_INCLUDED="x",e.IGNORED_ONLY="X",e.EXCLUDING="e",e.QUIET="q",e.RECURSIVE="d",e))(Yi||{}),va=new Set(["i",...Mf(Object.values(Yi))])}});function _w(e){let t=new lh;for(let r of uh(e))t.addValue(r.file,String(r.key),r.value);return t}function yw(e,t){let r=null,i=[],n=new Map;for(let s of uh(e,t))s.key===t&&(i.push(r=s.value),n.has(s.file)||n.set(s.file,[]),n.get(s.file).push(r));return{key:t,paths:Array.from(n.keys()),scopes:n,value:r,values:i}}function bw(e){return e.replace(/^(file):/,"")}function*uh(e,t=null){let r=e.split("\0");for(let i=0,n=r.length-1;i<n;){let s=bw(r[i++]),a=r[i++],l=t;if(a.includes(`
`)){let c=If(a,`
`);l=c[0],a=c[1]}yield{file:s,key:l,value:a}}}var lh,vw=B({"src/lib/responses/ConfigList.ts"(){"use strict";Y(),lh=class{constructor(){this.files=[],this.values=Object.create(null)}get all(){return this._all||(this._all=this.files.reduce((e,t)=>Object.assign(e,this.values[t]),{})),this._all}addFile(e){if(!(e in this.values)){let t=Pr(this.files);this.values[e]=t?Object.create(this.values[t]):{},this.files.push(e)}return this.values[e]}addValue(e,t,r){let i=this.addFile(e);i.hasOwnProperty(t)?Array.isArray(i[t])?i[t].push(r):i[t]=[i[t],r]:i[t]=r,this._all=void 0}}}});function jo(e,t){return typeof e=="string"&&ra.hasOwnProperty(e)?e:t}function ww(e,t,r,i){let n=["config",`--${i}`];return r&&n.push("--add"),n.push(e,t),{commands:n,format:"utf-8",parser(s){return s}}}function Sw(e,t){let r=["config","--null","--show-origin","--get-all",e];return t&&r.splice(1,0,`--${t}`),{commands:r,format:"utf-8",parser(i){return yw(i,e)}}}function Ew(e){let t=["config","--list","--show-origin","--null"];return e&&t.push(`--${e}`),{commands:t,format:"utf-8",parser(r){return _w(r)}}}function Tw(){return{addConfig(e,t,...r){return this._runTask(ww(e,t,r[0]===!0,jo(r[1],"local")),ke(arguments))},getConfig(e,t){return this._runTask(Sw(e,jo(t,void 0)),ke(arguments))},listConfig(...e){return this._runTask(Ew(jo(e[0],void 0)),ke(arguments))}}}var ra,ch=B({"src/lib/tasks/config.ts"(){"use strict";vw(),Y(),ra=(e=>(e.system="system",e.global="global",e.local="local",e.worktree="worktree",e))(ra||{})}});function Rw(e){return fh.has(e)}var Uo,fh,hh=B({"src/lib/tasks/diff-name-status.ts"(){"use strict";Uo=(e=>(e.ADDED="A",e.COPIED="C",e.DELETED="D",e.MODIFIED="M",e.RENAMED="R",e.CHANGED="T",e.UNMERGED="U",e.UNKNOWN="X",e.BROKEN="B",e))(Uo||{}),fh=new Set(Object.values(Uo))}});function Aw(...e){return new ph().param(...e)}function Cw(e){let t=new Set,r={};return fa(e,i=>{let[n,s,a]=i.split(nn);t.add(n),(r[n]=r[n]||[]).push({line:be(s),path:n,preview:a})}),{paths:t,results:r}}function kw(){return{grep(e){let t=ke(arguments),r=tt(arguments);for(let n of dh)if(r.includes(n))return this._runTask(rt(`git.grep: use of "${n}" is not supported.`),t);typeof e=="string"&&(e=Aw().param(e));let i=["grep","--null","-n","--full-name",...r,...e];return this._runTask({commands:i,format:"utf-8",parser(n){return Cw(n)}},t)}}}var dh,kn,Xc,ph,mh=B({"src/lib/tasks/grep.ts"(){"use strict";Y(),Oe(),dh=["-h"],kn=Symbol("grepQuery"),ph=class{constructor(){this[Xc]=[]}*[(Xc=kn,Symbol.iterator)](){for(let e of this[kn])yield e}and(...e){return e.length&&this[kn].push("--and","(",...On(e,"-e"),")"),this}param(...e){return this[kn].push(...On(e,"-e")),this}}}}),gh={};xe(gh,{ResetMode:()=>Qi,getResetMode:()=>xw,resetTask:()=>Ow});function Ow(e,t){let r=["reset"];return _h(e)&&r.push(`--${e}`),r.push(...t),Ye(r)}function xw(e){if(_h(e))return e;switch(typeof e){case"string":case"undefined":return"soft"}}function _h(e){return yh.includes(e)}var Qi,yh,bh=B({"src/lib/tasks/reset.ts"(){"use strict";Oe(),Qi=(e=>(e.MIXED="mixed",e.SOFT="soft",e.HARD="hard",e.MERGE="merge",e.KEEP="keep",e))(Qi||{}),yh=Array.from(Object.values(Qi))}});function Pw(){return(0,rs.default)("simple-git")}function Zc(e,t,r){return!t||!String(t).replace(/\s*/,"")?r?(i,...n)=>{e(i,...n),r(i,...n)}:e:(i,...n)=>{e(`%s ${i}`,t,...n),r&&r(i,...n)}}function Lw(e,t,{namespace:r}){if(typeof e=="string")return e;let i=t&&t.namespace||"";return i.startsWith(r)?i.substr(r.length+1):i||r}function wa(e,t,r,i=Pw()){let n=e&&`[${e}]`||"",s=[],a=typeof t=="string"?i.extend(t):t,l=Lw(Lt(t,ze),a,i);return h(r);function c(d,p){return le(s,wa(e,l.replace(/^[^:]+/,d),p,i))}function h(d){let p=d&&`[${d}]`||"",m=a&&Zc(a,p)||Lr,_=Zc(i,`${n} ${p}`,m);return Object.assign(a?m:_,{label:e,sibling:c,info:_,step:h})}}var vh=B({"src/lib/git-logger.ts"(){"use strict";Y(),rs.default.formatters.L=e=>String(da(e)?e.length:"-"),rs.default.formatters.B=e=>Buffer.isBuffer(e)?e.toString("utf8"):Fn(e)}}),wh,Iw=B({"src/lib/runners/tasks-pending-queue.ts"(){"use strict";dr(),vh(),wh=class na{constructor(t="GitExecutor"){this.logLabel=t,this._queue=new Map}withProgress(t){return this._queue.get(t)}createProgress(t){let r=na.getName(t.commands[0]),i=wa(this.logLabel,r);return{task:t,logger:i,name:r}}push(t){let r=this.createProgress(t);return r.logger("Adding task to the queue, commands = %o",t.commands),this._queue.set(t,r),r}fatal(t){for(let[r,{logger:i}]of Array.from(this._queue.entries()))r===t.task?(i.info("Failed %o",t),i("Fatal exception, any as-yet un-started tasks run through this executor will not be attempted")):i.info("A fatal exception occurred in a previous task, the queue has been purged: %o",t.message),this.complete(r);if(this._queue.size!==0)throw new Error(`Queue size should be zero after fatal: ${this._queue.size}`)}complete(t){this.withProgress(t)&&this._queue.delete(t)}attempt(t){let r=this.withProgress(t);if(!r)throw new Vt(void 0,"TasksPendingQueue: attempt called for an unknown task");return r.logger("Starting task"),r}static getName(t="empty"){return`task:${t}:${++na.counter}`}static{this.counter=0}}}});function xr(e,t){return{method:Ff(e.commands)||"",commands:t}}function Fw(e,t){return r=>{t("[ERROR] child process exception %o",r),e.push(Buffer.from(String(r.stack),"ascii"))}}function Jc(e,t,r,i){return n=>{r("%s received %L bytes",t,n),i("%B",n),e.push(n)}}var ia,Nw=B({"src/lib/runners/git-executor-chain.ts"(){"use strict";dr(),Oe(),Y(),Iw(),ia=class{constructor(e,t,r){this._executor=e,this._scheduler=t,this._plugins=r,this._chain=Promise.resolve(),this._queue=new wh}get cwd(){return this._cwd||this._executor.cwd}set cwd(e){this._cwd=e}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(e){return this._queue.push(e),this._chain=this._chain.then(()=>this.attemptTask(e))}async attemptTask(e){let t=await this._scheduler.next(),r=()=>this._queue.complete(e);try{let{logger:i}=this._queue.attempt(e);return await(ih(e)?this.attemptEmptyTask(e,i):this.attemptRemoteTask(e,i))}catch(i){throw this.onFatalException(e,i)}finally{r(),t()}}onFatalException(e,t){let r=t instanceof Vt?Object.assign(t,{task:e}):new Vt(e,t&&String(t));return this._chain=Promise.resolve(),this._queue.fatal(r),r}async attemptRemoteTask(e,t){let r=this._plugins.exec("spawn.binary","",xr(e,e.commands)),i=this._plugins.exec("spawn.args",[...e.commands],xr(e,e.commands)),n=await this.gitResponse(e,r,i,this.outputHandler,t.step("SPAWN")),s=await this.handleTaskData(e,i,n,t.step("HANDLE"));return t("passing response to task's parser as a %s",e.format),nh(e)?Jo(e.parser,s):Jo(e.parser,s.asStrings())}async attemptEmptyTask(e,t){return t("empty task bypassing child process to call to task's parser"),e.parser(this)}handleTaskData(e,t,r,i){let{exitCode:n,rejection:s,stdOut:a,stdErr:l}=r;return new Promise((c,h)=>{i("Preparing to handle process response exitCode=%d stdOut=",n);let{error:d}=this._plugins.exec("task.error",{error:s},{...xr(e,t),...r});if(d&&e.onError)return i.info("exitCode=%s handling with custom error handler"),e.onError(r,d,p=>{i.info("custom error handler treated as success"),i("custom error returned a %s",Fn(p)),c(new ts(Array.isArray(p)?Buffer.concat(p):p,Buffer.concat(l)))},h);if(d)return i.info("handling as error: exitCode=%s stdErr=%s rejection=%o",n,l.length,s),h(d);i.info("retrieving task output complete"),c(new ts(Buffer.concat(a),Buffer.concat(l)))})}async gitResponse(e,t,r,i,n){let s=n.sibling("output"),a=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:!0},xr(e,e.commands));return new Promise(l=>{let c=[],h=[];n.info("%s %o",t,r),n("%O",a);let d=this._beforeSpawn(e,r);if(d)return l({stdOut:c,stdErr:h,exitCode:9901,rejection:d});this._plugins.exec("spawn.before",void 0,{...xr(e,r),kill(m){d=m||d}});let p=(0,Sh.spawn)(t,r,a);p.stdout.on("data",Jc(c,"stdOut",n,s.step("stdOut"))),p.stderr.on("data",Jc(h,"stdErr",n,s.step("stdErr"))),p.on("error",Fw(h,n)),i&&(n("Passing child process stdOut/stdErr to custom outputHandler"),i(t,p.stdout,p.stderr,[...r])),this._plugins.exec("spawn.after",void 0,{...xr(e,r),spawned:p,close(m,_){l({stdOut:c,stdErr:h,exitCode:m,rejection:d||_})},kill(m){p.killed||(d=m,p.kill("SIGINT"))}})})}_beforeSpawn(e,t){let r;return this._plugins.exec("spawn.before",void 0,{...xr(e,t),kill(i){r=i||r}}),r}}}}),Eh={};xe(Eh,{GitExecutor:()=>Th});var Th,Bw=B({"src/lib/runners/git-executor.ts"(){"use strict";Nw(),Th=class{constructor(e,t,r){this.cwd=e,this._scheduler=t,this._plugins=r,this._chain=new ia(this,this._scheduler,this._plugins)}chain(){return new ia(this,this._scheduler,this._plugins)}push(e){return this._chain.push(e)}}}});function Dw(e,t,r=Lr){let i=s=>{r(null,s)},n=s=>{s?.task===e&&r(s instanceof Ln?Mw(s):s,void 0)};t.then(i,n)}function Mw(e){let t=i=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${i} should be GitResponseError.git.${i}, this will no longer be available in version 3`),t=Lr};return Object.create(e,Object.getOwnPropertyNames(e.git).reduce(r,{}));function r(i,n){return n in e||(i[n]={enumerable:!1,configurable:!1,get(){return t(n),e.git[n]}}),i}}var qw=B({"src/lib/task-callback.ts"(){"use strict";sn(),Y()}});function ef(e,t){return th(r=>{if(!ha(e))throw new Error(`Git.cwd: cannot change to non-directory "${e}"`);return(t||r).cwd=e})}var $w=B({"src/lib/tasks/change-working-directory.ts"(){"use strict";Y(),Oe()}});function zo(e){let t=["checkout",...e];return t[1]==="-b"&&t.includes("-B")&&(t[1]=os(t,"-B")),Ye(t)}function Ww(){return{checkout(){return this._runTask(zo(tt(arguments,1)),ke(arguments))},checkoutBranch(e,t){return this._runTask(zo(["-b",e,t,...tt(arguments)]),ke(arguments))},checkoutLocalBranch(e){return this._runTask(zo(["-b",e,...tt(arguments)]),ke(arguments))}}}var Hw=B({"src/lib/tasks/checkout.ts"(){"use strict";Y(),Oe()}});function jw(){return{count:0,garbage:0,inPack:0,packs:0,prunePackable:0,size:0,sizeGarbage:0,sizePack:0}}function Uw(){return{countObjects(){return this._runTask({commands:["count-objects","--verbose"],format:"utf-8",parser(e){return nt(jw(),[Rh],e)}})}}}var Rh,zw=B({"src/lib/tasks/count-objects.ts"(){"use strict";Y(),Rh=new Z(/([a-z-]+): (\d+)$/,(e,[t,r])=>{let i=Df(t);e.hasOwnProperty(i)&&(e[i]=be(r))})}});function Kw(e){return nt({author:null,branch:"",commit:"",root:!1,summary:{changes:0,insertions:0,deletions:0}},Ah,e)}var Ah,Gw=B({"src/lib/parsers/parse-commit.ts"(){"use strict";Y(),Ah=[new Z(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,(e,[t,r,i])=>{e.branch=t,e.commit=i,e.root=!!r}),new Z(/\s*Author:\s(.+)/i,(e,[t])=>{let r=t.split("<"),i=r.pop();!i||!i.includes("@")||(e.author={email:i.substr(0,i.length-1),name:r.join("<").trim()})}),new Z(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,(e,[t,r,i])=>{e.summary.changes=parseInt(t,10)||0,e.summary.insertions=parseInt(r,10)||0,e.summary.deletions=parseInt(i,10)||0}),new Z(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,(e,[t,r,i])=>{e.summary.changes=parseInt(t,10)||0;let n=parseInt(r,10)||0;i==="-"?e.summary.deletions=n:i==="+"&&(e.summary.insertions=n)})]}});function Vw(e,t,r){return{commands:["-c","core.abbrev=40","commit",...On(e,"-m"),...t,...r],format:"utf-8",parser:Kw}}function Yw(){return{commit(t,...r){let i=ke(arguments),n=e(t)||Vw(Pt(t),Pt(Lt(r[0],es,[])),[...Lt(r[1],Nn,[]),...tt(arguments,0,!0)]);return this._runTask(n,i)}};function e(t){return!es(t)&&rt("git.commit: requires the commit message to be supplied as a string/string[]")}}var Qw=B({"src/lib/tasks/commit.ts"(){"use strict";Gw(),Y(),Oe()}});function Xw(){return{firstCommit(){return this._runTask(Ye(["rev-list","--max-parents=0","HEAD"],!0),ke(arguments))}}}var Zw=B({"src/lib/tasks/first-commit.ts"(){"use strict";Y(),Oe()}});function Jw(e,t){let r=["hash-object",e];return t&&r.push("-w"),Ye(r,!0)}var eS=B({"src/lib/tasks/hash-object.ts"(){"use strict";Oe()}});function tS(e,t,r){let i=String(r).trim(),n;if(n=Ch.exec(i))return new Xi(e,t,!1,n[1]);if(n=kh.exec(i))return new Xi(e,t,!0,n[1]);let s="",a=i.split(" ");for(;a.length;)if(a.shift()==="in"){s=a.join(" ");break}return new Xi(e,t,/^re/i.test(i),s)}var Xi,Ch,kh,rS=B({"src/lib/responses/InitSummary.ts"(){"use strict";Xi=class{constructor(e,t,r,i){this.bare=e,this.path=t,this.existing=r,this.gitDir=i}},Ch=/^Init.+ repository in (.+)$/,kh=/^Rein.+ in (.+)$/}});function nS(e){return e.includes(Sa)}function iS(e=!1,t,r){let i=["init",...r];return e&&!nS(i)&&i.splice(1,0,Sa),{commands:i,format:"utf-8",parser(n){return tS(i.includes("--bare"),t,n)}}}var Sa,sS=B({"src/lib/tasks/init.ts"(){"use strict";rS(),Sa="--bare"}});function Ea(e){for(let t=0;t<e.length;t++){let r=Ta.exec(e[t]);if(r)return`--${r[1]}`}return""}function oS(e){return Ta.test(e)}var Ta,Bn=B({"src/lib/args/log-format.ts"(){"use strict";Ta=/^--(stat|numstat|name-only|name-status)(=|$)/}}),Oh,aS=B({"src/lib/responses/DiffSummary.ts"(){"use strict";Oh=class{constructor(){this.changed=0,this.deletions=0,this.insertions=0,this.files=[]}}}});function xh(e=""){let t=Ph[e];return r=>nt(new Oh,t,r,!1)}var Ko,tf,rf,nf,Ph,Lh=B({"src/lib/parsers/parse-diff-summary.ts"(){"use strict";Bn(),aS(),hh(),Y(),Ko=[new Z(/^(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/,(e,[t,r,i=""])=>{e.files.push({file:t.trim(),changes:be(r),insertions:i.replace(/[^+]/g,"").length,deletions:i.replace(/[^-]/g,"").length,binary:!1})}),new Z(/^(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)/,(e,[t,r,i])=>{e.files.push({file:t.trim(),before:be(r),after:be(i),binary:!0})}),new Z(/(\d+) files? changed\s*((?:, \d+ [^,]+){0,2})/,(e,[t,r])=>{let i=/(\d+) i/.exec(r),n=/(\d+) d/.exec(r);e.changed=be(t),e.insertions=be(i?.[1]),e.deletions=be(n?.[1])})],tf=[new Z(/(\d+)\t(\d+)\t(.+)$/,(e,[t,r,i])=>{let n=be(t),s=be(r);e.changed++,e.insertions+=n,e.deletions+=s,e.files.push({file:i,changes:n+s,insertions:n,deletions:s,binary:!1})}),new Z(/-\t-\t(.+)$/,(e,[t])=>{e.changed++,e.files.push({file:t,after:0,before:0,binary:!0})})],rf=[new Z(/(.+)$/,(e,[t])=>{e.changed++,e.files.push({file:t,changes:0,insertions:0,deletions:0,binary:!1})})],nf=[new Z(/([ACDMRTUXB])([0-9]{0,3})\t(.[^\t]*)(\t(.[^\t]*))?$/,(e,[t,r,i,n,s])=>{e.changed++,e.files.push({file:s??i,changes:0,insertions:0,deletions:0,binary:!1,status:Qo(Rw(t)&&t),from:Qo(!!s&&i!==s&&i),similarity:be(r)})})],Ph={"":Ko,"--stat":Ko,"--numstat":tf,"--name-status":nf,"--name-only":rf}}});function uS(e,t){return t.reduce((r,i,n)=>(r[i]=e[n]||"",r),Object.create({diff:null}))}function Ih(e=Ca,t=Fh,r=""){let i=xh(r);return function(n){let s=In(n.trim(),!1,Ra).map(function(a){let l=a.split(Aa),c=uS(l[0].split(e),t);return l.length>1&&l[1].trim()&&(c.diff=i(l[1])),c});return{all:s,latest:s.length&&s[0]||null,total:s.length}}}var Ra,Aa,Ca,Fh,Nh=B({"src/lib/parsers/parse-list-log-summary.ts"(){"use strict";Y(),Lh(),Bn(),Ra="\xF2\xF2\xF2\xF2\xF2\xF2 ",Aa=" \xF2\xF2",Ca=" \xF2 ",Fh=["hash","date","message","refs","author_name","author_email"]}}),Bh={};xe(Bh,{diffSummaryTask:()=>lS,validateLogFormatConfig:()=>fs});function lS(e){let t=Ea(e),r=["diff"];return t===""&&(t="--stat",r.push("--stat=4096")),r.push(...e),fs(r)||{commands:r,format:"utf-8",parser:xh(t)}}function fs(e){let t=e.filter(oS);if(t.length>1)return rt(`Summary flags are mutually exclusive - pick one of ${t.join(",")}`);if(t.length&&e.includes("-z"))return rt(`Summary flag ${t} parsing is not compatible with null termination option '-z'`)}var ka=B({"src/lib/tasks/diff.ts"(){"use strict";Bn(),Lh(),Oe()}});function cS(e,t){let r=[],i=[];return Object.keys(e).forEach(n=>{r.push(n),i.push(String(e[n]))}),[r,i.join(t)]}function fS(e){return Object.keys(e).reduce((t,r)=>(r in sa||(t[r]=e[r]),t),{})}function Dh(e={},t=[]){let r=Lt(e.splitter,ze,Ca),i=us(e.format)?e.format:{hash:"%H",date:e.strictDate===!1?"%ai":"%aI",message:"%s",refs:"%D",body:e.multiLine?"%B":"%b",author_name:e.mailMap!==!1?"%aN":"%an",author_email:e.mailMap!==!1?"%aE":"%ae"},[n,s]=cS(i,r),a=[],l=[`--pretty=format:${Ra}${s}${Aa}`,...t],c=e.n||e["max-count"]||e.maxCount;if(c&&l.push(`--max-count=${c}`),e.from||e.to){let h=e.symmetric!==!1?"...":"..";a.push(`${e.from||""}${h}${e.to||""}`)}return ze(e.file)&&l.push("--follow",Jv(e.file)),pa(fS(e),l),{fields:n,splitter:r,commands:[...l,...a]}}function hS(e,t,r){let i=Ih(e,t,Ea(r));return{commands:["log",...r],format:"utf-8",parser:i}}function dS(){return{log(...r){let i=ke(arguments),n=Dh(ma(arguments),Lt(arguments[0],Nn)),s=t(...r)||fs(n.commands)||e(n);return this._runTask(s,i)}};function e(r){return hS(r.splitter,r.fields,r.commands)}function t(r,i){return ze(r)&&ze(i)&&rt("git.log(string, string) should be replaced with git.log({ from: string, to: string })")}}var sa,Mh=B({"src/lib/tasks/log.ts"(){"use strict";Bn(),Pn(),Nh(),Y(),Oe(),ka(),sa=(e=>(e[e["--pretty"]=0]="--pretty",e[e["max-count"]=1]="max-count",e[e.maxCount=2]="maxCount",e[e.n=3]="n",e[e.file=4]="file",e[e.format=5]="format",e[e.from=6]="from",e[e.to=7]="to",e[e.splitter=8]="splitter",e[e.symmetric=9]="symmetric",e[e.mailMap=10]="mailMap",e[e.multiLine=11]="multiLine",e[e.strictDate=12]="strictDate",e))(sa||{})}}),Zi,qh,pS=B({"src/lib/responses/MergeSummary.ts"(){"use strict";Zi=class{constructor(e,t=null,r){this.reason=e,this.file=t,this.meta=r}toString(){return`${this.file}:${this.reason}`}},qh=class{constructor(){this.conflicts=[],this.merges=[],this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){return this.conflicts.length?`CONFLICTS: ${this.conflicts.join(", ")}`:"OK"}}}}),oa,$h,mS=B({"src/lib/responses/PullSummary.ts"(){"use strict";oa=class{constructor(){this.remoteMessages={all:[]},this.created=[],this.deleted=[],this.files=[],this.deletions={},this.insertions={},this.summary={changes:0,deletions:0,insertions:0}}},$h=class{constructor(){this.remote="",this.hash={local:"",remote:""},this.branch={local:"",remote:""},this.message=""}toString(){return this.message}}}});function Go(e){return e.objects=e.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function sf(e){let t=/^\s*(\d+)/.exec(e),r=/delta (\d+)/i.exec(e);return{count:be(t&&t[1]||"0"),delta:be(r&&r[1]||"0")}}var Wh,gS=B({"src/lib/parsers/parse-remote-objects.ts"(){"use strict";Y(),Wh=[new hr(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,(e,[t,r])=>{let i=t.toLowerCase(),n=Go(e.remoteMessages);Object.assign(n,{[i]:be(r)})}),new hr(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,(e,[t,r])=>{let i=t.toLowerCase(),n=Go(e.remoteMessages);Object.assign(n,{[i]:be(r)})}),new hr(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,(e,[t,r,i])=>{let n=Go(e.remoteMessages);n.total=sf(t),n.reused=sf(r),n.packReused=be(i)})]}});function Hh(e,t){return nt({remoteMessages:new Uh},jh,t)}var jh,Uh,zh=B({"src/lib/parsers/parse-remote-messages.ts"(){"use strict";Y(),gS(),jh=[new hr(/^remote:\s*(.+)$/,(e,[t])=>(e.remoteMessages.all.push(t.trim()),!1)),...Wh,new hr([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],(e,[t])=>{e.remoteMessages.pullRequestUrl=t}),new hr([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],(e,[t,r,i])=>{e.remoteMessages.vulnerabilities={count:be(t),summary:r,url:i}})],Uh=class{constructor(){this.all=[]}}}});function _S(e,t){let r=nt(new $h,Kh,[e,t]);return r.message&&r}var of,af,uf,lf,Kh,cf,Oa,Gh=B({"src/lib/parsers/parse-pull.ts"(){"use strict";mS(),Y(),zh(),of=/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/,af=/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/,uf=/^(create|delete) mode \d+ (.+)/,lf=[new Z(of,(e,[t,r,i])=>{e.files.push(t),r&&(e.insertions[t]=r.length),i&&(e.deletions[t]=i.length)}),new Z(af,(e,[t,,r,,i])=>r!==void 0||i!==void 0?(e.summary.changes=+t||0,e.summary.insertions=+r||0,e.summary.deletions=+i||0,!0):!1),new Z(uf,(e,[t,r])=>{le(e.files,r),le(t==="create"?e.created:e.deleted,r)})],Kh=[new Z(/^from\s(.+)$/i,(e,[t])=>void(e.remote=t)),new Z(/^fatal:\s(.+)$/,(e,[t])=>void(e.message=t)),new Z(/([a-z0-9]+)\.\.([a-z0-9]+)\s+(\S+)\s+->\s+(\S+)$/,(e,[t,r,i,n])=>{e.branch.local=i,e.hash.local=t,e.branch.remote=n,e.hash.remote=r})],cf=(e,t)=>nt(new oa,lf,[e,t]),Oa=(e,t)=>Object.assign(new oa,cf(e,t),Hh(e,t))}}),ff,Vh,hf,yS=B({"src/lib/parsers/parse-merge.ts"(){"use strict";pS(),Y(),Gh(),ff=[new Z(/^Auto-merging\s+(.+)$/,(e,[t])=>{e.merges.push(t)}),new Z(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,(e,[t,r])=>{e.conflicts.push(new Zi(t,r))}),new Z(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,(e,[t,r,i])=>{e.conflicts.push(new Zi(t,r,{deleteRef:i}))}),new Z(/^CONFLICT\s+\((.+)\):/,(e,[t])=>{e.conflicts.push(new Zi(t,null))}),new Z(/^Automatic merge failed;\s+(.+)$/,(e,[t])=>{e.result=t})],Vh=(e,t)=>Object.assign(hf(e,t),Oa(e,t)),hf=e=>nt(new qh,ff,e)}});function df(e){return e.length?{commands:["merge",...e],format:"utf-8",parser(t,r){let i=Vh(t,r);if(i.failed)throw new Ln(i);return i}}:rt("Git.merge requires at least one option")}var bS=B({"src/lib/tasks/merge.ts"(){"use strict";sn(),yS(),Oe()}});function vS(e,t,r){let i=r.includes("deleted"),n=r.includes("tag")||/^refs\/tags/.test(e),s=!r.includes("new");return{deleted:i,tag:n,branch:!n,new:!s,alreadyUpdated:s,local:e,remote:t}}var pf,Yh,mf,wS=B({"src/lib/parsers/parse-push.ts"(){"use strict";Y(),zh(),pf=[new Z(/^Pushing to (.+)$/,(e,[t])=>{e.repo=t}),new Z(/^updating local tracking ref '(.+)'/,(e,[t])=>{e.ref={...e.ref||{},local:t}}),new Z(/^[=*-]\s+([^:]+):(\S+)\s+\[(.+)]$/,(e,[t,r,i])=>{e.pushed.push(vS(t,r,i))}),new Z(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,(e,[t,r,i])=>{e.branch={...e.branch||{},local:t,remote:r,remoteName:i}}),new Z(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,(e,[t,r,i,n])=>{e.update={head:{local:t,remote:r},hash:{from:i,to:n}}})],Yh=(e,t)=>{let r=mf(e,t),i=Hh(e,t);return{...r,...i}},mf=(e,t)=>nt({pushed:[]},pf,[e,t])}}),Qh={};xe(Qh,{pushTagsTask:()=>SS,pushTask:()=>xa});function SS(e={},t){return le(t,"--tags"),xa(e,t)}function xa(e={},t){let r=["push",...t];return e.branch&&r.splice(1,0,e.branch),e.remote&&r.splice(1,0,e.remote),os(r,"-v"),le(r,"--verbose"),le(r,"--porcelain"),{commands:r,format:"utf-8",parser:Yh}}var Xh=B({"src/lib/tasks/push.ts"(){"use strict";wS(),Y()}});function ES(){return{showBuffer(){let e=["show",...tt(arguments,1)];return e.includes("--binary")||e.splice(1,0,"--binary"),this._runTask(rh(e),ke(arguments))},show(){let e=["show",...tt(arguments,1)];return this._runTask(Ye(e),ke(arguments))}}}var TS=B({"src/lib/tasks/show.ts"(){"use strict";Y(),Oe()}}),gf,Zh,RS=B({"src/lib/responses/FileStatusSummary.ts"(){"use strict";gf=/^(.+)\0(.+)$/,Zh=class{constructor(e,t,r){if(this.path=e,this.index=t,this.working_dir=r,t==="R"||r==="R"){let i=gf.exec(e)||[null,e,e];this.from=i[2]||"",this.path=i[1]||""}}}}});function _f(e){let[t,r]=e.split(nn);return{from:r||t,to:t}}function ct(e,t,r){return[`${e}${t}`,r]}function Vo(e,...t){return t.map(r=>ct(e,r,(i,n)=>le(i.conflicted,n)))}function AS(e,t){let r=t.trim();switch(" "){case r.charAt(2):return i(r.charAt(0),r.charAt(1),r.substr(3));case r.charAt(1):return i(" ",r.charAt(0),r.substr(2));default:return}function i(n,s,a){let l=`${n}${s}`,c=Jh.get(l);c&&c(e,a),l!=="##"&&l!=="!!"&&e.files.push(new Zh(a,n,s))}}var yf,Jh,ed,CS=B({"src/lib/responses/StatusSummary.ts"(){"use strict";Y(),RS(),yf=class{constructor(){this.not_added=[],this.conflicted=[],this.created=[],this.deleted=[],this.ignored=void 0,this.modified=[],this.renamed=[],this.files=[],this.staged=[],this.ahead=0,this.behind=0,this.current=null,this.tracking=null,this.detached=!1,this.isClean=()=>!this.files.length}},Jh=new Map([ct(" ","A",(e,t)=>le(e.created,t)),ct(" ","D",(e,t)=>le(e.deleted,t)),ct(" ","M",(e,t)=>le(e.modified,t)),ct("A"," ",(e,t)=>le(e.created,t)&&le(e.staged,t)),ct("A","M",(e,t)=>le(e.created,t)&&le(e.staged,t)&&le(e.modified,t)),ct("D"," ",(e,t)=>le(e.deleted,t)&&le(e.staged,t)),ct("M"," ",(e,t)=>le(e.modified,t)&&le(e.staged,t)),ct("M","M",(e,t)=>le(e.modified,t)&&le(e.staged,t)),ct("R"," ",(e,t)=>{le(e.renamed,_f(t))}),ct("R","M",(e,t)=>{let r=_f(t);le(e.renamed,r),le(e.modified,r.to)}),ct("!","!",(e,t)=>{le(e.ignored=e.ignored||[],t)}),ct("?","?",(e,t)=>le(e.not_added,t)),...Vo("A","A","U"),...Vo("D","D","U"),...Vo("U","A","D","U"),["##",(e,t)=>{let r=/ahead (\d+)/,i=/behind (\d+)/,n=/^(.+?(?=(?:\.{3}|\s|$)))/,s=/\.{3}(\S*)/,a=/\son\s([\S]+)$/,l;l=r.exec(t),e.ahead=l&&+l[1]||0,l=i.exec(t),e.behind=l&&+l[1]||0,l=n.exec(t),e.current=l&&l[1],l=s.exec(t),e.tracking=l&&l[1],l=a.exec(t),e.current=l&&l[1]||e.current,e.detached=/\(no branch\)/.test(t)}]]),ed=function(e){let t=e.split(nn),r=new yf;for(let i=0,n=t.length;i<n;){let s=t[i++].trim();s&&(s.charAt(0)==="R"&&(s+=nn+(t[i++]||"")),AS(r,s))}return r}}});function kS(e){return{format:"utf-8",commands:["status","--porcelain","-b","-u","--null",...e.filter(r=>!td.includes(r))],parser(r){return ed(r)}}}var td,OS=B({"src/lib/tasks/status.ts"(){"use strict";CS(),td=["--null","-z"]}});function ns(e=0,t=0,r=0,i="",n=!0){return Object.defineProperty({major:e,minor:t,patch:r,agent:i,installed:n},"toString",{value(){return`${this.major}.${this.minor}.${this.patch}`},configurable:!1,enumerable:!1})}function xS(){return ns(0,0,0,"",!1)}function PS(){return{version(){return this._runTask({commands:["--version"],format:"utf-8",parser:LS,onError(e,t,r,i){if(e.exitCode===-2)return r(Buffer.from(Pa));i(t)}})}}}function LS(e){return e===Pa?xS():nt(ns(0,0,0,e),rd,e)}var Pa,rd,IS=B({"src/lib/tasks/version.ts"(){"use strict";Y(),Pa="installed=false",rd=[new Z(/version (\d+)\.(\d+)\.(\d+)(?:\s*\((.+)\))?/,(e,[t,r,i,n=""])=>{Object.assign(e,ns(be(t),be(r),be(i),n))}),new Z(/version (\d+)\.(\d+)\.(\D+)(.+)?$/,(e,[t,r,i,n=""])=>{Object.assign(e,ns(be(t),be(r),i,n))})]}}),nd={};xe(nd,{SimpleGitApi:()=>aa});var aa,FS=B({"src/lib/simple-git-api.ts"(){"use strict";qw(),$w(),Hw(),zw(),Qw(),ch(),Zw(),mh(),eS(),sS(),Mh(),bS(),Xh(),TS(),OS(),Oe(),IS(),Y(),aa=class{constructor(e){this._executor=e}_runTask(e,t){let r=this._executor.chain(),i=r.push(e);return t&&Dw(e,i,t),Object.create(this,{then:{value:i.then.bind(i)},catch:{value:i.catch.bind(i)},_executor:{value:r}})}add(e){return this._runTask(Ye(["add",...Pt(e)]),ke(arguments))}cwd(e){let t=ke(arguments);return typeof e=="string"?this._runTask(ef(e,this._executor),t):typeof e?.path=="string"?this._runTask(ef(e.path,e.root&&this._executor||void 0),t):this._runTask(rt("Git.cwd: workingDirectory must be supplied as a string"),t)}hashObject(e,t){return this._runTask(Jw(e,t===!0),ke(arguments))}init(e){return this._runTask(iS(e===!0,this._executor.cwd,tt(arguments)),ke(arguments))}merge(){return this._runTask(df(tt(arguments)),ke(arguments))}mergeFromTo(e,t){return ze(e)&&ze(t)?this._runTask(df([e,t,...tt(arguments)]),ke(arguments,!1)):this._runTask(rt("Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings"))}outputHandler(e){return this._executor.outputHandler=e,this}push(){let e=xa({remote:Lt(arguments[0],ze),branch:Lt(arguments[1],ze)},tt(arguments));return this._runTask(e,ke(arguments))}stash(){return this._runTask(Ye(["stash",...tt(arguments)]),ke(arguments))}status(){return this._runTask(kS(tt(arguments)),ke(arguments))}},Object.assign(aa.prototype,Ww(),Yw(),Tw(),Uw(),Xw(),kw(),dS(),ES(),PS())}}),id={};xe(id,{Scheduler:()=>od});var bf,od,NS=B({"src/lib/runners/scheduler.ts"(){"use strict";Y(),vh(),bf=(()=>{let e=0;return()=>{e++;let{promise:t,done:r}=(0,sd.createDeferred)();return{promise:t,done:r,id:e}}})(),od=class{constructor(e=2){this.concurrency=e,this.logger=wa("","scheduler"),this.pending=[],this.running=[],this.logger("Constructed, concurrency=%s",e)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency){this.logger("Schedule attempt ignored, pending=%s running=%s concurrency=%s",this.pending.length,this.running.length,this.concurrency);return}let e=le(this.running,this.pending.shift());this.logger("Attempting id=%s",e.id),e.done(()=>{this.logger("Completing id=",e.id),os(this.running,e),this.schedule()})}next(){let{promise:e,id:t}=le(this.pending,bf());return this.logger("Scheduling id=%s",t),this.schedule(),e}}}}),ad={};xe(ad,{applyPatchTask:()=>BS});function BS(e,t){return Ye(["apply",...t,...e])}var DS=B({"src/lib/tasks/apply-patch.ts"(){"use strict";Oe()}});function MS(e,t){return{branch:e,hash:t,success:!0}}function qS(e){return{branch:e,hash:null,success:!1}}var ud,$S=B({"src/lib/responses/BranchDeleteSummary.ts"(){"use strict";ud=class{constructor(){this.all=[],this.branches={},this.errors=[]}get success(){return!this.errors.length}}}});function ld(e,t){return t===1&&ua.test(e)}var vf,ua,wf,hs,WS=B({"src/lib/parsers/parse-branch-delete.ts"(){"use strict";$S(),Y(),vf=/(\S+)\s+\(\S+\s([^)]+)\)/,ua=/^error[^']+'([^']+)'/m,wf=[new Z(vf,(e,[t,r])=>{let i=MS(t,r);e.all.push(i),e.branches[t]=i}),new Z(ua,(e,[t])=>{let r=qS(t);e.errors.push(r),e.all.push(r),e.branches[t]=r})],hs=(e,t)=>nt(new ud,wf,[e,t])}}),cd,HS=B({"src/lib/responses/BranchSummary.ts"(){"use strict";cd=class{constructor(){this.all=[],this.branches={},this.current="",this.detached=!1}push(e,t,r,i,n){e==="*"&&(this.detached=t,this.current=r),this.all.push(r),this.branches[r]={current:e==="*",linkedWorkTree:e==="+",name:r,commit:i,label:n}}}}});function Sf(e){return e?e.charAt(0):""}function fd(e){return nt(new cd,hd,e)}var hd,jS=B({"src/lib/parsers/parse-branch.ts"(){"use strict";HS(),Y(),hd=[new Z(/^([*+]\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,(e,[t,r,i,n])=>{e.push(Sf(t),!0,r,i,n)}),new Z(/^([*+]\s)?(\S+)\s+([a-z0-9]+)\s?(.*)$/s,(e,[t,r,i,n])=>{e.push(Sf(t),!1,r,i,n)})]}}),dd={};xe(dd,{branchLocalTask:()=>zS,branchTask:()=>US,containsDeleteBranchCommand:()=>pd,deleteBranchTask:()=>GS,deleteBranchesTask:()=>KS});function pd(e){let t=["-d","-D","--delete"];return e.some(r=>t.includes(r))}function US(e){let t=pd(e),r=["branch",...e];return r.length===1&&r.push("-a"),r.includes("-v")||r.splice(1,0,"-v"),{format:"utf-8",commands:r,parser(i,n){return t?hs(i,n).all[0]:fd(i)}}}function zS(){return{format:"utf-8",commands:["branch","-v"],parser:fd}}function KS(e,t=!1){return{format:"utf-8",commands:["branch","-v",t?"-D":"-d",...e],parser(r,i){return hs(r,i)},onError({exitCode:r,stdOut:i},n,s,a){if(!ld(String(n),r))return a(n);s(i)}}}function GS(e,t=!1){let r={format:"utf-8",commands:["branch","-v",t?"-D":"-d",e],parser(i,n){return hs(i,n).branches[e]},onError({exitCode:i,stdErr:n,stdOut:s},a,l,c){if(!ld(String(a),i))return c(a);throw new Ln(r.parser(xn(s),xn(n)),String(a))}};return r}var VS=B({"src/lib/tasks/branch.ts"(){"use strict";sn(),WS(),jS(),Y()}}),md,YS=B({"src/lib/responses/CheckIgnore.ts"(){"use strict";md=e=>e.split(/\n/g).map(t=>t.trim()).filter(t=>!!t)}}),gd={};xe(gd,{checkIgnoreTask:()=>QS});function QS(e){return{commands:["check-ignore",...e],format:"utf-8",parser:md}}var XS=B({"src/lib/tasks/check-ignore.ts"(){"use strict";YS()}}),_d={};xe(_d,{cloneMirrorTask:()=>JS,cloneTask:()=>yd});function ZS(e){return/^--upload-pack(=|$)/.test(e)}function yd(e,t,r){let i=["clone",...r];return ze(e)&&i.push(e),ze(t)&&i.push(t),i.find(ZS)?rt("git.fetch: potential exploit argument blocked."):Ye(i)}function JS(e,t,r){return le(r,"--mirror"),yd(e,t,r)}var eE=B({"src/lib/tasks/clone.ts"(){"use strict";Oe(),Y()}});function tE(e,t){return nt({raw:e,remote:null,branches:[],tags:[],updated:[],deleted:[]},bd,[e,t])}var bd,rE=B({"src/lib/parsers/parse-fetch.ts"(){"use strict";Y(),bd=[new Z(/From (.+)$/,(e,[t])=>{e.remote=t}),new Z(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,(e,[t,r])=>{e.branches.push({name:t,tracking:r})}),new Z(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,(e,[t,r])=>{e.tags.push({name:t,tracking:r})}),new Z(/- \[deleted]\s+\S+\s*-> (.+)$/,(e,[t])=>{e.deleted.push({tracking:t})}),new Z(/\s*([^.]+)\.\.(\S+)\s+(\S+)\s*-> (.+)$/,(e,[t,r,i,n])=>{e.updated.push({name:i,tracking:n,to:r,from:t})})]}}),vd={};xe(vd,{fetchTask:()=>iE});function nE(e){return/^--upload-pack(=|$)/.test(e)}function iE(e,t,r){let i=["fetch",...r];return e&&t&&i.push(e,t),i.find(nE)?rt("git.fetch: potential exploit argument blocked."):{commands:i,format:"utf-8",parser:tE}}var sE=B({"src/lib/tasks/fetch.ts"(){"use strict";rE(),Oe()}});function oE(e){return nt({moves:[]},wd,e)}var wd,aE=B({"src/lib/parsers/parse-move.ts"(){"use strict";Y(),wd=[new Z(/^Renaming (.+) to (.+)$/,(e,[t,r])=>{e.moves.push({from:t,to:r})})]}}),Sd={};xe(Sd,{moveTask:()=>uE});function uE(e,t){return{commands:["mv","-v",...Pt(e),t],format:"utf-8",parser:oE}}var lE=B({"src/lib/tasks/move.ts"(){"use strict";aE(),Y()}}),Ed={};xe(Ed,{pullTask:()=>cE});function cE(e,t,r){let i=["pull",...r];return e&&t&&i.splice(1,0,e,t),{commands:i,format:"utf-8",parser(n,s){return Oa(n,s)},onError(n,s,a,l){let c=_S(xn(n.stdOut),xn(n.stdErr));if(c)return l(new Ln(c));l(s)}}}var fE=B({"src/lib/tasks/pull.ts"(){"use strict";sn(),Gh(),Y()}});function hE(e){let t={};return Td(e,([r])=>t[r]={name:r}),Object.values(t)}function dE(e){let t={};return Td(e,([r,i,n])=>{t.hasOwnProperty(r)||(t[r]={name:r,refs:{fetch:"",push:""}}),n&&i&&(t[r].refs[n.replace(/[^a-z]/g,"")]=i)}),Object.values(t)}function Td(e,t){fa(e,r=>t(r.split(/\s+/)))}var pE=B({"src/lib/responses/GetRemoteSummary.ts"(){"use strict";Y()}}),Rd={};xe(Rd,{addRemoteTask:()=>mE,getRemotesTask:()=>gE,listRemotesTask:()=>_E,remoteTask:()=>yE,removeRemoteTask:()=>bE});function mE(e,t,r){return Ye(["remote","add",...r,e,t])}function gE(e){let t=["remote"];return e&&t.push("-v"),{commands:t,format:"utf-8",parser:e?dE:hE}}function _E(e){let t=[...e];return t[0]!=="ls-remote"&&t.unshift("ls-remote"),Ye(t)}function yE(e){let t=[...e];return t[0]!=="remote"&&t.unshift("remote"),Ye(t)}function bE(e){return Ye(["remote","remove",e])}var vE=B({"src/lib/tasks/remote.ts"(){"use strict";pE(),Oe()}}),Ad={};xe(Ad,{stashListTask:()=>wE});function wE(e={},t){let r=Dh(e),i=["stash","list",...r.commands,...t],n=Ih(r.splitter,r.fields,Ea(i));return fs(i)||{commands:i,format:"utf-8",parser:n}}var SE=B({"src/lib/tasks/stash-list.ts"(){"use strict";Bn(),Nh(),ka(),Mh()}}),Cd={};xe(Cd,{addSubModuleTask:()=>EE,initSubModuleTask:()=>TE,subModuleTask:()=>ds,updateSubModuleTask:()=>RE});function EE(e,t){return ds(["add",e,t])}function TE(e){return ds(["init",...e])}function ds(e){let t=[...e];return t[0]!=="submodule"&&t.unshift("submodule"),Ye(t)}function RE(e){return ds(["update",...e])}var AE=B({"src/lib/tasks/sub-module.ts"(){"use strict";Oe()}});function CE(e,t){let r=isNaN(e),i=isNaN(t);return r!==i?r?1:-1:r?kd(e,t):0}function kd(e,t){return e===t?0:e>t?1:-1}function kE(e){return e.trim()}function Vi(e){return typeof e=="string"&&parseInt(e.replace(/^\D+/g,""),10)||0}var Ef,Od,OE=B({"src/lib/responses/TagList.ts"(){"use strict";Ef=class{constructor(e,t){this.all=e,this.latest=t}},Od=function(e,t=!1){let r=e.split(`
`).map(kE).filter(Boolean);t||r.sort(function(n,s){let a=n.split("."),l=s.split(".");if(a.length===1||l.length===1)return CE(Vi(a[0]),Vi(l[0]));for(let c=0,h=Math.max(a.length,l.length);c<h;c++){let d=kd(Vi(a[c]),Vi(l[c]));if(d)return d}return 0});let i=t?r[0]:[...r].reverse().find(n=>n.indexOf(".")>=0);return new Ef(r,i)}}}),xd={};xe(xd,{addAnnotatedTagTask:()=>LE,addTagTask:()=>PE,tagListTask:()=>xE});function xE(e=[]){let t=e.some(r=>/^--sort=/.test(r));return{format:"utf-8",commands:["tag","-l",...e],parser(r){return Od(r,t)}}}function PE(e){return{format:"utf-8",commands:["tag",e],parser(){return{name:e}}}}function LE(e,t){return{format:"utf-8",commands:["tag","-a","-m",t,e],parser(){return{name:e}}}}var IE=B({"src/lib/tasks/tag.ts"(){"use strict";OE()}}),FE=Xv({"src/git.js"(e,t){"use strict";var{GitExecutor:r}=(Bw(),Ce(Eh)),{SimpleGitApi:i}=(FS(),Ce(nd)),{Scheduler:n}=(NS(),Ce(id)),{configurationErrorTask:s}=(Oe(),Ce(ta)),{asArray:a,filterArray:l,filterPrimitives:c,filterString:h,filterStringOrStringArray:d,filterType:p,getTrailingOptions:m,trailingFunctionArgument:_,trailingOptionsArgument:y}=(Y(),Ce(Kf)),{applyPatchTask:v}=(DS(),Ce(ad)),{branchTask:E,branchLocalTask:S,deleteBranchesTask:R,deleteBranchTask:O}=(VS(),Ce(dd)),{checkIgnoreTask:N}=(XS(),Ce(gd)),{checkIsRepoTask:$}=(Qf(),Ce(Gf)),{cloneTask:j,cloneMirrorTask:ae}=(eE(),Ce(_d)),{cleanWithOptionsTask:U,isCleanOptionsArray:J}=(ah(),Ce(sh)),{diffSummaryTask:Se}=(ka(),Ce(Bh)),{fetchTask:k}=(sE(),Ce(vd)),{moveTask:ce}=(lE(),Ce(Sd)),{pullTask:ie}=(fE(),Ce(Ed)),{pushTagsTask:Ke}=(Xh(),Ce(Qh)),{addRemoteTask:A,getRemotesTask:C,listRemotesTask:Ie,remoteTask:ne,removeRemoteTask:Ze}=(vE(),Ce(Rd)),{getResetMode:Ge,resetTask:Be}=(bh(),Ce(gh)),{stashListTask:tr}=(SE(),Ce(Ad)),{addSubModuleTask:_n,initSubModuleTask:He,subModuleTask:Ae,updateSubModuleTask:te}=(AE(),Ce(Cd)),{addAnnotatedTagTask:$t,addTagTask:at,tagListTask:M}=(IE(),Ce(xd)),{straightThroughBufferTask:fe,straightThroughStringTask:L}=(Oe(),Ce(ta));function I(x,F){this._plugins=F,this._executor=new r(x.baseDir,new n(x.maxConcurrentProcesses),F),this._trimmed=x.trimmed}(I.prototype=Object.create(i.prototype)).constructor=I,I.prototype.customBinary=function(x){return this._plugins.reconfigure("binary",x),this},I.prototype.env=function(x,F){return arguments.length===1&&typeof x=="object"?this._executor.env=x:(this._executor.env=this._executor.env||{})[x]=F,this},I.prototype.stashList=function(x){return this._runTask(tr(y(arguments)||{},l(x)&&x||[]),_(arguments))};function pe(x,F,oe,Te){return typeof oe!="string"?s(`git.${x}() requires a string 'repoPath'`):F(oe,p(Te,h),m(arguments))}I.prototype.clone=function(){return this._runTask(pe("clone",j,...arguments),_(arguments))},I.prototype.mirror=function(){return this._runTask(pe("mirror",ae,...arguments),_(arguments))},I.prototype.mv=function(x,F){return this._runTask(ce(x,F),_(arguments))},I.prototype.checkoutLatestTag=function(x){var F=this;return this.pull(function(){F.tags(function(oe,Te){F.checkout(Te.latest,x)})})},I.prototype.pull=function(x,F,oe,Te){return this._runTask(ie(p(x,h),p(F,h),m(arguments)),_(arguments))},I.prototype.fetch=function(x,F){return this._runTask(k(p(x,h),p(F,h),m(arguments)),_(arguments))},I.prototype.silent=function(x){return console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3"),this},I.prototype.tags=function(x,F){return this._runTask(M(m(arguments)),_(arguments))},I.prototype.rebase=function(){return this._runTask(L(["rebase",...m(arguments)]),_(arguments))},I.prototype.reset=function(x){return this._runTask(Be(Ge(x),m(arguments)),_(arguments))},I.prototype.revert=function(x){let F=_(arguments);return typeof x!="string"?this._runTask(s("Commit must be a string"),F):this._runTask(L(["revert",...m(arguments,0,!0),x]),F)},I.prototype.addTag=function(x){let F=typeof x=="string"?at(x):s("Git.addTag requires a tag name");return this._runTask(F,_(arguments))},I.prototype.addAnnotatedTag=function(x,F){return this._runTask($t(x,F),_(arguments))},I.prototype.deleteLocalBranch=function(x,F,oe){return this._runTask(O(x,typeof F=="boolean"?F:!1),_(arguments))},I.prototype.deleteLocalBranches=function(x,F,oe){return this._runTask(R(x,typeof F=="boolean"?F:!1),_(arguments))},I.prototype.branch=function(x,F){return this._runTask(E(m(arguments)),_(arguments))},I.prototype.branchLocal=function(x){return this._runTask(S(),_(arguments))},I.prototype.raw=function(x){let F=!Array.isArray(x),oe=[].slice.call(F?arguments:x,0);for(let je=0;je<oe.length&&F;je++)if(!c(oe[je])){oe.splice(je,oe.length-je);break}oe.push(...m(arguments,0,!0));var Te=_(arguments);return oe.length?this._runTask(L(oe,this._trimmed),Te):this._runTask(s("Raw: must supply one or more command to execute"),Te)},I.prototype.submoduleAdd=function(x,F,oe){return this._runTask(_n(x,F),_(arguments))},I.prototype.submoduleUpdate=function(x,F){return this._runTask(te(m(arguments,!0)),_(arguments))},I.prototype.submoduleInit=function(x,F){return this._runTask(He(m(arguments,!0)),_(arguments))},I.prototype.subModule=function(x,F){return this._runTask(Ae(m(arguments)),_(arguments))},I.prototype.listRemote=function(){return this._runTask(Ie(m(arguments)),_(arguments))},I.prototype.addRemote=function(x,F,oe){return this._runTask(A(x,F,m(arguments)),_(arguments))},I.prototype.removeRemote=function(x,F){return this._runTask(Ze(x),_(arguments))},I.prototype.getRemotes=function(x,F){return this._runTask(C(x===!0),_(arguments))},I.prototype.remote=function(x,F){return this._runTask(ne(m(arguments)),_(arguments))},I.prototype.tag=function(x,F){let oe=m(arguments);return oe[0]!=="tag"&&oe.unshift("tag"),this._runTask(L(oe),_(arguments))},I.prototype.updateServerInfo=function(x){return this._runTask(L(["update-server-info"]),_(arguments))},I.prototype.pushTags=function(x,F){let oe=Ke({remote:p(x,h)},m(arguments));return this._runTask(oe,_(arguments))},I.prototype.rm=function(x){return this._runTask(L(["rm","-f",...a(x)]),_(arguments))},I.prototype.rmKeepLocal=function(x){return this._runTask(L(["rm","--cached",...a(x)]),_(arguments))},I.prototype.catFile=function(x,F){return this._catFile("utf-8",arguments)},I.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)},I.prototype._catFile=function(x,F){var oe=_(F),Te=["cat-file"],je=F[0];if(typeof je=="string")return this._runTask(s("Git.catFile: options must be supplied as an array of strings"),oe);Array.isArray(je)&&Te.push.apply(Te,je);let $r=x==="buffer"?fe(Te):L(Te);return this._runTask($r,oe)},I.prototype.diff=function(x,F){let oe=h(x)?s("git.diff: supplying options as a single string is no longer supported, switch to an array of strings"):L(["diff",...m(arguments)]);return this._runTask(oe,_(arguments))},I.prototype.diffSummary=function(){return this._runTask(Se(m(arguments,1)),_(arguments))},I.prototype.applyPatch=function(x){let F=d(x)?v(a(x),m([].slice.call(arguments,1))):s("git.applyPatch requires one or more string patches as the first argument");return this._runTask(F,_(arguments))},I.prototype.revparse=function(){let x=["rev-parse",...m(arguments,!0)];return this._runTask(L(x,!0),_(arguments))},I.prototype.clean=function(x,F,oe){let Te=J(x),je=Te&&x.join("")||p(x,h)||"",$r=m([].slice.call(arguments,Te?1:0));return this._runTask(U(je,$r),_(arguments))},I.prototype.exec=function(x){let F={commands:[],format:"utf-8",parser(){typeof x=="function"&&x()}};return this._runTask(F)},I.prototype.clearQueue=function(){return this},I.prototype.checkIgnore=function(x,F){return this._runTask(N(a(p(x,d,[]))),_(arguments))},I.prototype.checkIsRepo=function(x,F){return this._runTask($(p(x,h)),_(arguments))},t.exports=I}});Pn();dr();var NE=class extends Vt{constructor(e,t){super(void 0,t),this.config=e}};dr();dr();var Gt=class extends Vt{constructor(e,t,r){super(e,r),this.task=e,this.plugin=t,Object.setPrototypeOf(this,new.target.prototype)}};sn();Of();Qf();ah();ch();hh();mh();bh();function BE(e){return e?[{type:"spawn.before",action(i,n){e.aborted&&n.kill(new Gt(void 0,"abort","Abort already signaled"))}},{type:"spawn.after",action(i,n){function s(){n.kill(new Gt(void 0,"abort","Abort signal received"))}e.addEventListener("abort",s),n.spawned.on("close",()=>e.removeEventListener("abort",s))}}]:void 0}function DE(e){return typeof e=="string"&&e.trim().toLowerCase()==="-c"}function ME(e,t){if(DE(e)&&/^\s*protocol(.[a-z]+)?.allow/.test(t))throw new Gt(void 0,"unsafe","Configuring protocol.allow is not permitted without enabling allowUnsafeExtProtocol")}function qE(e,t){if(/^\s*--(upload|receive)-pack/.test(e))throw new Gt(void 0,"unsafe","Use of --upload-pack or --receive-pack is not permitted without enabling allowUnsafePack");if(t==="clone"&&/^\s*-u\b/.test(e))throw new Gt(void 0,"unsafe","Use of clone with option -u is not permitted without enabling allowUnsafePack");if(t==="push"&&/^\s*--exec\b/.test(e))throw new Gt(void 0,"unsafe","Use of push with option --exec is not permitted without enabling allowUnsafePack")}function $E({allowUnsafeProtocolOverride:e=!1,allowUnsafePack:t=!1}={}){return{type:"spawn.args",action(r,i){return r.forEach((n,s)=>{let a=s<r.length?r[s+1]:"";e||ME(n,a),t||qE(n,i.method)}),r}}}Y();function WE(e){let t=On(e,"-c");return{type:"spawn.args",action(r){return[...t,...r]}}}Y();var Tf=(0,rn.deferred)().promise;function HE({onClose:e=!0,onExit:t=50}={}){function r(){let n=-1,s={close:(0,rn.deferred)(),closeTimeout:(0,rn.deferred)(),exit:(0,rn.deferred)(),exitTimeout:(0,rn.deferred)()},a=Promise.race([e===!1?Tf:s.closeTimeout.promise,t===!1?Tf:s.exitTimeout.promise]);return i(e,s.close,s.closeTimeout),i(t,s.exit,s.exitTimeout),{close(l){n=l,s.close.done()},exit(l){n=l,s.exit.done()},get exitCode(){return n},result:a}}function i(n,s,a){n!==!1&&(n===!0?s.promise:s.promise.then(()=>Yo(n))).then(a.done)}return{type:"spawn.after",async action(n,{spawned:s,close:a}){let l=r(),c=!0,h=()=>void(c=!1);s.stdout?.on("data",h),s.stderr?.on("data",h),s.on("error",h),s.on("close",d=>l.close(d)),s.on("exit",d=>l.exit(d));try{await l.result,c&&await Yo(50),a(l.exitCode)}catch(d){a(l.exitCode,d)}}}}Y();var jE="Invalid value supplied for custom binary, requires a single string or an array containing either one or two strings",Rf="Invalid value supplied for custom binary, restricted characters must be removed or supply the unsafe.allowUnsafeCustomBinary option";function UE(e){return!e||!/^([a-z]:)?([a-z0-9/.\\_-]+)$/i.test(e)}function Af(e,t){if(e.length<1||e.length>2)throw new Gt(void 0,"binary",jE);if(e.some(UE))if(t)console.warn(Rf);else throw new Gt(void 0,"binary",Rf);let[i,n]=e;return{binary:i,prefix:n}}function zE(e,t=["git"],r=!1){let i=Af(Pt(t),r);e.on("binary",n=>{i=Af(Pt(n),r)}),e.append("spawn.binary",()=>i.binary),e.append("spawn.args",n=>i.prefix?[i.prefix,...n]:n)}dr();function KE(e){return!!(e.exitCode&&e.stdErr.length)}function GE(e){return Buffer.concat([...e.stdOut,...e.stdErr])}function VE(e=!1,t=KE,r=GE){return(i,n)=>!e&&i||!t(n)?i:r(n)}function Cf(e){return{type:"task.error",action(t,r){let i=e(t.error,{stdErr:r.stdErr,stdOut:r.stdOut,exitCode:r.exitCode});return Buffer.isBuffer(i)?{error:new Vt(void 0,i.toString("utf-8"))}:{error:i}}}}Y();var YE=class{constructor(){this.plugins=new Set,this.events=new Pd.EventEmitter}on(e,t){this.events.on(e,t)}reconfigure(e,t){this.events.emit(e,t)}append(e,t){let r=le(this.plugins,{type:e,action:t});return()=>this.plugins.delete(r)}add(e){let t=[];return Pt(e).forEach(r=>r&&this.plugins.add(le(t,r))),()=>{t.forEach(r=>this.plugins.delete(r))}}exec(e,t,r){let i=t,n=Object.freeze(Object.create(r));for(let s of this.plugins)s.type===e&&(i=s.action(i,n));return i}};Y();function QE(e){let t="--progress",r=["checkout","clone","fetch","pull","push"];return[{type:"spawn.args",action(s,a){return r.includes(a.method)?Bf(s,t):s}},{type:"spawn.after",action(s,a){a.commands.includes(t)&&a.spawned.stderr?.on("data",l=>{let c=/^([\s\S]+?):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(l.toString("utf8"));c&&e({method:a.method,stage:XE(c[1]),progress:be(c[2]),processed:be(c[3]),total:be(c[4])})})}}]}function XE(e){return String(e.toLowerCase().split(" ",1))||"unknown"}Y();function ZE(e){let t=qf(e,["uid","gid"]);return{type:"spawn.options",action(r){return{...t,...r}}}}function JE({block:e,stdErr:t=!0,stdOut:r=!0}){if(e>0)return{type:"spawn.after",action(i,n){let s;function a(){s&&clearTimeout(s),s=setTimeout(c,e)}function l(){n.spawned.stdout?.off("data",a),n.spawned.stderr?.off("data",a),n.spawned.off("exit",l),n.spawned.off("close",l),s&&clearTimeout(s)}function c(){l(),n.kill(new Gt(void 0,"timeout","block timeout reached"))}r&&n.spawned.stdout?.on("data",a),t&&n.spawned.stderr?.on("data",a),n.spawned.on("exit",l),n.spawned.on("close",l),a()}}}Pn();function eT(){return{type:"spawn.args",action(e){let t=[],r;function i(n){(r=r||[]).push(...n)}for(let n=0;n<e.length;n++){let s=e[n];if(Ji(s)){i(Qc(s));continue}if(s==="--"){i(e.slice(n+1).flatMap(a=>Ji(a)&&Qc(a)||a));break}t.push(s)}return r?[...t,"--",...r.map(String)]:t}}}Y();var tT=FE();function rT(e,t){let r=new YE,i=Uf(e&&(typeof e=="string"?{baseDir:e}:e)||{},t);if(!ha(i.baseDir))throw new NE(i,"Cannot use simple-git on a directory that does not exist");return Array.isArray(i.config)&&r.add(WE(i.config)),r.add($E(i.unsafe)),r.add(eT()),r.add(HE(i.completion)),i.abort&&r.add(BE(i.abort)),i.progress&&r.add(QE(i.progress)),i.timeout&&r.add(JE(i.timeout)),i.spawnOptions&&r.add(ZE(i.spawnOptions)),r.add(Cf(VE(!0))),i.errors&&r.add(Cf(i.errors)),zE(r,i.binary,i.unsafe?.allowUnsafeCustomBinary),new tT(i,r)}sn();var Dn=rT;var io=Ne(require("path")),kl=Ne(require("fs")),Cy=Ne(I_());async function Nx(e){try{let t=Dn(e);if(!await t.checkIsRepo())return null;let i=await t.log({maxCount:1});if(i.all.length===0)return null;let n=i.latest;if(!n)return null;let s=await t.diffSummary([`${n.hash}^`,n.hash]),a=s.files.map(l=>l.file);return{filesChanged:s.files.length,linesAdded:s.insertions,linesRemoved:s.deletions,commitHash:n.hash.substring(0,8),commitMessage:n.message,author:n.author_name,date:n.date,changedFiles:a}}catch(t){return console.error("Error getting git commit info:",t),null}}async function Bx(e,t=10){try{let r=Dn(e);if(!await r.checkIsRepo())return[];let n=await r.log({maxCount:t});return n.all.length===0?[]:await Promise.all(n.all.map(async(a,l)=>{let c;try{c=await r.diffSummary([`${a.hash}^`,a.hash])}catch{c={files:[],insertions:0,deletions:0}}let h=a.hash.substring(0,8),d=new Date(a.date).toLocaleDateString(),p=c.files.length,m=c.insertions+c.deletions;return{label:`${l===0?"\u{1F525} ":""}${h} - ${a.message}`,description:`by ${a.author_name} on ${d}`,detail:`${p} files, ${m} lines changed`,hash:a.hash}}))}catch(r){return console.error("Error getting recent commits:",r),[]}}var Cl=class{_onDidChangeTreeData=new P.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;gitCommitInfo=null;constructor(){this.loadGitCommitInfo()}async loadGitCommitInfo(){let t=P.workspace.workspaceFolders;t&&t.length>0&&(this.gitCommitInfo=await Nx(t[0].uri.fsPath))}async refresh(){await this.loadGitCommitInfo(),this._onDidChangeTreeData.fire()}getTreeItem(t){return t}getChildren(t){if(t)switch(t.contextValue){case"analysis":if(this.gitCommitInfo){let r=[new we(`Files Changed: ${this.gitCommitInfo.filesChanged}`,P.TreeItemCollapsibleState.None,"info"),new we(`Lines Added: ${this.gitCommitInfo.linesAdded}`,P.TreeItemCollapsibleState.None,"info"),new we(`Lines Removed: ${this.gitCommitInfo.linesRemoved}`,P.TreeItemCollapsibleState.None,"info"),new we(`Commit: ${this.gitCommitInfo.commitHash}`,P.TreeItemCollapsibleState.Collapsed,"commit-details"),new we("Changed Files",P.TreeItemCollapsibleState.Collapsed,"changed-files")];return Promise.resolve(r)}else return Promise.resolve([new we("Files Changed: N/A (No git repo)",P.TreeItemCollapsibleState.None,"info"),new we("Lines Added: N/A",P.TreeItemCollapsibleState.None,"info"),new we("Lines Removed: N/A",P.TreeItemCollapsibleState.None,"info")]);case"quality":return Promise.resolve([new we("Code Coverage: N/A",P.TreeItemCollapsibleState.None,"info"),new we("Linting Issues: 0",P.TreeItemCollapsibleState.None,"info"),new we("Test Status: Pending",P.TreeItemCollapsibleState.None,"info")]);case"security":return Promise.resolve([new we("Vulnerability Scan: Pending",P.TreeItemCollapsibleState.None,"info"),new we("Dependency Check: Pending",P.TreeItemCollapsibleState.None,"info")]);case"performance":return Promise.resolve([new we("Bundle Size: N/A",P.TreeItemCollapsibleState.None,"info"),new we("Load Time: N/A",P.TreeItemCollapsibleState.None,"info")]);case"commit-details":return this.gitCommitInfo?Promise.resolve([new we(`Message: ${this.gitCommitInfo.commitMessage}`,P.TreeItemCollapsibleState.None,"info"),new we(`Author: ${this.gitCommitInfo.author}`,P.TreeItemCollapsibleState.None,"info"),new we(`Date: ${new Date(this.gitCommitInfo.date).toLocaleString()}`,P.TreeItemCollapsibleState.None,"info")]):Promise.resolve([]);case"changed-files":return this.gitCommitInfo&&this.gitCommitInfo.changedFiles.length>0?Promise.resolve(this.gitCommitInfo.changedFiles.map(r=>new we(r,P.TreeItemCollapsibleState.None,"file"))):Promise.resolve([new we("No files changed",P.TreeItemCollapsibleState.None,"info")]);default:return Promise.resolve([])}else return Promise.resolve([new we("Pull Request Analysis",P.TreeItemCollapsibleState.Collapsed,"analysis"),new we("Code Quality Checks",P.TreeItemCollapsibleState.Collapsed,"quality"),new we("Security Review",P.TreeItemCollapsibleState.Collapsed,"security"),new we("Performance Metrics",P.TreeItemCollapsibleState.Collapsed,"performance")])}},we=class extends P.TreeItem{constructor(r,i,n){super(r,i);this.label=r;this.collapsibleState=i;this.contextValue=n;switch(this.tooltip=`${this.label}`,n){case"analysis":this.iconPath=new P.ThemeIcon("search");break;case"quality":this.iconPath=new P.ThemeIcon("checklist");break;case"security":this.iconPath=new P.ThemeIcon("shield");break;case"performance":this.iconPath=new P.ThemeIcon("dashboard");break;case"commit-details":this.iconPath=new P.ThemeIcon("git-commit");break;case"changed-files":this.iconPath=new P.ThemeIcon("files");break;case"file":this.iconPath=new P.ThemeIcon("file");break;case"info":this.iconPath=new P.ThemeIcon("info");break}}};async function Ay(e){try{let t=Dn(e);if(!await t.checkIsRepo())return null;let i=await t.log({maxCount:1});if(i.all.length===0)return null;let n=i.latest;return n?await ky(e,n.hash):null}catch(t){return console.error("Error getting detailed commit changes:",t),null}}async function ky(e,t){try{let r=Dn(e);if(!await r.checkIsRepo())return null;let n=await r.log({from:t,maxCount:1});if(n.all.length===0)return null;let s=n.all[0];if(!s)return null;let a;try{a=await r.diffSummary([`${s.hash}^`,s.hash])}catch{a={files:[],insertions:0,deletions:0}}let l=await Promise.all(a.files.map(async d=>{let p;try{p=await r.diff([`${s.hash}^`,s.hash,"--",d.file])}catch{p=`New file: ${d.file}`}let m="insertions"in d?d.insertions:0,_="deletions"in d?d.deletions:0,y="changes"in d?d.changes:0,v="binary"in d?d.binary:!1;return{filename:d.file,status:v?"binary":"modified",additions:m,deletions:_,changes:y,diff:p}})),c=await r.listConfig(),h=Array.isArray(c.all["user.name"])?c.all["user.name"][0]:c.all["user.name"]||"Unknown";return{commit:{hash:s.hash,shortHash:s.hash.substring(0,8),message:s.message,author:s.author_name,email:s.author_email,date:s.date,timestamp:new Date(s.date).getTime()},summary:{filesChanged:a.files.length,linesAdded:a.insertions,linesRemoved:a.deletions,totalChanges:a.insertions+a.deletions},files:l,exportedAt:new Date().toISOString(),exportedBy:h}}catch(r){return console.error("Error getting detailed commit changes by hash:",r),null}}async function Dx(e,t){try{let r=io.join(t,"prompt.j2"),i=await kl.promises.readFile(r,"utf8"),n=new Cy.Environment,s={...e,raw_json:JSON.stringify(e,null,2)};return n.renderString(i,s)}catch(r){throw console.error("Error rendering template:",r),new Error("Failed to render prompt template")}}async function Mx(e,t){try{if(console.log("Calling OpenAI API directly with prompt length:",e.length),!t||t.trim()==="")return console.log("No API key provided, using mock response"),await new Promise(l=>setTimeout(l,2e3)),{success:!0,response:$x(e)};let{default:r}=await Promise.resolve().then(()=>(Al(),Rl)),i={model:"gpt-4",messages:[{role:"user",content:e}],max_tokens:2e3,temperature:.7},n=await r("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(i)});if(!n.ok){let a=await n.text();throw new Error(`OpenAI API call failed (${n.status}): ${a}`)}let s=await n.json();if(s.choices&&s.choices.length>0)return{success:!0,response:s.choices[0].message.content};throw new Error("Invalid response format from OpenAI API")}catch(r){return console.error("OpenAI API call failed:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async function qx(e,t,r){try{console.log("Calling custom API with prompt length:",e.length),console.log("Custom API URL:",t);let{default:i}=await Promise.resolve().then(()=>(Al(),Rl)),n={prompt:e,commitData:r,timestamp:new Date().toISOString()},s=await i(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!s.ok){let l=await s.text();throw new Error(`Custom API call failed (${s.status}): ${l}`)}let a=await s.json();if(a.response)return{success:!0,response:a.response};if(a.message)return{success:!0,response:a.message};throw new Error("Invalid response format from custom API")}catch(i){return console.error("Custom API call failed:",i),{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}function $x(e){return`# \u{1F50D} Code Review Analysis

## Intent Analysis

Looking at your recent commit, I can see you've made some significant changes! Let me break down what I'm observing:

**Main Goal Assessment:**
Based on the commit message and changes, it appears you were working on enhancing functionality. However, I'd like to understand a few things better:

- What specific problem were you trying to solve with these changes?
- Are there any particular user scenarios you had in mind?
- Does the commit message fully capture the scope of changes made?

## Code Quality Issues

### \u{1F9F9} Unused Variables & Dead Code
- I noticed some potential cleanup opportunities
- Consider reviewing import statements for unused dependencies
- Look for any commented-out code that can be removed

### \u{1F504} Code Duplication
- There might be some repeated patterns that could be refactored
- Consider extracting common functionality into utility functions
- Look for opportunities to apply the DRY principle

### \u{1F4DD} Naming & Style
- Variable and function names look generally good
- Consider consistency in naming conventions
- Some functions might benefit from more descriptive names

### \u26A1 Performance Concerns
- Review any loops or recursive operations
- Consider caching for frequently accessed data
- Look for opportunities to optimize database queries or API calls

## Implementation Logic Gaps

### \u{1F3AF} Edge Cases
**Potential scenarios to consider:**
- What happens with empty or null inputs?
- How does the code handle network failures?
- Are there boundary conditions that need testing?

**Suggested test cases:**
- Test with minimum and maximum values
- Test error conditions and recovery
- Test concurrent access scenarios

### \u{1F6E1}\uFE0F Error Handling
- Consider adding try-catch blocks where appropriate
- Implement graceful degradation for non-critical failures
- Add logging for debugging purposes

### \u{1F512} Security Considerations
- Review input validation and sanitization
- Check for potential injection vulnerabilities
- Consider authentication and authorization requirements

### \u{1F4C8} Scalability & Maintainability
- Will this code handle increased load?
- Is the architecture extensible for future features?
- Consider documentation for complex logic

## Specific Recommendations

### \u26A0\uFE0F Immediate Actions
1. Add comprehensive error handling
2. Include unit tests for new functionality
3. Review and update documentation

### \u{1F680} Future Improvements
1. Consider implementing caching mechanisms
2. Look into performance monitoring
3. Plan for internationalization if needed

### \u{1F9EA} Testing Suggestions
- Add unit tests for core functionality
- Include integration tests for API endpoints
- Consider end-to-end testing for user workflows

---

**Overall Assessment:** The changes show good progress! With some attention to the areas mentioned above, this will be solid, maintainable code. 

Would you like me to dive deeper into any specific area, or do you have questions about implementing any of these suggestions?`}function Wx(e){console.log('Congratulations, your extension "velocityReview" is now active!'),P.commands.executeCommand("setContext","velocityReview:showSidebar",!0);let t=new Cl;P.window.createTreeView("velocityReviewSidebar",{treeDataProvider:t,showCollapseAll:!0});let r=P.commands.registerCommand("velocityReview.helloWorld",()=>{P.window.showInformationMessage("Hello World from Velocity!")}),i=P.commands.registerCommand("velocityReview.refreshSidebar",()=>{t.refresh(),P.window.showInformationMessage("Velocity Review sidebar refreshed!")}),n=P.commands.registerCommand("velocityReview.startReview",async()=>{let l=P.workspace.workspaceFolders;if(!l||l.length===0){P.window.showErrorMessage("No workspace folder found. Please open a project folder.");return}let c=l[0].uri.fsPath,h=await P.window.showQuickPick([{label:"\u{1F525} Review Latest Commit",description:"Review the most recent commit",detail:"Quick review of the latest changes",value:"latest"},{label:"\u{1F4CB} Choose from Recent Commits",description:"Select a specific commit to review",detail:"Browse and select from the last 10 commits",value:"select"}],{placeHolder:"How would you like to start the review?"});if(!h)return;let d;if(h.value==="select"){let y=await Bx(c,10);if(y.length===0){P.window.showErrorMessage("No commits found in this repository.");return}let v=await P.window.showQuickPick(y,{placeHolder:"Select a commit to review"});if(!v)return;d=v.hash}let p=P.workspace.getConfiguration("velocityReview"),m=p.get("apiUrl");if(!m||m.trim()===""){await P.window.showWarningMessage("API URL is not configured. Would you like to configure it now?","Configure URL","Cancel")==="Configure URL"&&P.commands.executeCommand("velocityReview.openConfig");return}await P.window.withProgress({location:P.ProgressLocation.Notification,title:"Starting AI-powered code review...",cancellable:!1},async y=>{try{y.report({increment:0,message:"Analyzing git repository..."});let v;if(d?v=await ky(c,d):v=await Ay(c),!v){P.window.showErrorMessage("No git repository found or no commits available.");return}y.report({increment:25,message:"Generating review prompt..."});let E=await Dx(v,e.extensionPath);y.report({increment:50,message:"Calling API..."});let S=p.get("apiMode")||"openai",R=p.get("openaiApiKey")||"",O;if(S==="openai")O=await Mx(E,R);else{if(!m||m.trim()===""){P.window.showErrorMessage("Custom API URL is not configured. Please configure it in settings.");return}O=await qx(E,m,v)}if(y.report({increment:75,message:"Processing review results..."}),!O.success){P.window.showErrorMessage(`LLM API call failed: ${O.error}`);return}y.report({increment:90,message:"Displaying results..."});let N=await P.workspace.openTextDocument({content:O.response||"No response received",language:"markdown"});await P.window.showTextDocument(N,{preview:!1,viewColumn:P.ViewColumn.Beside}),y.report({increment:100,message:"Review complete!"})}catch(v){console.error("Error during code review:",v),P.window.showErrorMessage(`Code review failed: ${v instanceof Error?v.message:"Unknown error"}`)}}),await t.refresh();let _=d?`selected commit (${d.substring(0,8)})`:"latest commit";P.window.showInformationMessage(`AI code review completed for ${_}! Check the new document for detailed analysis.`)}),s=P.commands.registerCommand("velocityReview.openConfig",async()=>{let l=P.workspace.getConfiguration("velocityReview"),c=l.get("apiMode")||"openai",h=await P.window.showQuickPick([{label:"\u2699\uFE0F Configure API Mode",description:"Choose between OpenAI direct or custom URL",detail:`Current: ${c==="openai"?"OpenAI Direct":"Custom URL"}`,action:"mode"},{label:"\u{1F517} Configure Custom API URL",description:"Set custom API endpoint URL",detail:`Current: ${l.get("apiUrl")||"Not set"} ${c==="custom"?"(Active)":"(Inactive)"}`,action:"url"},{label:"\u{1F511} Configure OpenAI API Key",description:"Set your OpenAI API key",detail:l.get("openaiApiKey")?"Current: ****"+l.get("openaiApiKey").slice(-4)+` ${c==="openai"?"(Active)":"(Inactive)"}`:"Current: Not set",action:"apikey"}],{placeHolder:"Select configuration option"});if(h){if(h.action==="mode"){let d=await P.window.showQuickPick([{label:"\u{1F916} OpenAI Direct",description:"Use OpenAI API directly with your API key",detail:"Requires OpenAI API key, calls api.openai.com",value:"openai"},{label:"\u{1F517} Custom URL",description:"Use your own API endpoint",detail:"Calls your custom URL with the prompt data",value:"custom"}],{placeHolder:"Select API mode"});d&&(await l.update("apiMode",d.value,P.ConfigurationTarget.Global),P.window.showInformationMessage(`API mode set to: ${d.label}`))}else if(h.action==="url"){let d=l.get("apiUrl")||"",p=await P.window.showInputBox({prompt:"Enter your custom API URL",placeHolder:"https://your-api.example.com/review",value:d,validateInput:m=>{if(!m||m.trim()==="")return"URL cannot be empty";try{return new URL(m),null}catch{return"Please enter a valid URL (e.g., https://your-api.example.com/review)"}}});p!==void 0&&(await l.update("apiUrl",p.trim(),P.ConfigurationTarget.Global),P.window.showInformationMessage(`Custom API URL configured: ${p.trim()}`))}else if(h.action==="apikey"){let d=l.get("openaiApiKey")||"",p=await P.window.showInputBox({prompt:"Enter your OpenAI API Key",placeHolder:"sk-...",value:d,password:!0,validateInput:m=>!m||m.trim()===""?"API Key cannot be empty":m.startsWith("sk-")?m.length<20?"API key seems too short":null:'OpenAI API keys typically start with "sk-"'});p!==void 0&&(await l.update("openaiApiKey",p.trim(),P.ConfigurationTarget.Global),P.window.showInformationMessage("OpenAI API Key configured successfully"))}}}),a=P.commands.registerCommand("velocityReview.exportChanges",async()=>{let l=P.workspace.workspaceFolders;if(!l||l.length===0){P.window.showErrorMessage("No workspace folder found. Please open a project folder.");return}await P.window.withProgress({location:P.ProgressLocation.Notification,title:"Exporting commit changes...",cancellable:!1},async c=>{c.report({increment:0,message:"Analyzing git repository..."});let h=l[0].uri.fsPath,d=await Ay(h);if(!d){P.window.showErrorMessage("No git repository found or no commits available.");return}c.report({increment:50,message:"Generating JSON export..."});let p=new Date().toISOString().replace(/[:.]/g,"-"),m=`commit-changes-${d.commit.shortHash}-${p}.json`,_=await P.window.showSaveDialog({defaultUri:P.Uri.file(io.join(h,m)),filters:{"JSON Files":["json"],"All Files":["*"]}});if(!_)return;c.report({increment:75,message:"Writing JSON file..."});let y=JSON.stringify(d,null,2);await kl.promises.writeFile(_.fsPath,y,"utf8"),c.report({increment:100,message:"Export complete!"})}),P.window.showInformationMessage("Commit changes exported successfully!","Open File").then(c=>{c==="Open File"&&P.commands.executeCommand("vscode.open",P.Uri.file(io.join(l[0].uri.fsPath,"commit-changes-*.json")))})});e.subscriptions.push(r,i,n,s,a)}function Hx(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

normalize-path/index.js:
  (*!
   * normalize-path <https://github.com/jonschlinkert/normalize-path>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-extglob/index.js:
  (*!
   * is-extglob <https://github.com/jonschlinkert/is-extglob>
   *
   * Copyright (c) 2014-2016, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

is-glob/index.js:
  (*!
   * is-glob <https://github.com/jonschlinkert/is-glob>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-number/index.js:
  (*!
   * is-number <https://github.com/jonschlinkert/is-number>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

to-regex-range/index.js:
  (*!
   * to-regex-range <https://github.com/micromatch/to-regex-range>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

fill-range/index.js:
  (*!
   * fill-range <https://github.com/jonschlinkert/fill-range>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

web-streams-polyfill/dist/ponyfill.es2018.js:
  (**
   * @license
   * web-streams-polyfill v3.3.3
   * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
   * This code is released under the MIT license.
   * SPDX-License-Identifier: MIT
   *)

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
